!function(){var e,t,n,r,o,s={97888:function(e,t,n){"use strict";var r=n(67294),o=n(35005),s=n(44012),a=n(5977),i=n(9635);class l extends r.Component{render(){return r.createElement(i.Z,{title:"generic.accessdenied"},r.createElement(o.Z,{variant:"danger",className:"float-right",onClick:()=>{this.props.history.goBack()}},r.createElement(s.Z,{id:"generic.goback"})))}}t.Z=(0,a.EN)(l)},3e3:function(e,t,n){"use strict";n.d(t,{hP:function(){return h},iT:function(){return m}});var r=n(28359),o=n(67294),s=n(88375),a=n(35005),i=n(37959),l=n(44012),c=n(96846),d=n(86755);class u extends o.Component{constructor(e){super(e),this.state={popup:!1}}render(){if(!this.props.error)return"";const e=()=>this.setState({popup:!1});return o.createElement(s.Z,{className:"clearfix",variant:"error",dismissible:!!this.props.onClose,onClose:this.props.onClose},o.createElement(l.Z,{id:this.props.error.code||"error.app.undefined"}),o.createElement("hr",null),o.createElement(a.Z,{variant:"danger",className:"float-right",onClick:()=>this.setState({popup:!0})},o.createElement(l.Z,{id:"generic.details"})),o.createElement(i.Z,{centered:!0,show:this.state.popup,onHide:e,size:"lg"},o.createElement(i.Z.Header,{closeButton:!0},o.createElement(i.Z.Title,null,o.createElement(l.Z,{id:this.props.error.code||"error.app.undefined"}))),o.createElement(i.Z.Body,{className:"text-danger pb-0"},this.props.error.desc?.type===c._T.LOCALE?o.createElement(l.Z,{id:this.props.error.desc.desc||"error.api.empty"}):this.props.error.desc?.desc?this.props.error.desc.desc:"",o.createElement("hr",null),o.createElement(r.Z,null,o.createElement("code",{className:"bg-darker d-block pre-wrap p-2 pre-scrollable"},`Webpanel Version: ${d.q4}\nWebpanel Mode: ${d.IK}\nAPI Version: ${d.Gn}\n\nError Code: ${this.props.error.code}\nError Description: ${this.props.error.desc?this.props.error.desc.desc:"No description"}\n\nAdditional Information:\n${this.props.error.extendedInfo}`.replace(/\\/g,"\\\\")))),o.createElement(i.Z.Footer,null,o.createElement("span",{className:"font-italic mr-auto"},o.createElement(l.Z,{id:"generic.debugwarn"})),o.createElement(a.Z,{variant:"secondary",onClick:e},o.createElement(l.Z,{id:"generic.close"})))))}}function m([,e],t){e((e=>{const n=Array.from(e);return n.push(t),n}))}function h([e,t]){return e.map(((e,n)=>{if(e)return o.createElement(u,{key:n,error:e,onClose:()=>t((e=>{const t=Array.from(e);return t[n]=void 0,t}))})}))}t.ZP=u},9635:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(67294),o=n(88375),s=n(44012);function a(e){return r.createElement(o.Z,{className:"clearfix",variant:"error"},r.createElement(s.Z,{id:e.title}),e.body?r.createElement(r.Fragment,null,r.createElement("hr",null),r.createElement(s.Z,{id:e.body})):e.children?r.createElement(r.Fragment,null,r.createElement("hr",null),e.children):null)}},93128:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(67814),o=n(67294),s=n(35005),a=n(15293),i=n(51479),l=n(10729),c=n(61318),d=n(17863),u=n(43489),m=n(44012),h=n(48272),p=n(28359),f=n(37959),g=n(48509);function v(e){const[t,n]=(0,o.useState)(!1);return o.createElement(o.Fragment,null,o.createElement(s.Z,{variant:"danger",className:"d-inline-block",onClick:()=>n(!0),size:"sm"},o.createElement(m.Z,{id:"generic.errordetails",values:{info:void 0!==e.job.errorCode&&null!==e.job.errorCode?g.jK[e.job.errorCode]:"NoCode"}})),o.createElement(f.Z,{centered:!0,show:t,onHide:()=>n(!1),size:"lg"},o.createElement(f.Z.Header,{closeButton:!0},o.createElement(f.Z.Title,null,o.createElement(m.Z,{id:e.job.description}))),o.createElement(f.Z.Body,{className:"text-danger pb-0"},o.createElement(m.Z,{id:"view.instance.jobs.error"}),":"," ",void 0!==e.job.errorCode&&null!==e.job.errorCode?g.jK[e.job.errorCode]:"NoCode",o.createElement("hr",null),o.createElement(p.Z,null,o.createElement("code",{className:"bg-darker d-block pre-wrap p-2 pre-scrollable"},e.job.exceptionDetails))),o.createElement(f.Z.Footer,null,o.createElement(s.Z,{variant:"secondary",onClick:()=>n(!1)},o.createElement(m.Z,{id:"generic.close"})))))}function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}class E extends o.Component{render(){const e=this.props.job,t=new Date(e.startedAt),n=(t.getTime()-Date.now())/1e3,p=(new Date(e.stoppedAt??0).getTime()-Date.now())/1e3,f=void 0!==e.errorCode||void 0!==e.exceptionDetails?"danger":e.cancelled?"warning":e.stoppedAt?"success":"info";return o.createElement(l.Z,{className:"mx-auto",key:e.id,style:{maxWidth:this.props.width},onClose:()=>{this.props.onClose&&this.props.onClose(e)}},o.createElement(d.Z,{closeButton:!!e.stoppedAt&&!!this.props.onClose,className:`bg-${f}`},"#",e.id,": ",e.description),o.createElement(c.Z,{className:"pt-1 text-white"},e.stage?o.createElement("div",{className:"mb-2"},"\u25b6",e.stage):null,o.createElement(m.Z,{id:"app.job.started"}),o.createElement(a.Z,{overlay:o.createElement(u.Z,{id:`${e.id}-tooltip-started`},t.toLocaleString())},(({ref:e,...t})=>o.createElement("span",b({},t,{ref:e}),o.createElement(h.Z,{value:n,numeric:"auto",updateIntervalInSeconds:1})))),o.createElement("br",null),o.createElement(m.Z,{id:"app.job.startedby"}),o.createElement(a.Z,{overlay:o.createElement(u.Z,{id:`${e.id}-tooltip-startedby`},o.createElement(m.Z,{id:"generic.userid"}),e.startedBy.id)},(({ref:t,...n})=>o.createElement("span",b({ref:t},n),e.startedBy.name))),o.createElement("br",null),o.createElement("br",null),e.stoppedAt?o.createElement(o.Fragment,null,o.createElement(m.Z,{id:e.cancelled?"app.job.cancelled":"app.job.completed"}),o.createElement(a.Z,{overlay:o.createElement(u.Z,{id:`${e.id}-tooltip-stopped`},t.toLocaleString())},(({ref:e,...t})=>o.createElement("span",b({},t,{ref:e}),o.createElement(h.Z,{value:p,numeric:"auto",updateIntervalInSeconds:1})))),o.createElement("br",null)):"",e.cancelledBy?o.createElement(o.Fragment,null,o.createElement(m.Z,{id:"app.job.cancelledby"}),o.createElement(a.Z,{overlay:o.createElement(u.Z,{id:`${e.id}-tooltip-createdby`},o.createElement(m.Z,{id:"generic.userid"}),e.startedBy.id)},(({ref:t,...n})=>o.createElement("span",b({ref:t},n),e.cancelledBy.name))),o.createElement("br",null)):"",void 0!==e.errorCode||void 0!==e.exceptionDetails?o.createElement(v,{job:e}):"",o.createElement("div",{className:"d-flex mt-2",style:{height:"1.5rem"}},o.createElement(i.Z,{className:"text-darker font-weight-bold flex-grow-1 h-unset",animated:!e.stoppedAt,label:"number"==typeof e.progress?`${e.progress.toString()}%`:void 0,now:"number"==typeof e.progress?e.progress:100,striped:!0,variant:f}),e.canCancel&&!e.stoppedAt?o.createElement(s.Z,{style:{padding:"0 1em"},className:"ml-1",variant:"danger",onClick:()=>this.props.onCancel(e)},o.createElement(r.G,{icon:"times",className:"d-block"})):null)))}}},20271:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(51436),o=n(67814),s=n(67294),a=n(15881),i=n(35005),l=n(15293),c=n(43489),d=n(44012),u=n(61090),m=n(27961),h=n(39521),p=n(3e3),f=n(93128),g=n(35855);function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}class b extends s.Component{constructor(e){super(e),this.widgetRef=s.createRef(),this.currentTimeout=void 0,this.handleUpdate=this.handleUpdate.bind(this),this.onCancel=this.onCancel.bind(this),this.onClose=this.onClose.bind(this),this.state={jobs:h.Z.jobsByInstance,errors:[],nextRetrySeconds:null,ownerrors:[],loading:!0,instances:new Map}}addError(e){this.setState((t=>{const n=Array.from(t.ownerrors);return n.push(e),this.widgetRef.current&&(this.widgetRef.current.scrollTop=0),{ownerrors:n}}))}componentDidMount(){h.Z.on("jobsLoaded",this.handleUpdate),this.handleUpdate()}componentWillUnmount(){h.Z.removeListener("jobsLoaded",this.handleUpdate)}handleUpdate(){let e;this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=null),h.Z.nextRetry?(e=h.Z.nextRetry.getSeconds()>(new Date).getSeconds()?h.Z.nextRetry.getSeconds()-(new Date).getSeconds():0,this.currentTimeout=setTimeout((()=>this.handleUpdate()),1e3)):e=null,this.setState({jobs:h.Z.jobsByInstance,errors:h.Z.errors,nextRetrySeconds:e,loading:!1,instances:h.Z.accessibleInstances})}async onCancel(e){await h.Z.cancelJob(e.id,(e=>this.addError(e)))&&(h.Z.fastmode=5)}onClose(e){h.Z.clearJob(e.id)}render(){if(!this.props.widget)return this.nested();let e,t=0;for(const e of this.state.jobs.values())t+=e.size;return e=m.ZP.jobswidgetdisplay.value!==m.zQ.NEVER&&(m.ZP.jobswidgetdisplay.value===m.zQ.ALWAYS||(t>0||this.state.errors.length>0)),s.createElement("div",{style:{position:"fixed",top:0,bottom:0,right:0,left:0,pointerEvents:"none",zIndex:5}},s.createElement(u.s,{className:"jobswidget "+(e?"":"invisible"),style:{pointerEvents:"auto",bottom:0,right:0},default:{width:"30vw",height:"50vh",x:document.documentElement.clientWidth-Math.min(.3*document.documentElement.clientWidth,350)-20,y:document.documentElement.clientHeight-.5*document.documentElement.clientHeight-20},maxWidth:350,minHeight:50,minWidth:110,bounds:"parent"},s.createElement("div",{className:"fancyscroll overflow-auto h-100",ref:this.widgetRef},s.createElement("h5",{className:"text-center text-darker font-weight-bold"},s.createElement(d.Z,{id:"view.instance.jobs.title"})),this.nested())))}nested(){return s.createElement("div",{className:this.props.widget?"d-sm-block":""},this.state.loading?s.createElement(g.Z,{text:"loading.instance.jobs.list"}):"",this.state.ownerrors.map(((e,t)=>{if(e)return s.createElement(p.ZP,{key:t,error:e,onClose:()=>this.setState((e=>{const n=Array.from(e.ownerrors);return n[t]=void 0,{ownerrors:n}}))})})),this.state.errors.length>0?s.createElement(s.Fragment,null,this.state.errors.map(((e,t)=>s.createElement("div",{key:t,style:{maxWidth:this.props.widget?350:"unset"}},s.createElement(p.ZP,{error:e})))),s.createElement(a.Z,null,0===this.state.nextRetrySeconds?s.createElement(d.Z,{id:"view.instance.jobs.reconnect_now"}):null!=this.state.nextRetrySeconds?s.createElement(d.Z,{id:"view.instance.jobs.reconnect_in",values:{seconds:this.state.nextRetrySeconds}}):s.createElement(d.Z,{id:"view.instance.jobs.reconnected_auth"}))):null,Array.from(this.state.jobs).sort(((e,t)=>e[0]-t[0])).map((([e,t])=>{let n=!1;t.forEach((e=>{e.stoppedAt&&(n=!0)}));const a=n?{marginTop:"5px",marginLeft:"20px"}:void 0;return s.createElement(s.Fragment,{key:e},s.createElement("div",{className:"bg-dark p-2 row"},s.createElement("div",{className:`col-${n?9:12} text-center`},s.createElement("div",{style:a},s.createElement(l.Z,{overlay:(e=>t=>s.createElement(c.Z,v({id:`tooltip-instance-${e}`},t),e))(e)},s.createElement(s.Fragment,null,this.state.instances.get(e)?.name??"Unknown"," ","(",s.createElement(d.Z,{id:"view.instance.jobs.jobtotal",values:{amount:t.size}}),")")))),n?s.createElement("div",{className:"col-3 text-right"},s.createElement(l.Z,{placement:"top",overlay:e=>s.createElement(c.Z,v({id:"clear-instance-jobs"},e),s.createElement(d.Z,{id:"view.instance.jobs.clearfinished"}))},s.createElement(i.Z,{variant:"outline-secondary",onClick:()=>t.forEach((e=>{e.stoppedAt&&h.Z.clearJob(e.id)})),className:"nowrap"},s.createElement(o.G,{icon:r.NBC})))):s.createElement(s.Fragment,null)),Array.from(t,(([,e])=>e)).sort(((e,t)=>t.id-e.id)).map((e=>s.createElement(f.Z,{job:e,width:this.props.width,key:e.id,onClose:this.onClose,onCancel:this.onCancel}))))})))}}b.defaultProps={widget:!0}},35855:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(67294),o=n(36968),s=n(44012),a=n(29697),i=n(94537);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}class c extends r.Component{constructor(e){super(e)}render(){const{variant:e,animation:t,center:n,className:c,width:d,widthUnit:u,text:m,children:h,...p}=this.props,f={width:`${d}${u}`,height:`${d}${u}`};return r.createElement(i.Z,null,r.createElement(a.Z,{appear:!0,classNames:"anim-fade",addEndListener:(e,t)=>{e.addEventListener("transitionend",t,!1)}},r.createElement("div",{className:n?"text-center":""},r.createElement(o.Z,l({variant:e||"secondary",className:n?`d-block mx-auto ${c??""}`:c,style:f,animation:t||"border"},p)),m?r.createElement(s.Z,{id:m}):"",h)))}}c.defaultProps={animation:"border",width:"50",widthUnit:"vmin",center:!0}},9310:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(51417),o=n(16566),s=n(38658),a=n(67814),i=n(67294),l=n(35005),c=n(31555),d=n(15881),u=n(32258),m=n(44012),h=n(5977),p=n(48509),f=n(11895),g=n(96846),v=n(53803),b=n(75631),E=n(42522),y=n(44615),w=n(86755),Z=n(1320),I=n(3e3),C=n(35855);class A extends i.Component{constructor(e){super(e),this.submit=this.submit.bind(this),console.log(Z.Mq.oautherrors),this.state={busy:!1,validated:!1,username:"",password:"",errors:Array.from(Z.Mq.oautherrors)}}async componentDidMount(){(window.sessionStorage.getItem("oauth")??E.Z.credentials?.type===f.P.OAuth)||"GITHUB"!==w.IK||await this.tryLoginDefault()}async tryLoginDefault(){if(this.props.loggedOut)return;(await b.Z.login(E.Z.default)).code===v.G.OK&&this.setState({redirectSetup:!0})}addError(e){this.setState((t=>{const n=Array.from(t.errors);return n.push(e),{errors:n}}))}render(){if(this.state.busy||E.Z.hasToken())return i.createElement(C.Z,{text:"loading.login"});if(!this.context.serverInfo)return i.createElement(C.Z,{text:"loading.serverinfo"});const e={[p.O4.GitHub]:i.createElement(a.G,{icon:s.zh,style:{width:"1.2em"}}),[p.O4.Discord]:i.createElement(a.G,{icon:o.om,style:{width:"1.2em"}}),[p.O4.TGForums]:i.createElement("img",{src:"https://tgstation.github.io/tgstation-server-webpanel/webpanel/5.0.0/c97e39e417e48a3282f9.svg",alt:"tglogo",style:{width:"1.2em"}}),[p.O4.Keycloak]:i.createElement("img",{src:"https://tgstation.github.io/tgstation-server-webpanel/webpanel/5.0.0/995a88a72fd6520c8505.png",alt:"keycloaklogo",style:{width:"1.2em"}}),[p.O4.InvisionCommunity]:i.createElement(a.G,{icon:r.n5f,style:{width:"1.2em"}})},t={GitHub:"#161b22",Discord:"#7289da",TGForums:void 0,Keycloak:void 0,InvisionCommunity:void 0};return i.createElement(c.Z,{className:"mx-auto",lg:5,md:8},this.state.errors.map(((e,t)=>{if(e)return i.createElement(I.ZP,{key:t,error:e,onClose:()=>this.setState((e=>{const n=Array.from(e.errors);return n[t]=void 0,{errors:n}}))})})),i.createElement(d.Z,{body:!0},i.createElement(d.Z.Title,null,i.createElement(m.Z,{id:"login.header"})),i.createElement(d.Z,{body:!0},i.createElement(d.Z.Title,null,i.createElement(m.Z,{id:"login.type.generic"})),i.createElement(u.Z,{validated:this.state.validated,onSubmit:this.submit},i.createElement(u.Z.Group,{controlId:"username"},i.createElement(u.Z.Label,null,i.createElement(m.Z,{id:"login.username"})),i.createElement(u.Z.Control,{type:"text",placeholder:"Enter username",onChange:e=>this.setState({username:e.target.value}),value:this.state.username,required:!0})),i.createElement(u.Z.Group,{controlId:"password"},i.createElement(u.Z.Label,null,i.createElement(m.Z,{id:"login.password"})),i.createElement(u.Z.Control,{type:"password",placeholder:"Password",onChange:e=>this.setState({password:e.target.value}),value:this.state.password,required:!0})),i.createElement(l.Z,{type:"submit",block:!0},i.createElement(m.Z,{id:"login.submit"})))),(this.context.serverInfo?.oAuthProviderInfos?.Discord||this.context.serverInfo?.oAuthProviderInfos?.GitHub||this.context.serverInfo?.oAuthProviderInfos?.Keycloak||this.context.serverInfo?.oAuthProviderInfos?.TGForums||this.context.serverInfo?.oAuthProviderInfos?.InvisionCommunity)&&i.createElement(i.Fragment,null,i.createElement("hr",null),i.createElement(d.Z,{body:!0},i.createElement(d.Z.Title,null,i.createElement(m.Z,{id:"login.type.oauth"})),Object.keys(this.context.serverInfo.oAuthProviderInfos??{}).map((n=>{const r=t[n];return i.createElement(l.Z,{key:n,block:!0,style:r?{background:r}:void 0,onClick:()=>this.startOAuth(n)},e[n],i.createElement("span",{className:"ml-1"},i.createElement(m.Z,{id:"login.oauth",values:{provider:n}})))}))))))}async startOAuth(e){if(!this.context.serverInfo)return void this.addError(new g.ZP(g.jK.APP_FAIL,{jsError:Error("serverInfo is null in startOAuth")}));const t=new Uint8Array(10);window.crypto.getRandomValues(t);const n=Array.from(t,(e=>e.toString(16).padStart(2,"0"))).join("");let r;const o=encodeURIComponent;switch(e){case p.O4.Discord:r=`https://discord.com/api/oauth2/authorize?response_type=code&client_id=${o(this.context.serverInfo.oAuthProviderInfos.Discord.clientId)}&scope=identify&state=${o(n)}&redirect_uri=${o(this.context.serverInfo.oAuthProviderInfos.Discord.redirectUri)}`;break;case p.O4.GitHub:r=`https://github.com/login/oauth/authorize?client_id=${o(this.context.serverInfo.oAuthProviderInfos.GitHub.clientId)}&redirect_uri=${o(this.context.serverInfo.oAuthProviderInfos.GitHub.redirectUri)}&state=${o(n)}&allow_signup=false`;break;case p.O4.Keycloak:r=`${this.context.serverInfo.oAuthProviderInfos.Keycloak.serverUrl}/protocol/openid-connect/auth?response_type=code&client_id=${o(this.context.serverInfo.oAuthProviderInfos.Keycloak.clientId)}&scope=openid&state=${o(n)}&redirect_uri=${o(this.context.serverInfo.oAuthProviderInfos.Keycloak.redirectUri)}`;break;case p.O4.TGForums:r=`https://tgstation13.org/phpBB/app.php/tgapi/oauth/auth?scope=user&client_id=${o(this.context.serverInfo.oAuthProviderInfos.TGForums.clientId)}&state=${o(n)}&redirect_uri=${o(this.context.serverInfo.oAuthProviderInfos.TGForums.redirectUri)}`;break;case p.O4.InvisionCommunity:r=`${this.context.serverInfo.oAuthProviderInfos.InvisionCommunity.serverUrl}/oauth/authorize/?response_type=code&client_id=${o(this.context.serverInfo.oAuthProviderInfos.InvisionCommunity.clientId)}&scope=profile&state=${o(n)}&redirect_uri=${o(this.context.serverInfo.oAuthProviderInfos.InvisionCommunity.redirectUri)}`}const s=JSON.parse(window.sessionStorage.getItem("oauth")??"{}");return s[n]={provider:e,url:this.props.location.pathname},window.sessionStorage.setItem("oauth",JSON.stringify(s)),window.location.href=r,new Promise((e=>e()))}async submit(e){e.preventDefault(),this.setState({busy:!0});const t=await b.Z.login({type:f.P.Password,userName:this.state.username,password:this.state.password});t.code==v.G.ERROR&&(this.setState({busy:!1}),this.addError(t.error))}}A.contextType=y.f;var x=(0,h.EN)(A)},44615:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});const r=n(67294).createContext(void 0)},86755:function(e,t,n){"use strict";n.d(t,{Gn:function(){return r},IK:function(){return s},UG:function(){return a},cV:function(){return i},q4:function(){return o}});const r="9.13.0",o="v5.0.0",s="GITHUB",a="/app/",i="/"},16143:function(e,t,n){"use strict";window.publicPath,console.log("Public path:",n.p);n(51340),n(75029),n(5547),n(74462),n(17689);var r=n(73935),o=n(57806),s=n(39521),a=n(93379),i=n.n(a),l=n(39087),c={insert:"head",singleton:!1},d=(i()(l.Z,c),l.Z.locals,n(67294)),u=n(88375),m=n(10682),h=n(44012),p=n(29558),f=n(73727),g="5.0.0",v=n(96846),b=n(53803),E=n(75631),y=n(16942),w=n(42522),Z=n(50452),I=n(58007),C={insert:"head",singleton:!1},A=(i()(I.Z,C),I.Z.locals,n(51436)),x=n(67814),k=n(24214),S=n(15293),j=n(43489),L=n(35005),N=n(75040),O=n(13361),P=n(95602),$=n(5977),U=n(81249),G=n(22480),R=n(48509),T=n(44615),_=n(16964),D=n(70601),B=n(1320);function F(){return F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(this,arguments)}class M extends d.Component{constructor(e){super(e),this.logoutClick=this.logoutClick.bind(this),this.loginSuccess=this.loginSuccess.bind(this),this.logout=this.logout.bind(this),this.refresh=this.refresh.bind(this),this.state={routes:[],categories:B.Nz,updateAvailable:!1}}loginSuccess(){this.checkShowServerUpdateIcon()}async checkShowServerUpdateIcon(){await E.Z.wait4Init();const e=await y.Z.getCurrentUser();if(e.code===b.G.ERROR)return;const t=e.payload,n=(0,_.Zg)(t);if((0,_.N3)(n,R.oj.ChangeVersion)){const e=await G.Z.getAdminInfo();if(e.code==b.G.OK){const t=new U.SemVer(e.payload.latestVersion),n=new U.SemVer(this.context.serverInfo.version),r=1===t.compare(n);this.setState({updateAvailable:r})}}}logout(){this.setState({updateAvailable:!1})}refresh(e){this.setState({routes:e})}async componentDidMount(){Z.Z.on("loginSuccess",this.loginSuccess),E.Z.on("logout",this.logout),this.setState({routes:await D.Z.getRoutes()}),D.Z.on("refresh",this.refresh)}componentWillUnmount(){Z.Z.removeListener("loginSuccess",this.loginSuccess),E.Z.removeListener("logout",this.logout),D.Z.removeListener("refresh",this.refresh)}render(){return d.createElement(d.Fragment,null,d.createElement(P.Z,{className:"shadow-lg",expand:this.props.loggedIn?"lg":void 0,collapseOnSelect:!0,variant:"dark",bg:"primary"},d.createElement(P.Z.Brand,{onClick:()=>{this.props.history.push(B.$w.home.link??B.$w.home.route,{reload:!0})},className:"mr-auto"},this.renderVersion()),d.createElement(P.Z.Toggle,{className:"mr-2","aria-controls":"responsive-navbar-nav"}),d.createElement(P.Z.Collapse,{className:"text-right mr-2",style:{minWidth:"0px"}},d.createElement(O.Z,null,this.props.loggedIn?Object.values(this.state.categories).map((e=>{if(e.leader.cachedAuth)return 1==e.routes.length?d.createElement(O.Z.Item,{key:e.name},d.createElement(O.Z.Link,{onClick:()=>{this.props.history.push(e.leader.link??e.leader.route,{reload:!0})},active:(0,_.JW)(this.props.location.pathname,e.leader.route,!e.leader.navbarLoose)},d.createElement(h.Z,{id:e.leader.name}))):d.createElement(O.Z.Item,{key:e.name},d.createElement(k.Z,{id:e.name+"-dropdown",title:d.createElement(h.Z,{id:e.leader.name})},Object.values(e.routes).filter((e=>e.cachedAuth)).length>=2?d.createElement(d.Fragment,null,d.createElement(k.Z.Item,{onClick:()=>{this.props.history.push(e.leader.link??e.leader.route,{reload:!0})},active:(0,_.JW)(this.props.location.pathname,e.leader.route,!0)},d.createElement(h.Z,{id:e.leader.name})),e.routes.map((e=>{if(!e.catleader&&e.cachedAuth&&e.visibleNavbar)return d.createElement(k.Z.Item,{key:e.name,onClick:()=>{this.props.history.push(e.link??e.route,{reload:!0})},active:(0,_.JW)(this.props.location.pathname,e.route,!e.navbarLoose)},d.createElement(h.Z,{id:e.name}))}))):""))})):d.createElement(O.Z.Item,null,d.createElement(O.Z.Link,{onClick:()=>{this.props.history.push(B.$w.home.link??B.$w.home.route,{reload:!0})},active:!0},d.createElement(h.Z,{id:"routes.login"})))),this.state.updateAvailable?d.createElement(S.Z,{placement:"right",overlay:e=>d.createElement(j.Z,F({id:"tgs-updated-tooltip"},e),d.createElement(h.Z,{id:"navbar.update"}))},d.createElement("h3",null,d.createElement(x.G,{className:"tgs-update-notification",onClick:()=>this.props.history.push(B.$w.admin_update.link??B.$w.admin_update.route,{reload:!0}),icon:A.RLE}))):d.createElement(d.Fragment,null),this.renderUser())))}renderVersion(){return this.context.serverInfo?.version?d.createElement(d.Fragment,null,d.createElement(h.Z,{id:"generic.appname"})," v",this.context.serverInfo.version):d.createElement(h.Z,{id:"loading.loading"})}renderUser(){return this.props.loggedIn?d.createElement(O.Z.Item,{className:"ml-auto"},d.createElement(N.Z,null,d.createElement(N.Z.Toggle,{id:"user-dropdown",type:"button",variant:"primary","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.context.user?this.context.user.name:d.createElement(h.Z,{id:"loading.loading"})),d.createElement(N.Z.Menu,{alignRight:!0,className:"text-right"},d.createElement(N.Z.Item,{onClick:()=>{this.props.history.push(B.$w.info.link??B.$w.info.route,{reload:!0})}},d.createElement(h.Z,{id:"routes.info"})),d.createElement(N.Z.Item,{onClick:()=>{this.props.history.push(B.$w.config.link??B.$w.config.route,{reload:!0})}},d.createElement(h.Z,{id:"routes.config"})),B.$w.passwd.cachedAuth?d.createElement(N.Z.Item,{onClick:()=>{this.props.history.push(B.$w.passwd.link??B.$w.passwd.route,{reload:!0})}},d.createElement(h.Z,{id:"routes.passwd"})):"",d.createElement(N.Z.Item,{onClick:()=>{E.Z.emit("purgeCache"),this.props.history.replace(this.props.location.pathname,{reload:!0})}},d.createElement(h.Z,{id:"navbar.purgecache"})),d.createElement(N.Z.Item,{onClick:()=>{this.props.history.replace(this.props.location.pathname,{reload:!0})}},d.createElement(h.Z,{id:"navbar.refresh"})),d.createElement(N.Z.Item,{onClick:this.logoutClick},d.createElement(h.Z,{id:"navbar.logout"}))))):d.createElement(d.Fragment,null,d.createElement(L.Z,{onClick:()=>{this.props.history.push(B.$w.config.link??B.$w.config.route,{reload:!0})},variant:"primary"},d.createElement(x.G,{icon:"cogs"})),d.createElement(L.Z,{onClick:()=>{this.props.history.push(B.$w.info.link??B.$w.info.route,{reload:!0})},variant:"primary"},d.createElement(x.G,{icon:"info-circle"})))}logoutClick(){E.Z.logout()}}M.contextType=T.f;var z=(0,$.EN)(M);function K(){return K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}class H extends d.Component{render(){let e=4;return d.createElement(S.Z,{placement:"left",onToggle:t=>{t&&(e=Math.round(100*Math.random())%26)},overlay:t=>d.createElement(j.Z,K({id:"report-issue-tooltip"},t),d.createElement(h.Z,{id:`view.meme_${e}`}))},d.createElement("img",{className:"nowrap corner-logo",width:50,height:50,src:"https://tgstation.github.io/tgstation-server-webpanel/webpanel/5.0.0/b5616c99bf2052a6bbd7.svg"}))}}function W(){return W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}class J extends d.Component{render(){return d.createElement(S.Z,{placement:"top",overlay:e=>d.createElement(j.Z,W({id:"report-issue-tooltip"},e),d.createElement(h.Z,{id:"view.report"}))},d.createElement(L.Z,{className:"nowrap report-issue",onClick:()=>window.open("https://github.com/tgstation/tgstation-server-webpanel/issues/new")},d.createElement(x.G,{icon:A.eHv})))}}var V=n(3e3),q=n(15881),Y=n(86755);class X extends d.Component{constructor(e){super(e),this.state={}}componentDidUpdate(e){this.props.location.key!==e.location.key&&this.setState({error:void 0,errorInfo:void 0})}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.error?d.createElement(m.Z,{className:"mt-5 mb-5"},d.createElement(q.Z,{className:"bg-transparent",border:"danger"},d.createElement(q.Z.Header,{className:"bg-danger"},d.createElement(h.Z,{id:"error.somethingwentwrong"})),d.createElement(q.Z.Body,null,d.createElement(q.Z.Title,null,this.state.error.name,": ",this.state.error.message),d.createElement(q.Z.Text,{as:"pre",className:"bg-transparent text-danger"},d.createElement("code",null,`Webpanel Version: ${Y.q4}\nWebpanel Mode: ${Y.IK}\nStack trace: ${this.state.errorInfo?.componentStack??"Unable to get stack info"}`))))):this.props.children}}var Q=(0,$.EN)(X),ee=n(20271),te=n(35855),ne=n(40684),re=n(11895),oe=n(97888);class se extends d.Component{constructor(e){super(e),this.state={clear:!1}}componentDidUpdate(e){this.state.clear?this.setState({clear:!1}):e.match.path==this.props.match.path&&e.location.key!=this.props.location.key&&this.props.location.state?.reload&&this.setState({clear:!0})}render(){return this.state.clear?"":this.props.children}}var ae=(0,$.EN)(se),ie=n(9310);const le=e=>d.createElement(te.Z,{text:"loading.page"},d.createElement(h.Z,{id:e})),ce=(0,ne.ZP)((()=>n.e(370).then(n.bind(n,56370))),{fallback:le("loading.page.notfound")});class de extends d.Component{constructor(e){super(e),this.refreshListener=this.refreshListener.bind(this);const t=new Map;D.Z.getImmediateRoutes(!1).forEach((e=>{t.set(e.name,(0,ne.ZP)((()=>n(66235)(`./${e.file}`)),{fallback:le(e.name)}))})),this.state={loading:!!new URLSearchParams(window.location.search).get("state"),routes:D.Z.getImmediateRoutes(!1),components:t}}refreshListener(e){this.setState({routes:e})}async componentDidMount(){D.Z.on("refreshAll",this.refreshListener),this.props.history.listen((e=>{this.listener(e.pathname)})),this.listener(this.props.location.pathname);const e=new URLSearchParams(window.location.search),t=e.get("state");if(!t)return void this.setState({loading:!1});window.history.replaceState(null,document.title,window.location.pathname);const n=JSON.parse(window.sessionStorage.getItem("oauth")??"{}")[t];if(!n)return this.setErrorAndEnd(new v.ZP(v.jK.LOGIN_BAD_OAUTH,{jsError:Error(`State(${t}) cannot be resolved to a provider.`)}));const r=e.get("code");if(!r)return this.setErrorAndEnd(new v.ZP(v.jK.LOGIN_BAD_OAUTH,{jsError:Error("Code not found.")}));this.props.history.replace(n.url);const o=await E.Z.login({type:re.P.OAuth,provider:n.provider,token:r});if(window.sessionStorage.removeItem("oauth"),o.code!==b.G.OK)return this.setErrorAndEnd(o.error);this.setState({loading:!1})}componentWillUnmount(){D.Z.removeListener("refreshAll",this.refreshListener)}setErrorAndEnd(e){B.Mq.oautherrors=[e],this.setState({loading:!1})}listener(e){const t=D.Z.getImmediateRoutes(!1);for(const n of t)if(n.category&&n.navbarLoose&&(0,_.JW)(e,n.route)){this.props.selectCategory(n.category);break}}render(){return this.state.loading?d.createElement(te.Z,{text:"loading.app"}):d.createElement(Q,null,d.createElement(ae,null,d.createElement("div",null,d.createElement($.rs,null,this.state.routes.map((e=>{if(e.loginless||this.props.loggedIn)return d.createElement($.AW,{exact:!e.loose,path:e.route,key:e.name,render:t=>{let n;return n=e.cachedAuth?this.state.components.get(e.name):oe.Z,this.context?.user||e.loginless?this.context?.serverInfo||e==B.$w.config?e.noContainer?d.createElement(d.Fragment,null,d.createElement(n,t)):d.createElement(m.Z,{className:"mt-5 mb-5"},d.createElement(n,t)):d.createElement(m.Z,null,d.createElement(V.ZP,{error:new v.ZP(v.jK.APP_FAIL,{jsError:Error("Router has no server info in the general context")})})):d.createElement(m.Z,null,d.createElement(V.ZP,{error:new v.ZP(v.jK.APP_FAIL,{jsError:Error("Router has no user in the general context")})}))}})})),d.createElement(m.Z,{className:"mt-5 mb-5"},d.createElement($.AW,{key:"notfound"},this.props.loggedIn?d.createElement(ce,null):d.createElement(ie.default,{loggedOut:this.props.loggedOut})))))))}}de.contextType=T.f;var ue=(0,$.EN)(de);class me{}me.en="en";var he=me;class pe{constructor(e,t){this.locale=e,this.messages=t}}class fe{static getShortHandedLocale(e){return e.split("-")[0]}async loadTranslation(e){const t=await n(862)(`./${e}.json`);if(!t){let t=fe.getShortHandedLocale(e);if(t===e){if(t===fe.fallbackLocale)throw new Error("Invalid locale: "+e);t=fe.fallbackLocale}return await this.loadTranslation(t)}let r=null;try{r=new pe(e,t)}catch(t){throw Error(`Error loading localization for locale '${e}': ${JSON.stringify(t)}`)}return r}}fe.fallbackLocale=he.en;var ge=fe;class ve extends d.Component{constructor(e){super(e),this.state={}}componentDidMount(){document.title="TGS Webpanel v"+g,document.addEventListener("keydown",(e=>{"L"===e.key&&e.ctrlKey&&e.shiftKey&&(E.Z.logout(),E.Z.login(w.Z.default))}))}render(){return d.createElement(f.VK,{basename:window.publicPath?new URL(window.publicPath,window.location.href).pathname:Y.UG},d.createElement(Q,null,d.createElement(z,{category:this.state.passdownCat,loggedIn:this.props.loggedIn}),this.props.loading?d.createElement(m.Z,{className:"mt-5 mb-5"},d.createElement(te.Z,{text:"loading.app"})):d.createElement(d.Fragment,null,d.createElement(m.Z,{className:"mt-5"},d.createElement(u.Z,{variant:"warning",className:"d-block d-lg-none"},d.createElement(u.Z.Heading,null,d.createElement(h.Z,{id:"warning.screensize.header"})),d.createElement("hr",null),d.createElement(h.Z,{id:"warning.screensize"})),Array.from(this.context.errors.values()).map(((e,t)=>d.createElement(V.ZP,{error:e,key:t,onClose:()=>this.context.deleteError(e)})))),d.createElement(ue,{loggedIn:this.props.loggedIn,loggedOut:this.props.loggedOut,selectCategory:e=>{this.setState({passdownCat:{name:e,key:Math.random().toString()}})}})),this.props.loggedIn?d.createElement(ee.Z,null):null),d.createElement(J,null),d.createElement(H,null))}}ve.contextType=T.f;class be extends d.Component{constructor(e){super(e),this.translationFactory=void 0,this.finishLogin=this.finishLogin.bind(this),this.finishLogout=this.finishLogout.bind(this),this.updateContextUser=this.updateContextUser.bind(this),this.updateContextServer=this.updateContextServer.bind(this),this.deleteGeneralContextError=this.deleteGeneralContextError.bind(this),this.translationFactory=this.props.translationFactory??new ge,this.state={loggedIn:!1,loggedOut:!1,loading:!0,GeneralContextInfo:{errors:new Set,user:null,serverInfo:null,deleteError:this.deleteGeneralContextError}}}async updateContextUser(){const e=await y.Z.getCurrentUser();e.code===b.G.OK?this.setState((t=>({GeneralContextInfo:{errors:t.GeneralContextInfo.errors,user:e.payload,serverInfo:t.GeneralContextInfo.serverInfo,deleteError:t.GeneralContextInfo.deleteError}}))):e.error.code===v.jK.HTTP_ACCESS_DENIED?this.setState((e=>({GeneralContextInfo:{user:null,serverInfo:e.GeneralContextInfo.serverInfo,deleteError:e.GeneralContextInfo.deleteError,errors:e.GeneralContextInfo.errors}}))):(setTimeout((()=>{this.updateContextUser()}),5e3),this.setState((t=>{const n=new Set(t.GeneralContextInfo.errors);return n.add(e.error),{GeneralContextInfo:{errors:n,deleteError:t.GeneralContextInfo.deleteError,user:null,serverInfo:t.GeneralContextInfo.serverInfo}}})))}async updateContextServer(e){const t=await E.Z.getServerInfo();t.code===b.G.OK?this.setState((n=>{const r=new Set(n.GeneralContextInfo.errors);return e&&r.delete(e),{GeneralContextInfo:{errors:r,user:n.GeneralContextInfo.user,serverInfo:t.payload,deleteError:n.GeneralContextInfo.deleteError}}})):(setTimeout((()=>{this.updateContextServer(t.error)}),5e3),this.setState((n=>{const r=new Set(n.GeneralContextInfo.errors);return r.add(t.error),e&&r.delete(e),{GeneralContextInfo:{errors:r,deleteError:n.GeneralContextInfo.deleteError,user:n.GeneralContextInfo.user,serverInfo:null}}})))}deleteGeneralContextError(e){this.setState((t=>{const n=new Set(t.GeneralContextInfo.errors);return n.delete(e),{GeneralContextInfo:{deleteError:t.GeneralContextInfo.deleteError,user:t.GeneralContextInfo.user,serverInfo:t.GeneralContextInfo.serverInfo,errors:n}}}))}finishLogin(){console.log("Logging in"),this.updateContextUser().then((()=>this.setState({loggedIn:!0,loading:!1})))}finishLogout(){this.setState({loggedIn:!1,loggedOut:!0}),this.updateContextUser()}async componentDidMount(){Z.Z.on("loginSuccess",this.finishLogin),E.Z.on("logout",this.finishLogout),E.Z.on("purgeCache",this.updateContextServer),E.Z.on("purgeCache",this.updateContextUser),await this.loadTranslation();const e=await E.Z.initApi();await this.updateContextServer(),e&&await this.updateContextUser(),this.setState({loading:!1,loggedIn:e})}componentWillUnmount(){Z.Z.removeListener("loginSuccess",this.finishLogin),E.Z.removeListener("logout",this.finishLogout),E.Z.removeListener("purgeCache",this.updateContextServer),E.Z.removeListener("purgeCache",this.updateContextUser)}render(){return this.state.translationError?d.createElement("p",{className:"App-error"},this.state.translationError):this.state.translation?d.createElement(p.Z,{locale:this.state.translation.locale,messages:this.state.translation.messages,defaultLocale:"en"},d.createElement(T.f.Provider,{value:this.state.GeneralContextInfo},d.createElement(ve,{loading:this.state.loading,loggedIn:this.state.loggedIn,loggedOut:this.state.loggedOut}))):d.createElement(te.Z,null,"Loading translations...")}async loadTranslation(){console.time("LoadTranslations");try{const e=await this.translationFactory.loadTranslation(this.props.locale);this.setState({translation:e})}catch(e){return void this.setState({translationError:JSON.stringify(e)??"An unknown error occurred"})}console.timeEnd("LoadTranslations")}}const Ee=d.createElement(d.StrictMode,null,d.createElement(be,{locale:he.en}));var ye=n(78947),we=n(51417),Ze=n(66370),Ie=n(83183),Ce=n(68055),Ae=n(24075),xe=n(47810),ke=n(57026),Se=n(20702),je=n(8792),Le=n(9752),Ne=n(19500),Oe=n(51257),Pe=n(16688),$e=n(68099),Ue=n(82414),Ge=n(84176),Re=n(62679),Te=n(609),_e=n(7371),De=n(40098),Be=n(16995),Fe=n(95337),Me=n(59986),ze=n(5702),Ke=n(91883),He=n(59545),We=n(55554),Je=n(42619),Ve=n(40864),qe=n(27879),Ye=n(46357),Xe=n(27593);ye.vI.add(Ce.LE,He.NB,Se.RL,qe.IL,Xe.wO,Oe.vc,Ke.UO,De.r8,Be.Ps,Pe.J9,We.Cg,xe.Kb,Ve.X7,$e.YH,Le._3,Ie.yO,Ge.DD,_e.Iw,we.zhw,we.omb,Je.$,Ue.sq,Ze.Pd,Ne.ne,Re.gf,ke.lX,je.cC,Ye.FV,Ae.mh,Fe.wn,Me.xf,ze.aC,Te.by,A.Kl4,A.tAh,Te.by,A.I4f,A.eW2,A.Mzg,A.olY,A.x58,A.Jvx,A.gMD,A.cwv,A.eHv,A.Yjj,A.acZ,Ie.yO,A.cf$),o.Z.loadconfig(),s.Z.init(),window.loadedChannelFromWebpack&&"DEV"!==Y.IK&&alert("Warning: channel.json was served from bundled files instead of TGS, the webpanel is running from the local version instead of the github update repo.\nPlease report this to your server host.\nIf you are the server host, please report this to alexkar598#2712 on discord\n\nWebpanel version: "+Y.q4);try{window.localStorage.removeItem("username"),window.sessionStorage.removeItem("username"),window.localStorage.removeItem("password"),window.sessionStorage.removeItem("password")}catch{}function Qe(){r.render(Ee,document.getElementById("root"))}window.addEventListener("DOMContentLoaded",Qe),"interactive"!==document.readyState&&"complete"!==document.readyState||Qe()},70601:function(e,t,n){"use strict";var r=n(12527),o=n(50452),s=n(1320);class a extends r.TypedEmitter{constructor(){super(),this.refreshing=!1,window.rtcontroller=this,this.refreshRoutes=this.refreshRoutes.bind(this),o.Z.addHook(this.refreshRoutes),this.refreshRoutes().catch(console.error),console.time("Category mapping");const e=new Map;for(const[t,n]of Object.entries(s.XT))n.routes=[],e.set(n.name,n),s.Nz[t]=n;for(const t of Object.values(s.$w)){if(!t.category)continue;const n=e.get(t.category);if(n){if(n.routes.push(t),t.catleader){if(n.leader){console.error("Category has two leaders",n.leader,t);continue}n.leader=t}}else console.error("Route has invalid category",t)}console.log("Categories mapped",e),console.timeEnd("Category mapping")}async refreshRoutes(){if(this.refreshing)return void console.log("Already refreshing");this.refreshing=!0;const e=[],t=this.getImmediateRoutes(!1);for(const n of t)n.cachedAuth=void 0,n.isAuthorized?e.push(n.isAuthorized().then((e=>{n.cachedAuth=e}))):n.cachedAuth=!0;await Promise.all(e),this.emit("refresh",this.getImmediateRoutes(!0));const n=this.getImmediateRoutes(!1);return this.emit("refreshAll",n),this.refreshing=!1,console.log("Routes refreshed",n),await this.getRoutes()}wait4refresh(){return new Promise((e=>{this.refreshing?this.on("refresh",(()=>{e()})):e()}))}async getRoutes(e=!0){return await this.wait4refresh(),this.getImmediateRoutes(e)}getImmediateRoutes(e=!0){const t=[];for(const n of Object.values(s.$w))n.isAuthorized&&!n.cachedAuth&&e||t.push(n);return t}}t.Z=new a},16964:function(e,t,n){"use strict";n.d(t,{$A:function(){return p},$V:function(){return m},D0:function(){return d},H5:function(){return v},JW:function(){return a},JY:function(){return f},Kp:function(){return g},LR:function(){return o},N3:function(){return c},Zg:function(){return i},ko:function(){return s},mg:function(){return h},n5:function(){return u}});var r=n(51068);function o(e,t){const n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function s(e,t,n,r){return e.replace(new RegExp(t.replace(/([/,!\\^${}[\]().*+?|<>\-&])/g,"\\$&"),r?"gi":"g"),n.replace(/\$/g,"$$$$"))}function a(e,t,n=!1){return"/"===e.slice(-1)&&(e=e.slice(0,-1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),(0,r.Bo)(t,void 0,{end:n}).test(e)}function i(e){return e.permissionSet??e.group?.permissionSet}function l(e,t){return!!(t&e)}function c(e,t){return l(e.administrationRights,t)}function d(e,t){return l(e.instanceManagerRights,t)}function u(e,t){return l(e.byondRights,t)}function m(e,t){return l(e.chatBotRights,t)}function h(e,t){return l(e.dreamDaemonRights,t)}function p(e,t){return l(e.dreamMakerRights,t)}function f(e,t){return l(e.instancePermissionSetRights,t)}function g(e,t){return l(e.repositoryRights,t)}function v(e,t){return l(e.configurationRights,t)}},1320:function(e,t,n){"use strict";n.d(t,{$w:function(){return d},Mq:function(){return h},Nz:function(){return m},XT:function(){return u}});var r=n(48509),o=n(53803),s=n(16942),a=n(42522),i=n(16964);function l(e){return async()=>{if(!a.Z.hasToken())return!1;const t=await s.Z.getCurrentUser();return t.code==o.G.OK&&!!((0,i.Zg)(t.payload).administrationRights&e)}}function c(e){return async()=>{if(!a.Z.hasToken())return!1;const t=await s.Z.getCurrentUser();return t.code==o.G.OK&&!!((0,i.Zg)(t.payload).instanceManagerRights&e)}}const d={home:{name:"routes.home",route:"/",file:"Home",loose:!1,navbarLoose:!1,visibleNavbar:!0,homeIcon:void 0,category:"home",catleader:!0},instancecreate:{name:"routes.instancecreate",route:"/instances/create",file:"Instance/Create",loose:!1,navbarLoose:!1,isAuthorized:c(r.c2.Create),visibleNavbar:!1,category:"instance",catleader:!1},instancelist:{name:"routes.instancelist",route:"/instances/",file:"Instance/List",loose:!1,navbarLoose:!0,isAuthorized:c(r.c2.List|r.c2.Read),visibleNavbar:!0,homeIcon:"hdd",category:"instance",catleader:!0},instanceedit:{name:"routes.instanceedit",route:"/instances/edit/:id(\\d+)/:tab?/",file:"Instance/InstanceEdit",get link(){return void 0!==h.selectedinstanceid?`/instances/edit/${h.selectedinstanceid}/${void 0!==h.selectedinstanceedittab?`${h.selectedinstanceedittab}/`:""}`:d.instancelist.link??d.instancelist.route},loose:!1,navbarLoose:!0,visibleNavbar:!0,homeIcon:void 0,category:"instance"},instancejobs:{name:"routes.instancejobs",route:"/instances/jobs/",file:"Instance/Jobs",loose:!1,navbarLoose:!0,visibleNavbar:!0,homeIcon:void 0,category:"instance"},userlist:{name:"routes.usermanager",route:"/users/",file:"User/List",loose:!1,navbarLoose:!0,visibleNavbar:!0,homeIcon:"user",category:"user",catleader:!0},useredit:{name:"routes.useredit",route:"/users/edit/user/:id(\\d+)/:tab?/",get link(){return void 0!==h.selecteduserid?`/users/edit/user/${h.selecteduserid}/${void 0!==h.selectedusertab?`${h.selectedusertab}/`:""}`:d.userlist.link??d.userlist.route},file:"User/Edit",loose:!0,navbarLoose:!0,visibleNavbar:!0,homeIcon:void 0,category:"user"},usercreate:{name:"routes.usercreate",route:"/users/create/",link:"/users/create/",file:"User/Create",loose:!0,navbarLoose:!0,isAuthorized:l(r.oj.WriteUsers),visibleNavbar:!0,homeIcon:void 0,category:"user"},admin:{name:"routes.admin",route:"/admin/",file:"Administration",loose:!1,navbarLoose:!0,isAuthorized:l(r.oj.ChangeVersion|r.oj.DownloadLogs|r.oj.UploadVersion),visibleNavbar:!0,homeIcon:"tools",category:"admin",catleader:!0},admin_update:{name:"routes.admin.update",route:"/admin/update/:all?/",file:"Admin/Update",link:"/admin/update/",loose:!0,navbarLoose:!0,isAuthorized:l(r.oj.ChangeVersion|r.oj.UploadVersion),visibleNavbar:!0,homeIcon:void 0,category:"admin"},admin_logs:{name:"routes.admin.logs",route:"/admin/logs/:name?/",link:"/admin/logs/",file:"Admin/Logs",loose:!1,navbarLoose:!0,isAuthorized:l(r.oj.DownloadLogs),visibleNavbar:!0,homeIcon:void 0,category:"admin",noContainer:!0},passwd:{name:"routes.passwd",route:"/users/passwd/:id(\\d+)?/",link:"/users/passwd/",file:"ChangePassword",loose:!0,navbarLoose:!0,isAuthorized:l(r.oj.EditOwnPassword),visibleNavbar:!1,homeIcon:"key"},config:{name:"routes.config",route:"/config/",file:"Configuration",loose:!0,navbarLoose:!0,loginless:!0,visibleNavbar:!1,homeIcon:"cogs"},setup:{name:"routes.setup",route:"/setup/",file:"Setup",loose:!0,navbarLoose:!0,loginless:!0,visibleNavbar:!1},oAuth:{name:"routes.oauth",route:"/oauth/:provider?/",file:"Login",loose:!0,navbarLoose:!1,loginless:!0,visibleNavbar:!1},info:{name:"routes.info",route:"/info",file:"Info",loose:!1,navbarLoose:!1,loginless:!0,visibleNavbar:!0,homeIcon:"info-circle",category:void 0,catleader:!1}},u={home:{name:"home"},instance:{name:"instance"},user:{name:"user"},admin:{name:"admin"}},m={},h={selecteduserid:void 0,selectedusertab:void 0,selectedinstanceid:void 0,selectedinstanceedittab:void 0,instancelistpage:void 0,loglistpage:void 0,byondlistpage:void 0,userlistpage:void 0,jobhistorypage:new Map,oautherrors:[]}},39087:function(e,t,n){"use strict";var r=n(94015),o=n.n(r),s=n(23645),a=n.n(s),i=n(61667),l=n.n(i),c=n(31100),d=a()(o()),u=l()(c);d.push([e.id,".App {\n    background-size: 50%;\n    background: #1e1e1e url("+u+") no-repeat center;\n    position: absolute;\n    width: 100%;\n    top: 0;\n    bottom: 0;\n    display: grid;\n}\n\n.App-error {\n    color: red;\n    font-size: 150%;\n    margin: auto;\n}\n\n.App-main {\n    display: grid;\n}\n\n.Root {\n    overflow: hidden;\n    display: grid;\n    grid-template-rows: 9% auto;\n}\n\n.Root-login {\n    display: grid;\n}\n","",{version:3,sources:["webpack://./src/App.css"],names:[],mappings:"AAAA;IACI,oBAAoB;IACpB,4EAAkD;IAClD,kBAAkB;IAClB,WAAW;IACX,MAAM;IACN,SAAS;IACT,aAAa;AACjB;;AAEA;IACI,UAAU;IACV,eAAe;IACf,YAAY;AAChB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,gBAAgB;IAChB,aAAa;IACb,2BAA2B;AAC/B;;AAEA;IACI,aAAa;AACjB",sourcesContent:[".App {\n    background-size: 50%;\n    background: #1e1e1e url(logo.svg) no-repeat center;\n    position: absolute;\n    width: 100%;\n    top: 0;\n    bottom: 0;\n    display: grid;\n}\n\n.App-error {\n    color: red;\n    font-size: 150%;\n    margin: auto;\n}\n\n.App-main {\n    display: grid;\n}\n\n.Root {\n    overflow: hidden;\n    display: grid;\n    grid-template-rows: 9% auto;\n}\n\n.Root-login {\n    display: grid;\n}\n"],sourceRoot:""}]),t.Z=d},58007:function(e,t,n){"use strict";var r=n(94015),o=n.n(r),s=n(23645),a=n.n(s)()(o());a.push([e.id,".tgs-update-notification {\n    color: #66ff07;\n}\n","",{version:3,sources:["webpack://./src/components/AppNavbar.css"],names:[],mappings:"AAAA;IACI,cAAc;AAClB",sourcesContent:[".tgs-update-notification {\n    color: #66ff07;\n}\n"],sourceRoot:""}]),t.Z=a},66235:function(e,t,n){var r={"./Admin/Logs":[43408,171,408],"./Admin/Logs.tsx":[43408,171,408],"./Admin/Update":[80732,171,578,6,724,732],"./Admin/Update.tsx":[80732,171,578,6,724,732],"./Administration":[29363,171,363],"./Administration.tsx":[29363,171,363],"./ChangePassword":[61304,799],"./ChangePassword.tsx":[61304,799],"./Configuration":[67671,671],"./Configuration.tsx":[67671,671],"./Home":[59638,638],"./Home.tsx":[59638,638],"./Info":[41051,171,51],"./Info.tsx":[41051,171,51],"./Instance/Create":[38747,856,637,756,222,611,578,6,747],"./Instance/Create.tsx":[38747,856,637,756,222,611,578,6,747],"./Instance/Edit/Byond":[161,222,171,161],"./Instance/Edit/Byond.tsx":[161,222,171,161],"./Instance/Edit/ChatBots":[90740,767,171,740,318],"./Instance/Edit/ChatBots.tsx":[90740,767,171,740,318],"./Instance/Edit/Config":[62685,171,685],"./Instance/Edit/Config.tsx":[62685,171,685],"./Instance/Edit/Deployment":[44298,856,171,67,728],"./Instance/Edit/Deployment.tsx":[44298,856,171,67,728],"./Instance/Edit/Files":[20926,637,171,926,608],"./Instance/Edit/Files.tsx":[20926,637,171,926,608],"./Instance/Edit/InstancePermissions":[87345,803,171,345,246],"./Instance/Edit/InstancePermissions.tsx":[87345,803,171,345,246],"./Instance/Edit/JobHistory":[25921,171,921],"./Instance/Edit/JobHistory.tsx":[25921,171,921],"./Instance/Edit/Repository":[18264,856,611,171,578,757,264,939],"./Instance/Edit/Repository.tsx":[18264,856,611,171,578,757,264,939],"./Instance/Edit/Server":[86046,756,171,67,888],"./Instance/Edit/Server.tsx":[86046,756,171,67,888],"./Instance/InstanceEdit":[9182,856,637,756,222,611,803,767,171,578,757,165,67,264,740,926,345,182],"./Instance/InstanceEdit.tsx":[9182,856,637,756,222,611,803,767,171,578,757,165,67,264,740,926,345,182],"./Instance/Jobs":[41818,818],"./Instance/Jobs.tsx":[41818,818],"./Instance/List":[70670,171,670],"./Instance/List.tsx":[70670,171,670],"./Login":[9310],"./Login.tsx":[9310],"./Setup":[12757,666],"./Setup.tsx":[12757,666],"./User/Create":[14898,898],"./User/Create.tsx":[14898,898],"./User/Edit":[11404,803,171,404],"./User/Edit.tsx":[11404,803,171,404],"./User/List":[8746,171,746],"./User/List.tsx":[8746,171,746]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(o)}))}o.keys=function(){return Object.keys(r)},o.id=66235,e.exports=o},862:function(e,t,n){var r={"./en.json":[2422,422]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((function(){return n.t(o,19)}))}o.keys=function(){return Object.keys(r)},o.id=862,e.exports=o},31100:function(e){"use strict";e.exports="https://tgstation.github.io/tgstation-server-webpanel/webpanel/5.0.0/835dd74f1c08a7f91a60.svg"}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,exports:{}};return s[e].call(n.exports,n,n.exports,i),n.exports}i.m=s,e=[],i.O=function(t,n,r,o){if(!n){var s=1/0;for(d=0;d<e.length;d++){n=e[d][0],r=e[d][1],o=e[d][2];for(var a=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(i.O).every((function(e){return i.O[e](n[l])}))?n.splice(l--,1):(a=!1,o<s&&(s=o));if(a){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,r,o]},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},i.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);i.r(o);var s={};t=t||[null,n({}),n([]),n(n)];for(var a=2&r&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((function(t){s[t]=function(){return e[t]}}));return s.default=function(){return e},i.d(o,s),o},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=function(e){return Promise.all(Object.keys(i.f).reduce((function(t,n){return i.f[n](e,t),t}),[]))},i.u=function(e){return e+"."+{6:"8be2a144a2793570315b",51:"018c826056e10797488e",67:"776b5f2abb806ce10993",161:"ab09f7d17d892ba92e06",165:"83aceceda9faac4141ed",171:"91936e72280a3d6afb03",182:"dc6cd8f3e9281acb4c11",222:"2aa09f16b56d89e99464",246:"67f9678139a3c824ae5c",264:"161a9ee3416ad72c9403",318:"f7c2971a21734b69a536",345:"e7062e2ed1619ef1adf0",363:"d935e8c7446b49ba6955",370:"d23700bdb9e4969823c6",404:"a8f6c9632768de417c6c",408:"0e4aca31d27d30a2f685",422:"c460d32e725371edc5d5",578:"b30e90acaefb17f3a915",608:"6252a0603da3d74cae0a",611:"33a83d6f8d6e5e7106d5",637:"2b080f8172b6b11177e2",638:"22ae8c317d679c0fbe03",666:"466319a2ec0bfe75619b",670:"7b7a4a33d26e578bc786",671:"d70d3c2a0ea3e94cdaa3",685:"05a35d77240f72f33bba",724:"37608abcbb4a745b53ee",728:"4d6737ca375f84d37264",732:"e613b2ada94558356b83",740:"c559d8d792a698970b20",746:"5983420c189f6ed04888",747:"8385480deaf7cc86f2f3",756:"ba4ca87cdecab723f468",757:"cd59822a9cafc5472de2",767:"d2c6f01da5211c691ead",799:"5f592f7ea70157f79ee3",803:"45e855907c48cbabbe28",818:"de10c00448eedd21537d",856:"f4edc5004435bc1dd80d",888:"3a161e7de4f37b8b0f18",898:"506fa6125431a4f5701d",921:"baf221e2055ca419708e",926:"8cd1d13a0645267c8bd9",939:"bd524ab673fe7929837a"}[e]+".bundle.js"},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r={},o="tgstation-server-control-panel:",i.l=function(e,t,n,s){if(r[e])r[e].push(t);else{var a,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==o+n){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=15,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",o+n),a.src=e),r[e]=[t];var m=function(t,n){a.onerror=a.onload=null,clearTimeout(h);var o=r[e];if(delete r[e],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(e){return e(n)})),t)return t(n)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:a}),15e3);a.onerror=m.bind(null,a.onerror),a.onload=m.bind(null,a.onload),l&&document.head.appendChild(a)}},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="https://tgstation.github.io/tgstation-server-webpanel/webpanel/5.0.0/",function(){var e={179:0};i.f.j=function(t,n){var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((function(n,o){r=e[t]=[n,o]}));n.push(r[2]=o);var s=i.p+i.u(t),a=new Error;i.l(s,(function(n){if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,r[1](a)}}),"chunk-"+t,t)}},i.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,s=n[0],a=n[1],l=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);if(l)var d=l(i)}for(t&&t(n);c<s.length;c++)o=s[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},n=self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),i.nc=void 0;var l=i.O(void 0,[607,991,340],(function(){return i(16143)}));l=i.O(l)}();
//# sourceMappingURL=main.b2fd02e5431502e90fce.bundle.js.map
{"version":3,"file":"784.4ad9ecdaa31215a08c76.bundle.js","mappings":"gOAKe,SAASA,EAAWC,GAC/B,OACIC,EAAAA,cAACC,IAAS,CACNC,IAAKH,EAAMI,IACXC,KAAM,OACNC,MAAM,OACNC,UAAU,WACVC,WAAS,EACTC,kBAAkB,GAG9B,CAEO,SAASC,EAAgBV,GAC5B,OAAKW,EAAAA,GAAcC,SAASC,MAIxBZ,EAAAA,cAAA,OAAKa,UAAU,aACXb,EAAAA,cAACF,EAAU,CAACK,IAAKJ,EAAMI,OAJpBH,EAAAA,cAAAA,EAAAA,SAAA,KAOf,C,kVC3BO,IAAKc,EAAY,SAAZA,GAAY,OAAZA,EAAY,8BAAZA,EAAY,YAAZA,EAAY,4BAAZA,EAAY,kCAAZA,EAAY,kBAAZA,EAAY,8BAAZA,EAAY,wBAAZA,EAAY,0BAAZA,EAAY,oBAAZA,EAAY,0BAAZA,CAAY,M,0PCyDxB,MAAMC,UAAef,EAAAA,UAGVgB,WAAAA,CAAYjB,GACfkB,MAAMlB,GAENmB,KAAKC,UAAYD,KAAKC,UAAUC,KAAKF,MACrCA,KAAKG,aAAeH,KAAKG,aAAaD,KAAKF,MAE3CA,KAAKI,MAAQ,CACTC,UAAW,KACXC,SAAU,GACVC,OAAQ,GACRC,SAAS,EACTC,YAAa,KACbC,WAAY,KAEpB,CAEA,uBAAaC,SACHX,KAAKY,eAEXZ,KAAKa,SAAS,CACVL,SAAS,GAEjB,CAEOM,oBAAAA,GACCd,KAAKI,MAAMW,OACXC,OAAOC,cAAcjB,KAAKI,MAAMW,MAExC,CAEQG,QAAAA,CAASC,GACbnB,KAAKa,UAASO,IACV,MAAMb,EAASc,MAAMC,KAAKF,EAAUb,QAEpC,OADAA,EAAOgB,KAAKJ,GACL,CACHZ,SACH,GAET,CAEA,kBAAcK,GACV,KACKY,EAAAA,EAAAA,KACGC,EAAAA,EAAAA,GAAqBzB,KAAK0B,QAAQC,MAClCC,EAAAA,GAAqBC,eAGzB,OAGJ,MAAMC,QAAkBC,EAAAA,EAAYC,eAEpC,OAAQF,EAAUG,MACd,KAAKC,EAAAA,EAAWC,MACZ,OAAOnC,KAAKkB,SAASY,EAAUX,OAEnC,KAAKe,EAAAA,EAAWE,GAAI,CAChB,MAAMC,EAAMP,EAAUQ,QAAQC,qBAExBC,EADU,wCACQC,KAAKJ,GAE7B,IAAKG,EACD,OAAOxC,KAAKkB,SACR,IAAIwB,EAAAA,GAAcC,EAAAA,GAAUC,SAAU,CAClCC,QAASC,MAAM,kCAAkCT,QAK7D,GAAmB,eAAfG,EAAQ,GAWR,YAVAxC,KAAKa,SAAS,CACVP,SAAU,CACN,CACIyC,KAAM,0CACNC,QAAS,0CACTC,SAAS,EACTC,KAAK,MAOrBlD,KAAKa,SAAS,CACVJ,YAAa+B,EAAQ,GACrB9B,WAAY8B,EAAQ,KAGxB,MAAMW,EAAuBnD,KAAKoD,cAAcZ,EAAQ,GAAIA,EAAQ,IAE9Da,QAAoBC,EAAAA,EAAaC,YAAY,CAC/CC,MAAOhB,EAAQ,GACfiB,KAAMjB,EAAQ,GACdS,QAASjD,KAAK0B,QAAQgC,WAAWV,QACjCW,MAAO3D,KAAKnB,MAAM+E,MAAMC,OAAOF,MAGnC,OADAG,QAAQC,IAAI,iBAAkBV,GACtBA,EAAYpB,MAChB,KAAKC,EAAAA,EAAWC,MACZ,OAAOnC,KAAKkB,SAASmC,EAAYlC,OAErC,KAAKe,EAAAA,EAAWE,GAAI,CAChB,MAAM/B,QAAkB8C,EACxBnD,KAAKa,SAAS,CACVR,YACAC,SAAU+C,EAAYf,SAE9B,EAER,EAER,CAEA,mBAAcc,CAAcI,EAAeC,GACvC,MAAMO,QAAwBV,EAAAA,EAAaW,QACvCT,EACAC,EACA,gBACA,YAEJ,OAAQO,EAAgB/B,MACpB,KAAKC,EAAAA,EAAWC,MACZnC,KAAKkB,SAAS8C,EAAgB7C,OAC9B,MAEJ,KAAKe,EAAAA,EAAWE,GACZ,IACI,MAAM8B,EAAelD,OAAOmD,KAAKH,EAAgB1B,SACjD,OAAO8B,IAAAA,MAAWF,EACtB,CAAE,MACElE,KAAKkB,SAAS,IAAIwB,EAAAA,GAAcC,EAAAA,GAAU0B,QAAS,CAAEC,MAAM,IAC/D,EAMR,OAAO,IACX,CAEQrE,SAAAA,GACJ,IAAK,MAAM+C,KAAWhD,KAAKI,MAAME,SAAU,CACvC,GAAI0C,EAAQA,UAAYhD,KAAKI,MAAMmE,eAAgB,SAEnD,MAAMxD,EAAQC,OAAOwD,aAAY,KAC7BxE,KAAKa,UAASO,QACoBqD,IAA1BrD,EAAUsD,aAAuD,OAA1BtD,EAAUsD,YAC1CtD,EAEmB,IAA1BA,EAAUsD,aACV1D,OAAOC,cAAcG,EAAUL,OACxB,CACHA,MAAO,KACP2D,YAAa,OAId,CACHA,YAAatD,EAAUsD,YAAc,IAE3C,GACH,KAOH,YALA1E,KAAKa,SAAS,CACV8D,gBAAiB3B,EACjBjC,MAAOA,EACP2D,YAAa,IAGrB,CACJ,CAEA,mBAAcE,GACV,MAAMC,EAAe,IAAIC,SAAqBC,IAC1C,MAAMC,EAAQC,SAASC,cAAc,SACrCF,EAAMG,KAAO,OACbH,EAAMI,SAAWC,IACb,MAAMC,EAASD,EAAEE,QAA6BD,MACnCP,EAAPO,EAAeA,EAAM,GACZ,KAAK,EAEtBN,EAAMQ,OAAO,IAGXC,QAAkBZ,EACxB,IAAKY,EAAW,OAEhB,IAAKA,EAAUvG,KAAKwG,cAAcC,SAAS,QAEvC,YADAC,MAAM,oBAKV,MAAMC,QAAiBJ,EAAUK,cAE3BC,EAAmBC,OAAO,iCAChC,IAAKD,EAAkB,OAEvB,MAAME,EAAsB,IAAIC,EAAAA,OAAOH,GAGjCI,EAAgB,GAAGF,EAAoBG,SAASH,EAAoBI,SAASJ,EAAoBK,QAEnGH,GAAiBJ,EAMhBQ,QACG,6LAA6LJ,0FAM/LnG,KAAKwG,cAAczE,EAAAA,EAAY6C,cAAcuB,EAAeN,IAZ9DD,MAAM,kBAad,CAEA,kBAAczF,GACV,IAAKH,KAAKI,MAAMmE,eAKZ,OAJAT,QAAQ3C,MAAM,mDACdnB,KAAKa,SAAS,CACV8D,qBAAiBF,UAKnBzE,KAAKwG,cAAczE,EAAAA,EAAY5B,aAAaH,KAAKI,MAAMmE,gBACjE,CAEA,mBAAciC,CACVC,GAEA,MAAMC,QAAiBD,EAEvB,OAAQC,EAASzE,MACb,KAAKC,EAAAA,EAAWC,MAEZ,YADAnC,KAAKkB,SAASwF,EAASvF,OAG3B,KAAKe,EAAAA,EAAWE,IAKpBuE,EAAAA,EAAaC,WAAY,EAGzB5F,OAAOwD,aAAYqC,UAEf,UADuBC,EAAAA,EAAWC,gBAAe,IAChC9E,OAGRC,EAAAA,EAAWC,MACZnB,OAAOgG,SAASC,QAExB,GACD,KACHjH,KAAKa,SAAS,CACVqG,UAAU,GAElB,CAEQC,6BAAAA,CAA8BhB,GAClC,MAAMiB,EAAepH,KAAKI,MAAMC,UAChC,IAAK+G,EACD,OAAO,KAGX,MAAMC,EAAiBrH,KAAK0B,QAAQgC,WAAWV,QAEzCiD,EAAsB,IAAIC,EAAAA,OAAOC,GACjCmB,EAAuB,IAAIpB,EAAAA,OAAOmB,GAExC,IAAIE,EAAW,GAEf,MAAMC,EAA0BJ,EAAaK,WAAW7H,EAAa8H,MAAMC,MACvEC,GAAcA,EAAWC,SAAW1B,IACrC2B,kBAIH,IAAIC,EACAC,EAHJT,GAAY,wQAAwQpB,qBAAiCqB,EAAwBS,4BAA4BT,EAAwBU,4BAA4BV,EAAwBW,2BAA2BX,EAAwBY,6FAA6FZ,EAAwBa,mCAAmCb,EAAwBc,mBAIppBrC,EAAsBqB,GACtBC,GACI,0HACJQ,EAAe5B,EACf6B,EAAgBX,IAEhBU,EAAeV,EACfW,EAAgB7B,GAGpB,MAAMoC,EAAqB,IAAIrC,EAAAA,OAAO6B,GAChCS,EAAsB,IAAItC,EAAAA,OAAO8B,GAGjCS,EAAkBrB,EAAaK,WAAW7H,EAAa8H,MACxDgB,QAAOd,IACJ,MAAMe,EAA0B,IAAIzC,EAAAA,OAAO0B,EAAWC,SACtD,OACIe,EAAAA,EAAAA,KAAID,EAAyBJ,KAC7BM,EAAAA,EAAAA,KAAIF,EAAyBH,EAAoB,IAGxDM,MAAK,CAACC,EAAaC,IAChB,IAAI9C,EAAAA,OAAO6C,EAAYlB,SAASoB,QAAQD,EAAYnB,WAEvDqB,UAECC,EAA6D,GAEnE,IAAK,IAAIC,EAAI,EAAGA,EAAIX,EAAgBY,OAAS,IAAKD,EAAG,CACjD,MAAME,EAAa,IAAIC,IACvBJ,EAA0B5H,KAAK+H,GAC/B,MAAME,EAAaf,EAAgBW,GAC7BK,EAAkBhB,EAAgBW,EAAI,GAE5CE,EAAWI,IAAI9J,EAAa8H,KAAM8B,GAClCG,OAAOC,KAAKJ,EAAW1B,mBAAoB+B,SAAQC,IAC/C,MAAMC,EAAYD,EACZE,EAAsBR,EAAW1B,kBAAmBiC,GAC1D,IAAKC,EAAqB,OAE1B,MAAMC,EAAmB,IAAI/D,EAAAA,OAAO8D,GAEpC,GACID,GAAanK,EAAa8H,MAC1BqC,GAAanK,EAAasK,aAC1BH,GAAanK,EAAauK,UAC1BJ,GAAanK,EAAawK,YAE1B,OAEJ,MAAMC,EAAgB,IAAInE,EAAAA,OAAOuD,EAAgB3B,kBAAmBiC,IAC9DO,EAAoBlD,EAAaK,WAAWsC,GAC7CrB,QAAOd,IACJ,MAAM2C,EAAoB,IAAIrE,EAAAA,OAAO0B,EAAWC,SAChD,OACI0C,EAAoBF,GACpBE,GAAqBN,CAAgB,IAG5CO,SAAQC,GAAKA,EAAEC,UACf5B,MAAK,CAAC6B,EAASC,IAAYD,EAAQE,YAAcD,EAAQC,cACxDjD,EAAyB,CAC3BC,QAASmC,EACTU,QAASJ,GAGTA,EAAkBjB,OAAS,GAAGC,EAAWI,IAAIK,EAAWnC,EAAW,GAE/E,CA8CA,OA5CAuB,EAA0BU,SAAQiB,IAC9BvD,GAAY,OACZ,MAAMwD,EAASD,EAAkBE,IAAIpL,EAAa8H,MAC5CuD,EAAc,IAAI/E,EAAAA,OAAO6E,EAAOlD,SAElCoD,EAAY3E,MAAQ,EACpBiB,GAAY,YAAY0D,EAAY3E,QAC7B2E,EAAY5E,MAAQ,EAC3BkB,GAAY,YAAY0D,EAAY5E,UAEpCkB,GAAY,oBAAoB0D,EAAY7E,cAGhD,IAAK,MAAM8E,KAActL,EAAc,CACnC,MAAMmK,EAAYmB,EACZtD,EAAakD,EAAkBE,IAAIjB,IAEpCnC,GAC8B,GAA9BA,EAAW8C,SAASrB,QAAeU,GAAanK,EAAaqI,gBAKlEV,GAAY,YACRwC,GAAanK,EAAaqI,gBAC1BV,GAAY,MAGhBA,GAAYvH,KAAKmL,qBAAqBpB,GAClCA,GAAanK,EAAaqI,gBAC1BV,GAAY,4CAA4CK,EAAWC,mFAGvED,EAAW8C,SAASb,SAAQuB,GACxBA,EAAOC,aAAaxB,SAAQyB,IACxB/D,GAAY,OAAO+D,QAAWF,EAAOP,mCAAmC7K,KACnEI,MAAMK,eAAgBT,KAAKI,MAAMM,mBAClC0K,EAAOP,mBACHO,EAAOG,8BAA8BH,EAAOG,SAAS,MAGzE,KAGGhE,CACX,CAEQ4D,oBAAAA,CAAqBK,GACzB,MAAMzB,EAAYyB,EAClB,OAAQzB,GACJ,KAAKnK,EAAasI,QACd,MAAO,WACX,KAAKtI,EAAawI,WACd,MAAO,cACX,KAAKxI,EAAaqI,cACd,MAAO,oBACX,KAAKrI,EAAauI,cACd,MAAO,iBACX,KAAKvI,EAAa0I,aACd,MAAO,8CACX,KAAK1I,EAAa8H,KACd,MAAO,OACX,KAAK9H,EAAayI,gBACd,MAAO,oBACX,QACI,MAAM,IAAIvF,MAAM,sBAAwBiH,GAEpD,CAEO0B,MAAAA,GACH,GAAIzL,KAAKI,MAAM8G,SACX,OAAOpI,EAAAA,cAAC4M,EAAAA,QAAO,CAACC,KAAK,qBAEzB,GAAI3L,KAAKI,MAAMI,QACX,OAAO1B,EAAAA,cAAC4M,EAAAA,QAAO,CAACC,KAAK,oBAEzB,MAAMC,EAAgBC,IAClB7L,KAAKa,SAAS,CACV0D,eAAgBsH,EAAYtG,OAAO7F,OACrC,EAGAoM,GAAgBrK,EAAAA,EAAAA,GAAqBzB,KAAK0B,QAAQC,MAClDoK,GAAmBvK,EAAAA,EAAAA,IAAcsK,EAAelK,EAAAA,GAAqBC,eACrEmK,GAAmBxK,EAAAA,EAAAA,IAAcsK,EAAelK,EAAAA,GAAqBqK,eAErEC,EAA0BlM,KAAKI,MAAMuE,iBAEjC3E,KAAKmH,8BAA8BnH,KAAKI,MAAMuE,gBAAgB3B,UAC9DhD,KAAKI,MAAMuE,gBAAgB5B,MAE1BoJ,WAAW,KAAM,IACjBA,WAAW,KAAM,QACtB,KAEA7E,EAAuB,IAAIpB,EAAAA,OAAOlG,KAAK0B,QAAQgC,WAAWV,SAC1DoJ,EACFpM,KAAKI,MAAMuE,iBACX,IAAIuB,EAAAA,OAAOlG,KAAKI,MAAMuE,gBAAgB3B,SAASoD,OAASkB,EAAqBlB,MAE3EiG,EAAoBA,IACtBrM,KAAKa,SAAS,CACVyL,yBAAyB,IAG3BC,EAA2C,iBAA3BvM,KAAKI,MAAMsE,YACjC,OACI5F,EAAAA,cAACA,EAAAA,SAAc,KACXA,EAAAA,cAACS,EAAAA,EAAe,CAACN,IAAKe,KAAKI,MAAME,WACjCxB,EAAAA,cAAA,OAAKa,UAAU,eACVK,KAAKI,MAAMG,OAAOiM,KAAI,CAACC,EAAKC,KACzB,GAAKD,EACL,OACI3N,EAAAA,cAAC6N,EAAAA,GAAU,CACPC,IAAKF,EACLvL,MAAOsL,EACPI,QAASA,IACL7M,KAAKa,UAASiM,IACV,MAAMC,EAAS1L,MAAMC,KAAKwL,EAAKvM,QAE/B,OADAwM,EAAOL,QAASjI,EACT,CACHlE,OAAQwM,EACX,KAGX,KAIb/M,KAAKI,MAAMuE,gBACR7F,EAAAA,cAACA,EAAAA,SAAc,KACXA,EAAAA,cAACkO,EAAAA,EAAK,CACFC,UAAQ,EACRC,KACId,IACCpM,KAAKI,MAAMkM,wBAEhBa,OAAQd,EACRe,KAAK,MACLtO,EAAAA,cAACkO,EAAAA,EAAMK,OAAM,CAACC,aAAW,GACrBxO,EAAAA,cAACkO,EAAAA,EAAMO,MAAK,KACRzO,EAAAA,cAAC0O,EAAAA,EAAgB,CAACC,GAAG,yCAG7B3O,EAAAA,cAACkO,EAAAA,EAAMU,KAAI,CAAC/N,UAAU,oBAClBb,EAAAA,cAAC0O,EAAAA,EAAgB,CACbC,GAAG,oCACHE,OAAQ,CACJC,aAActG,EAAqBlB,MACnCyH,YAAa,IAAI3H,EAAAA,OAAOlG,KAAKI,MAAMuE,gBAAgB3B,SAC9CoD,UAIjBtH,EAAAA,cAACkO,EAAAA,EAAMc,OAAM,KACThP,EAAAA,cAACiP,EAAAA,EAAM,CAACC,QAAQ,YAAYC,QAAS5B,GACjCvN,EAAAA,cAAC0O,EAAAA,EAAgB,CAACC,GAAG,qBAIjC3O,EAAAA,cAAA,OAAKa,UAAU,eACXb,EAAAA,cAAA,UACIA,EAAAA,cAAC0O,EAAAA,EAAgB,CAACC,GAAG,oCAEzB3O,EAAAA,cAAA,YAEJA,EAAAA,cAACoP,IAAa,KAAEhC,GAChBpN,EAAAA,cAAA,OAAKa,UAAU,eACXb,EAAAA,cAAA,WACAA,EAAAA,cAACiP,EAAAA,EAAM,CACHpO,UAAU,OACVsO,QAASA,IAAMjO,KAAKa,SAAS,CAAE8D,qBAAiBF,KAChD3F,EAAAA,cAAC0O,EAAAA,EAAgB,CAACC,GAAG,oBAEzB3O,EAAAA,cAACqP,EAAAA,EAAc,CACXC,QACItP,EAAAA,cAACuP,EAAAA,EAAO,CAACZ,GAAG,kBACR3O,EAAAA,cAAC0O,EAAAA,EAAgB,CAACC,GAAG,4BAG7Ba,UAAU,QACVpB,KAAMX,GACNzN,EAAAA,cAACiP,EAAAA,EAAM,CAACE,QAASA,KAAWjO,KAAKG,cAAe,EAACoO,SAAUhC,GACvDzN,EAAAA,cAAC0O,EAAAA,EAAgB,CAACC,GAAG,qBACpBlB,EAAS,KAAKvM,KAAKI,MAAMsE,eAA2B,OAMrE5F,EAAAA,cAAA,OAAKa,UAAU,eACXb,EAAAA,cAAA,MAAIa,UAAU,QACVb,EAAAA,cAAC0O,EAAAA,EAAgB,CAACC,GAAG,qCAExB1B,EACGjN,EAAAA,cAAC0P,EAAAA,EAAG,CAACC,GAAI,EAAGC,GAAI,EAAG/O,UAAU,WACxBK,KAAKI,MAAME,SAASkM,KAAI,CAACxJ,EAAS0J,IAE3B5N,EAAAA,cAAC6P,EAAAA,EAAU,CAAChP,UAAU,OAAOiN,IAAK5J,EAAQA,SACtClE,EAAAA,cAAC6P,EAAAA,EAAWC,QAAO,KACf9P,EAAAA,cAAC6P,EAAAA,EAAWE,MAAK,CACbpB,GAAIzK,EAAQA,QACZ9D,KAAK,UACLqP,SAAUvL,EAAQC,QAClBvD,MAAOsD,EAAQA,QACf8L,QACI9O,KAAKI,MAAMmE,iBACXvB,EAAQA,QAEZ+L,SAAUnD,KAGlB9M,EAAAA,cAACkQ,EAAAA,EAAW,CACRC,GAAI,QACJC,QAASlM,EAAQA,QACjBuL,UAAQ,GACPvL,EAAQA,QACRA,EAAQC,QACLnE,EAAAA,cAAC0O,EAAAA,EAAgB,CAACC,GAAG,8BAErB,GAEM,GAATf,EACG5N,EAAAA,cAAC0O,EAAAA,EAAgB,CAACC,GAAG,6BAErB,OAMpB3O,EAAAA,cAACiP,EAAAA,EAAM,CACHC,QAAQ,OACRC,QAASA,KACLjO,KAAKnB,MAAMsQ,QAAQ5N,MACd6N,EAAAA,GAAUC,aAAaC,MACpBF,EAAAA,GAAUC,aAAaE,OAAS,OACpC,CACItI,QAAQ,GAEf,EAELsH,WAAYvO,KAAKnB,MAAM+E,MAAMC,OAAOF,KACpC7E,EAAAA,cAAC0O,EAAAA,EAAgB,CAACC,GAAG,+BAEzB3O,EAAAA,cAAA,WACAA,EAAAA,cAACiP,EAAAA,EAAM,CACHE,QAASjO,KAAKC,UACdsO,UAAWvO,KAAKI,MAAMmE,gBACtBzF,EAAAA,cAAC0O,EAAAA,EAAgB,CAACC,GAAG,uBAI7B3O,EAAAA,cAAA,UACIA,EAAAA,cAAC0O,EAAAA,EAAgB,CAACC,GAAG,0CAG7B3O,EAAAA,cAAA,WACAA,EAAAA,cAACqP,EAAAA,EAAc,CACXC,QACItP,EAAAA,cAACuP,EAAAA,EAAO,CAACZ,GAAG,2BACR3O,EAAAA,cAAC0O,EAAAA,EAAgB,CAACC,GAAG,mCAG7BP,MAAMlB,QAA2BvH,IAChC,EAAG+K,SAAQC,KACR3Q,EAAAA,cAACiP,EAAAA,EAAM2B,EAAA,CACHF,IAAKA,EACL7P,UAAU,OACVqO,QAAQ,UACRC,QAASA,KAAWjO,KAAK4E,eAAgB,EACzC2J,UAAWvC,GACPyD,GACJ3Q,EAAAA,cAAA,WACIA,EAAAA,cAAC6Q,EAAAA,EAAe,CAAChQ,UAAU,OAAOiQ,KAAMC,EAAAA,MACxC/Q,EAAAA,cAAC0O,EAAAA,EAAgB,CAACC,GAAG,kCASzD,EAEJ5N,EAAOiQ,YAAcC,EAAAA,EACrB,OAAeC,EAAAA,EAAAA,GAAWnQ,E,2GC1oB1BgH,eAAeoJ,EAAKxJ,EAAc8I,EAAYW,GAC1C,MAAMC,EAAW1J,EAAQ0J,SAASC,MAAMb,EAAiBW,GAMzD,OAJI1Q,EAAAA,GAAc6Q,YAAY3Q,QAC1ByQ,EAASG,QAAQC,cAAgB,SAAS/Q,EAAAA,GAAc6Q,YAAY3Q,SAGjE+G,EAAQ0J,EACnB,CAEAtJ,eAAe2J,IACX,OAAIhR,EAAAA,GAAc6Q,YAAY3Q,MACnB,CACHyF,KAAM,QACNsL,UAAW,MACXC,MAAOlR,EAAAA,GAAc6Q,YAAY3Q,OAG9B,CACHyF,KAAM,kBAGlB,CAEA,MAAMwL,EAAeA,IACVhH,OAAOiH,OAAOJ,EAAKtQ,KAAK,MAAO,CAClC+P,KAAMA,EAAK/P,KAAK,QAMlBmF,EAAI,IAAK,cAA2BwL,EAAAA,aAG/B/Q,WAAAA,GACHC,QAAQ,KAHK+Q,eAAS,EAKtB,MAAMC,EAAOC,EAAAA,EAAQC,OAAOC,EAAAA,EAAOC,EAAAA,GAEnCnR,KAAK8Q,UAAY,IAAIC,EAAK,CACtBJ,eACAS,UAAW,kCAAoCC,EAAAA,GAC/CC,QAAS,yBACTC,SAAU,CACNC,YAAaA,CAACC,EAAoBC,KAC9B5N,QAAQ6N,KACJ,uCAAuCD,EAAQE,UAAUF,EAAQrP,OAGlC,IAA/BqP,EAAQjL,QAAQoL,aAEhB/N,QAAQC,IAAI,kBAAkB0N,eACvB,IAIfK,qBAAsBA,CAACC,EAAWL,KAE9B5N,QAAQ6N,KAAK,8BAA8BD,EAAQE,UAAUF,EAAQrP,MAAM,IAI3F,CAEA,4BAAa2P,CACTxO,EACAC,GAEA,IACI,MAAMwO,QAAiBjS,KAAK8Q,UAAUoB,MAAMlH,IAAI,CAC5CxH,QACAC,SAGE0O,QAAenS,KAAK8Q,UAAUoB,MAAME,UAAU,CAChD5O,QACAC,OACA0O,OAAQF,EAASI,KAAKC,iBAG1B,OAAO,IAAIC,EAAAA,EAAe,CACtBtQ,KAAMC,EAAAA,EAAWE,GACjBE,QAAS6P,EAAOE,KAAKG,OAAOC,KAEpC,CAAE,MAAOpN,GACL,OAAO,IAAIkN,EAAAA,EAA8C,CACrDtQ,KAAMC,EAAAA,EAAWC,MACjBhB,MAAO,IAAIuB,EAAAA,GAAcC,EAAAA,GAAU+P,YAAa,CAC5C7P,QAASwC,KAGrB,CACJ,CAEA,iBAAa9B,EAAY,MACrBC,EAAK,KACLC,EAAI,QACJR,EAAO,IACPU,IAOA,IAAIrB,EACAqQ,EAAc,EAClB,IACIrQ,QAAgBtC,KAAK8Q,UAAU8B,SAC3B5S,KAAK8Q,UAAUoB,MAAMW,aACrB,CAAErP,QAAOC,SACT,CAACiD,EAAUoM,IACApM,EAAS2L,KAAKU,QAAO,CAACC,EAAQC,KACjC,MAAMrP,EAAQ,6BAA6BnB,KAAKwQ,EAAQ/T,MAAQ,IAChE,IAAK0E,EAAO,OAAOoP,EAGnB,GADqBE,SAAStP,EAAM,GAAG,IACpB,EAAG,OAAOoP,EAE7B,MAAMhQ,EAAUY,EAAM,GACtB,IAAIV,GAAM,EAGV,GAAIF,GAAWC,EAAS,CACpB,GAAI0P,GAAe,IAAMhP,EAErB,OADCmP,IACME,EAEXL,IACAzP,GAAM,CACV,CAQA,OANA8P,EAAOzR,KAAK,CACRyB,UACAD,KAAMkQ,EAAQlQ,MAAQ,GACtBE,QAASD,IAAYC,EACrBC,QAEG8P,CAAM,GACd,KAGf,CAAE,MAAO3N,GACL,OAAO,IAAIkN,EAAAA,EAAoD,CAC3DtQ,KAAMC,EAAAA,EAAWC,MACjBhB,MAAO,IAAIuB,EAAAA,GAAcC,EAAAA,GAAU+P,YAAa,CAC5C7P,QAASwC,KAGrB,CACA,OAAO,IAAIkN,EAAAA,EAAe,CACtBtQ,KAAMC,EAAAA,EAAWE,GACjBE,WAER,CAEQ6Q,WAAAA,CAAYC,GAChB,MAAO,CACHC,OAAQD,EAAGC,OACXC,MAAOF,EAAGE,MACVC,OAAQH,EAAGzR,MAAM6R,OAAS,QAC1BpT,MAAOgT,EAAGK,UAAY,SAAYL,EAAGhT,MACrCkP,KAAM8D,EAAGM,SACTC,KAAMP,EAAGO,KAAKlB,IACdmB,KAAMR,EAAGS,KAAKpB,IACdqB,eAAgBV,EAAGW,OAAOC,MACtBC,GACIA,EAAM/U,MAAMwG,cAAcwO,SAAS,cACnCD,EAAM/U,MAAMwG,cAAcwO,SAAS,gBAGnD,CAEA,YAAaC,EAAO,MAChB3Q,EAAK,KACLC,EAAI,UACJ2Q,IAMA,IAAI9R,EAAyB,GAC7B,IACIA,SACUtC,KAAK8Q,UAAU8B,SAAS5S,KAAK8Q,UAAUuD,MAAMC,KAAM,CACrD9Q,QACAC,OACArD,MAAO,UAEboM,IAAIxM,KAAKmT,aAEX,IAAK,MAAMoB,KAAYH,GAAa,GAChC,IAAK9R,EAAQqF,MAAKyL,GAAMA,EAAGC,QAAUkB,IAAW,CAC5C,MAAMnB,SACIpT,KAAK8Q,UAAUuD,MAAMrJ,IAAI,CAC3BxH,QACAC,OACA+Q,YAAaD,KAEnBlC,KACF/P,EAAQf,KAAKvB,KAAKmT,YAAYC,GAClC,CAER,CAAE,MAAO/N,GAEL,OADAvB,QAAQ3C,MAAMkE,GACP,IAAIkN,EAAAA,EAAqD,CAC5DtQ,KAAMC,EAAAA,EAAWC,MACjBhB,MAAO,IAAIuB,EAAAA,GAAcC,EAAAA,GAAU+P,YAAa,CAC5C7P,QAASwC,KAGrB,CACA,OAAO,IAAIkN,EAAAA,EAAe,CACtBtQ,KAAMC,EAAAA,EAAWE,GACjBE,WAER,CAEA,kBAAamS,EAAa,MACtBjR,EAAK,KACLC,EAAI,GACJ2P,EAAE,aACFsB,IAOA,IACIC,EADArS,EAAoB,GAExB,IAoBI,GAnBAA,QAAgBtC,KAAK8Q,UAAU8B,SAC3B5S,KAAK8Q,UAAUuD,MAAMO,YACrB,CACIpR,QACAC,OACA+Q,YAAapB,EAAGC,OAChBwB,SAAU,MAEd,EAAGxC,UACCA,EAAK7F,KAAIgG,IAAU,CACftT,KAAMsT,EAAOA,OAAOsC,QAAQC,MAAM,MAAM,GACxCtC,IAAKD,EAAOC,IACZpQ,IAAKmQ,EAAOkB,eAKxBpR,EAAQ4G,UAEJwL,IAAiBpS,EAAQqF,MAAK6K,GAAUA,EAAOC,MAAQiC,IAAe,CACtE,MAAMM,SACIhV,KAAK8Q,UAAUoB,MAAM+C,UAAU,CACjCzR,QACAC,OACA+L,IAAKkF,KAEXrC,KACFsC,EAAc,CACVzV,KAAM8V,EAAaxC,OAAOsC,QAAQC,MAAM,MAAM,GAC9CtC,IAAKuC,EAAavC,IAClBpQ,IAAK2S,EAAatB,SAE1B,CACJ,CAAE,MAAOrO,GAEL,OADAvB,QAAQ3C,MAAMkE,GACP,IAAIkN,EAAAA,EAGT,CACEtQ,KAAMC,EAAAA,EAAWC,MACjBhB,MAAO,IAAIuB,EAAAA,GAAcC,EAAAA,GAAU+P,YAAa,CAC5C7P,QAASwC,KAGrB,CACA,OAAO,IAAIkN,EAAAA,EAAe,CACtBtQ,KAAMC,EAAAA,EAAWE,GACjBE,QAAS,CAACA,EAASqS,IAE3B,CAEA,aAAa1Q,CACTT,EACAC,EACAyR,EACA1F,GAEA,IACI,MAAM,KAAE6C,SAAerS,KAAK8Q,UAAUoB,MAAMiD,WAAW,CACnDC,UAAW,CACPC,OAAQ,UAEZ7R,QACAC,OACAyR,OACA1F,QAIJ,GAAInO,MAAMiU,QAAQjD,GACd,OAAO,IAAIE,EAAAA,EAA8C,CACrDtQ,KAAMC,EAAAA,EAAWC,MACjBhB,MAAO,IAAIuB,EAAAA,GAAcC,EAAAA,GAAU+P,YAAa,CAC5C7P,QAAS,IAAIC,MAAM,GAAGoS,0BAKlC,GAAkB,SAAd7C,EAAKlN,KACL,OAAO,IAAIoN,EAAAA,EAA8C,CACrDtQ,KAAMC,EAAAA,EAAWC,MACjBhB,MAAO,IAAIuB,EAAAA,GAAcC,EAAAA,GAAU+P,YAAa,CAC5C7P,QAAS,IAAIC,MAAM,GAAGoS,cAAiB7C,EAAKlN,aAMxD,MAAMoQ,EAAOlD,EAAamD,QAE1B,OAAO,IAAIjD,EAAAA,EAAe,CACtBtQ,KAAMC,EAAAA,EAAWE,GACjBE,QAASiT,GAEjB,CAAE,MAAOlQ,GAEL,OADAvB,QAAQ3C,MAAMkE,GACP,IAAIkN,EAAAA,EAA8C,CACrDtQ,KAAMC,EAAAA,EAAWC,MACjBhB,MAAO,IAAIuB,EAAAA,GAAcC,EAAAA,GAAU+P,YAAa,CAC5C7P,QAASwC,KAGrB,CACJ,CAEA,0BAAaoQ,CACTjS,EACAC,EACAyR,EACA1F,GAEA,IACI,MAAM,KAAE6C,SAAerS,KAAK8Q,UAAUoB,MAAMiD,WAAW,CACnD3R,QACAC,OACAyR,OACA1F,QAIJ,IAAKnO,MAAMiU,QAAQjD,GACf,OAAO,IAAIE,EAAAA,EAAuD,CAC9DtQ,KAAMC,EAAAA,EAAWC,MACjBhB,MAAO,IAAIuB,EAAAA,GAAcC,EAAAA,GAAU+P,YAAa,CAC5C7P,QAAS,IAAIC,MAAM,GAAGoS,8BAKlC,MAAMlC,EAA0B,GAQhC,OAPAX,EAAKxI,SAAQ6L,GACT1C,EAAOzR,KAAK,CACR2T,KAAMQ,EAAQR,KACdS,YAA6B,OAAhBD,EAAQvQ,SAItB,IAAIoN,EAAAA,EAAe,CACtBtQ,KAAMC,EAAAA,EAAWE,GACjBE,QAAS0Q,GAEjB,CAAE,MAAO3N,GAEL,OADAvB,QAAQ3C,MAAMkE,GACP,IAAIkN,EAAAA,EAAuD,CAC9DtQ,KAAMC,EAAAA,EAAWC,MACjBhB,MAAO,IAAIuB,EAAAA,GAAcC,EAAAA,GAAU+P,YAAa,CAC5C7P,QAASwC,KAGrB,CACJ,GAEJ,K","sources":["webpack://tgstation-server-control-panel/./src/components/utils/JsonViewer.tsx","webpack://tgstation-server-control-panel/./src/utils/tgs_changelog.ts","webpack://tgstation-server-control-panel/./src/components/views/Admin/Update.tsx","webpack://tgstation-server-control-panel/./src/utils/GithubClient.ts"],"sourcesContent":["import React from \"react\";\nimport ReactJson from \"react-json-view\";\n\nimport configOptions from \"../../ApiClient/util/config\";\n\nexport default function JsonViewer(props: { obj: unknown }): JSX.Element {\n    return (\n        <ReactJson\n            src={props.obj as Record<string, unknown>}\n            name={\"JSON\"}\n            theme=\"tube\"\n            iconStyle=\"triangle\"\n            collapsed\n            displayDataTypes={false}\n        />\n    );\n}\n\nexport function DebugJsonViewer(props: { obj: unknown }): JSX.Element {\n    if (!configOptions.showjson.value) {\n        return <></>;\n    }\n    return (\n        <div className=\"text-left\">\n            <JsonViewer obj={props.obj} />\n        </div>\n    );\n}\n","export enum TgsComponent {\n    Configuration = \"Configuration\",\n    Core = \"Core\",\n    HostWatchdog = \"HostWatchdog\",\n    WebControlPanel = \"WebControlPanel\",\n    HttpApi = \"HttpApi\",\n    DreamMakerApi = \"DreamMakerApi\",\n    InteropApi = \"InteropApi\",\n    NugetCommon = \"NugetCommon\",\n    NugetApi = \"NugetApi\",\n    NugetClient = \"NugetClient\"\n}\n\ninterface Change {\n    Descriptions: string[];\n    Author: string;\n    PullRequest: number;\n}\n\ntype ComponentVersionMap = {\n    [key in TgsComponent]: string;\n};\n\nexport interface Changelist {\n    Version: string;\n    ComponentVersions?: ComponentVersionMap;\n    Changes?: Change[];\n    Unreleased?: boolean;\n}\n\ntype ComponentMap = {\n    [key in TgsComponent]: Changelist[];\n};\n\nexport default interface TGSChangelog {\n    Components: ComponentMap;\n}\n","import { faUpload } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { ChangeEvent, ReactNode } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport Button from \"react-bootstrap/Button\";\nimport Col from \"react-bootstrap/Col\";\nimport FormControl from \"react-bootstrap/FormControl\";\nimport InputGroup from \"react-bootstrap/InputGroup\";\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\nimport Tooltip from \"react-bootstrap/Tooltip\";\nimport { FormattedMessage } from \"react-intl\";\nimport ReactMarkdown from \"react-markdown\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport { gte, lte, SemVer } from \"semver\";\nimport YAML from \"yaml\";\n\nimport AdminClient, { UpdateErrors } from \"../../../ApiClient/AdminClient\";\nimport {\n    AdministrationRights,\n    ServerUpdateResponse\n} from \"../../../ApiClient/generatedcode/generated\";\nimport InternalError, { ErrorCode } from \"../../../ApiClient/models/InternalComms/InternalError\";\nimport InternalStatus, { StatusCode } from \"../../../ApiClient/models/InternalComms/InternalStatus\";\nimport ServerClient from \"../../../ApiClient/ServerClient\";\nimport UserClient from \"../../../ApiClient/UserClient\";\nimport { GeneralContext } from \"../../../contexts/GeneralContext\";\nimport GithubClient, { TGSVersion } from \"../../../utils/GithubClient\";\nimport { hasAdminRight, resolvePermissionSet } from \"../../../utils/misc\";\nimport { AppRoutes } from \"../../../utils/routes\";\nimport TGSChangelog, { Changelist, TgsComponent } from \"../../../utils/tgs_changelog\";\nimport ErrorAlert from \"../../utils/ErrorAlert\";\nimport { DebugJsonViewer } from \"../../utils/JsonViewer\";\nimport Loading from \"../../utils/Loading\";\n\ntype IProps = RouteComponentProps<{\n    all: string;\n}>;\ninterface IState {\n    versions: TGSVersion[];\n    changelog: TGSChangelog | null;\n    gitHubOwner: string | null;\n    gitHubRepo: string | null;\n    errors: Array<InternalError<ErrorCode> | undefined>;\n    loading: boolean;\n    //option is the numerical representation of the version\n    selectedOption?: string;\n    //this is the actual version\n    selectedVersion?: TGSVersion;\n    //timer used to delay the user on the release notes page\n    timer?: number | null;\n    //seconds left for the release notes page\n    secondsLeft?: number | null;\n    //redirect to home page\n    updating?: boolean;\n    warnedAboutMajorUpdates?: boolean;\n}\n\nclass Update extends React.Component<IProps, IState> {\n    public declare context: GeneralContext;\n\n    public constructor(props: IProps) {\n        super(props);\n\n        this.loadNotes = this.loadNotes.bind(this);\n        this.updateServer = this.updateServer.bind(this);\n\n        this.state = {\n            changelog: null,\n            versions: [],\n            errors: [],\n            loading: true,\n            gitHubOwner: null,\n            gitHubRepo: null\n        };\n    }\n\n    public async componentDidMount(): Promise<void> {\n        await this.loadVersions();\n\n        this.setState({\n            loading: false\n        });\n    }\n\n    public componentWillUnmount(): void {\n        if (this.state.timer) {\n            window.clearInterval(this.state.timer);\n        }\n    }\n\n    private addError(error: InternalError<ErrorCode>): void {\n        this.setState(prevState => {\n            const errors = Array.from(prevState.errors);\n            errors.push(error);\n            return {\n                errors\n            };\n        });\n    }\n\n    private async loadVersions(): Promise<void> {\n        if (\n            !hasAdminRight(\n                resolvePermissionSet(this.context.user),\n                AdministrationRights.ChangeVersion\n            )\n        ) {\n            return;\n        }\n\n        const adminInfo = await AdminClient.getAdminInfo();\n\n        switch (adminInfo.code) {\n            case StatusCode.ERROR: {\n                return this.addError(adminInfo.error);\n            }\n            case StatusCode.OK: {\n                const url = adminInfo.payload.trackedRepositoryUrl;\n                const matcher = /https?:\\/\\/(github\\.com)\\/(.*?)\\/(.*)/;\n                const results = matcher.exec(url);\n\n                if (!results) {\n                    return this.addError(\n                        new InternalError(ErrorCode.APP_FAIL, {\n                            jsError: Error(`Unknown repository url format: ${url}`)\n                        })\n                    );\n                }\n\n                if (results[1] !== \"github.com\") {\n                    this.setState({\n                        versions: [\n                            {\n                                body: \"Updates unavailable to non github repos\",\n                                version: \"Updates unavailable to non github repos\",\n                                current: true,\n                                old: true\n                            }\n                        ]\n                    });\n                    return;\n                }\n\n                this.setState({\n                    gitHubOwner: results[2],\n                    gitHubRepo: results[3]\n                });\n\n                const loadChangelogPromise = this.loadChangelog(results[2], results[3]);\n\n                const versionInfo = await GithubClient.getVersions({\n                    owner: results[2],\n                    repo: results[3],\n                    current: this.context.serverInfo.version,\n                    all: !!this.props.match.params.all\n                });\n                console.log(\"Version info: \", versionInfo);\n                switch (versionInfo.code) {\n                    case StatusCode.ERROR: {\n                        return this.addError(versionInfo.error);\n                    }\n                    case StatusCode.OK: {\n                        const changelog = await loadChangelogPromise;\n                        this.setState({\n                            changelog,\n                            versions: versionInfo.payload\n                        });\n                    }\n                }\n            }\n        }\n    }\n\n    private async loadChangelog(owner: string, repo: string): Promise<TGSChangelog | null> {\n        const changelogYmlB64 = await GithubClient.getFile(\n            owner,\n            repo,\n            \"changelog.yml\",\n            \"gh-pages\"\n        );\n        switch (changelogYmlB64.code) {\n            case StatusCode.ERROR: {\n                this.addError(changelogYmlB64.error);\n                break;\n            }\n            case StatusCode.OK: {\n                try {\n                    const changelogYml = window.atob(changelogYmlB64.payload);\n                    return YAML.parse(changelogYml) as TGSChangelog;\n                } catch {\n                    this.addError(new InternalError(ErrorCode.BAD_YML, { void: true }));\n                }\n\n                break;\n            }\n        }\n\n        return null;\n    }\n\n    private loadNotes(): void {\n        for (const version of this.state.versions) {\n            if (version.version !== this.state.selectedOption) continue;\n\n            const timer = window.setInterval(() => {\n                this.setState(prevState => {\n                    if (prevState.secondsLeft === undefined || prevState.secondsLeft === null)\n                        return prevState;\n                    //clear the timer if we are ticking the last tick\n                    if (prevState.secondsLeft === 1) {\n                        window.clearInterval(prevState.timer!);\n                        return {\n                            timer: null,\n                            secondsLeft: null\n                        } as IState;\n                    }\n\n                    return {\n                        secondsLeft: prevState.secondsLeft - 1\n                    } as IState;\n                });\n            }, 1000);\n\n            this.setState({\n                selectedVersion: version,\n                timer: timer,\n                secondsLeft: 10\n            });\n            return;\n        }\n    }\n\n    private async uploadVersion(): Promise<void> {\n        const inputPromise = new Promise<File | null>(resolve => {\n            const input = document.createElement(\"input\");\n            input.type = \"file\";\n            input.onchange = e => {\n                const files = (e.target as HTMLInputElement)?.files;\n                if (files) resolve(files[0]);\n                else resolve(null);\n            };\n            input.click();\n        });\n\n        const localFile = await inputPromise;\n        if (!localFile) return;\n\n        if (!localFile.name.toLowerCase().endsWith(\".zip\")) {\n            alert(\"Invalid zipfile!\");\n            return;\n        }\n\n        // https://stackoverflow.com/questions/423376/how-to-get-the-file-name-from-a-full-path-using-javascript\n        const fileData = await localFile.arrayBuffer();\n\n        const targetVersionStr = prompt(\"Enter the TGS version semver:\");\n        if (!targetVersionStr) return;\n\n        const targetVersionSemver = new SemVer(targetVersionStr);\n\n        // reformat it for them in case they fucked up a little\n        const targetVersion = `${targetVersionSemver.major}.${targetVersionSemver.minor}.${targetVersionSemver.patch}`;\n\n        if (targetVersion != targetVersionStr) {\n            alert(\"Invalid semver!\");\n            return;\n        }\n\n        if (\n            !confirm(\n                `JUST WHAT DO YOU THINK YOU'RE DOING!? This is your only and final warning: Uploading a TGS Version .zip that is improperly formatted or that does not match the version you just entered (${targetVersion}) can brick your installation! Think carefully before pressing OK to continue.`\n            )\n        ) {\n            return;\n        }\n\n        await this.serverUpdated(AdminClient.uploadVersion(targetVersion, fileData));\n    }\n\n    private async updateServer(): Promise<void> {\n        if (!this.state.selectedOption) {\n            console.error(\"Attempted to update server to a no version\");\n            this.setState({\n                selectedVersion: undefined\n            });\n            return;\n        }\n\n        await this.serverUpdated(AdminClient.updateServer(this.state.selectedOption));\n    }\n\n    private async serverUpdated(\n        request: Promise<InternalStatus<ServerUpdateResponse, UpdateErrors>>\n    ): Promise<void> {\n        const response = await request;\n\n        switch (response.code) {\n            case StatusCode.ERROR: {\n                this.addError(response.error);\n                return;\n            }\n            case StatusCode.OK: {\n                break;\n            }\n        }\n\n        ServerClient.autoLogin = false;\n        // i need that timer to be async\n        // eslint-disable-next-line @typescript-eslint/no-misused-promises\n        window.setInterval(async () => {\n            const response = await UserClient.getCurrentUser(true);\n            switch (response.code) {\n                //we wait until we get an error which means either it rebooted and our creds are bullshit, or we rebooted and the api is different\n                //in both cases, we should reboot\n                case StatusCode.ERROR: {\n                    window.location.reload();\n                }\n            }\n        }, 2000);\n        this.setState({\n            updating: true\n        });\n    }\n\n    private buildVersionDiffFromChangelog(targetVersion: string): string | null {\n        const releaseNotes = this.state.changelog;\n        if (!releaseNotes) {\n            return null;\n        }\n\n        const currentVersion = this.context.serverInfo.version;\n\n        const targetVersionSemver = new SemVer(targetVersion);\n        const currentVersionSemver = new SemVer(currentVersion);\n\n        let markdown = \"\";\n\n        const targetComponentVersions = releaseNotes.Components[TgsComponent.Core].find(\n            changelist => changelist.Version == targetVersion\n        )!.ComponentVersions!;\n\n        markdown += `Please refer to the [README](https://github.com/tgstation/tgstation-server#setup) for setup instructions. Full changelog can be found [here](https://raw.githubusercontent.com/tgstation/tgstation-server/gh-pages/changelog.yml).\\n\\n#### Component Versions\\nCore: ${targetVersion}\\nConfiguration: ${targetComponentVersions.Configuration}\\nHTTP API: ${targetComponentVersions.HttpApi}\\nDreamMaker API: ${targetComponentVersions.DreamMakerApi} (Interop: ${targetComponentVersions.InteropApi})\\n[Web Control Panel](https://github.com/tgstation/tgstation-server-webpanel): ${targetComponentVersions.WebControlPanel}\\nHost Watchdog: ${targetComponentVersions.HostWatchdog}\\n\\n`;\n\n        let lowerVersion: string;\n        let higherVersion: string;\n        if (targetVersionSemver < currentVersionSemver) {\n            markdown +=\n                \"## _The version you are switching to is below the current version._\\n## _The following changes will be **un**-applied!_\";\n            lowerVersion = targetVersion;\n            higherVersion = currentVersion;\n        } else {\n            lowerVersion = currentVersion;\n            higherVersion = targetVersion;\n        }\n\n        const lowerVersionSemver = new SemVer(lowerVersion);\n        const higherVersionSemver = new SemVer(higherVersion);\n\n        // implemented similarly to https://github.com/tgstation/tgstation-server/blob/63815c950f18fe999c1dade7fa2773752de9f149/tools/Tgstation.Server.ReleaseNotes/Program.cs#L1392\n        const coreChangelists = releaseNotes.Components[TgsComponent.Core]\n            .filter(changelist => {\n                const changelistVersionSemver = new SemVer(changelist.Version);\n                return (\n                    gte(changelistVersionSemver, lowerVersionSemver) &&\n                    lte(changelistVersionSemver, higherVersionSemver)\n                );\n            })\n            .sort((changelistA, changelistB) =>\n                new SemVer(changelistA.Version).compare(changelistB.Version)\n            )\n            .reverse();\n\n        const currentReleaseChangelists: Map<TgsComponent, Changelist>[] = [];\n\n        for (let i = 0; i < coreChangelists.length - 1; ++i) {\n            const currentDic = new Map<TgsComponent, Changelist>();\n            currentReleaseChangelists.push(currentDic);\n            const nowRelease = coreChangelists[i];\n            const previousRelease = coreChangelists[i + 1];\n\n            currentDic.set(TgsComponent.Core, nowRelease);\n            Object.keys(nowRelease.ComponentVersions!).forEach(componentStr => {\n                const component = componentStr as TgsComponent;\n                const componentVersionStr = nowRelease.ComponentVersions![component];\n                if (!componentVersionStr) return;\n\n                const componentVersion = new SemVer(componentVersionStr);\n\n                if (\n                    component == TgsComponent.Core ||\n                    component == TgsComponent.NugetClient ||\n                    component == TgsComponent.NugetApi ||\n                    component == TgsComponent.NugetCommon\n                )\n                    return;\n\n                const takeNotesFrom = new SemVer(previousRelease.ComponentVersions![component]);\n                const changesEnumerator = releaseNotes.Components[component]\n                    .filter(changelist => {\n                        const changelistVersion = new SemVer(changelist.Version);\n                        return (\n                            changelistVersion > takeNotesFrom &&\n                            changelistVersion <= componentVersion\n                        );\n                    })\n                    .flatMap(x => x.Changes!)\n                    .sort((changeA, changeB) => changeA.PullRequest - changeB.PullRequest);\n                const changelist: Changelist = {\n                    Version: componentVersionStr,\n                    Changes: changesEnumerator\n                };\n\n                if (changesEnumerator.length > 0) currentDic.set(component, changelist);\n            });\n        }\n\n        currentReleaseChangelists.forEach(releaseDictionary => {\n            markdown += \"\\n\\n\";\n            const coreCl = releaseDictionary.get(TgsComponent.Core)!;\n            const coreVersion = new SemVer(coreCl.Version);\n\n            if (coreVersion.patch > 0) {\n                markdown += `## Patch ${coreVersion.patch}`;\n            } else if (coreVersion.minor > 0) {\n                markdown += `# Update ${coreVersion.minor}.0`;\n            } else {\n                markdown += `# **Major Update ${coreVersion.major}.0.0**`;\n            }\n\n            for (const componentE in TgsComponent) {\n                const component = componentE as TgsComponent;\n                const changelist = releaseDictionary.get(component);\n                if (\n                    !changelist ||\n                    (changelist.Changes?.length == 0 && component != TgsComponent.Configuration)\n                ) {\n                    continue;\n                }\n\n                markdown += \"\\n\\n#### \";\n                if (component == TgsComponent.Configuration) {\n                    markdown += \"**\";\n                }\n\n                markdown += this.componentDisplayName(component);\n                if (component == TgsComponent.Configuration) {\n                    markdown += `\\n- **The new configuration version is \\`${changelist.Version}\\` Please update your \\`General:ConfigVersion\\` setting appropriately.**`;\n                }\n\n                changelist.Changes?.forEach(change =>\n                    change.Descriptions.forEach(line => {\n                        markdown += `\\n- ${line} ([#${change.PullRequest}](https://github.com/${this\n                            .state.gitHubOwner!}/${this.state.gitHubRepo!}/pull/${\n                            change.PullRequest\n                        })) [@${change.Author}](https://github.com/${change.Author})`;\n                    })\n                );\n            }\n        });\n\n        return markdown;\n    }\n\n    private componentDisplayName(componentS: string): string {\n        const component = componentS as TgsComponent;\n        switch (component) {\n            case TgsComponent.HttpApi:\n                return \"HTTP API\";\n            case TgsComponent.InteropApi:\n                return \"Interop API\";\n            case TgsComponent.Configuration:\n                return \"**Configuration**\";\n            case TgsComponent.DreamMakerApi:\n                return \"DreamMaker API\";\n            case TgsComponent.HostWatchdog:\n                return \"Host Watchdog (Requires reinstall to apply)\";\n            case TgsComponent.Core:\n                return \"Core\";\n            case TgsComponent.WebControlPanel:\n                return \"Web Control Panel\";\n            default:\n                throw new Error(\"Unknown component: \" + component);\n        }\n    }\n\n    public render(): ReactNode {\n        if (this.state.updating) {\n            return <Loading text=\"loading.updating\" />;\n        }\n        if (this.state.loading) {\n            return <Loading text=\"loading.version\" />;\n        }\n        const handleChange = (changeEvent: ChangeEvent<HTMLInputElement>) => {\n            this.setState({\n                selectedOption: changeEvent.target.value\n            });\n        };\n\n        const permissionSet = resolvePermissionSet(this.context.user);\n        const canChangeVersion = hasAdminRight(permissionSet, AdministrationRights.ChangeVersion);\n        const canUploadVersion = hasAdminRight(permissionSet, AdministrationRights.UploadVersion);\n\n        const selectedVersionMarkdown = this.state.selectedVersion\n            ? (\n                  this.buildVersionDiffFromChangelog(this.state.selectedVersion.version) ??\n                  this.state.selectedVersion.body\n              )\n                  .replaceAll(\"\\r\", \"\")\n                  .replaceAll(\"\\n\", \"\\n\\n\")\n            : null;\n\n        const currentVersionSemver = new SemVer(this.context.serverInfo.version);\n        const selectedVersionIsDifferentMajor =\n            this.state.selectedVersion &&\n            new SemVer(this.state.selectedVersion.version).major != currentVersionSemver.major;\n\n        const closeWarningModal = () =>\n            this.setState({\n                warnedAboutMajorUpdates: true\n            });\n\n        const timing = typeof this.state.secondsLeft === \"number\";\n        return (\n            <React.Fragment>\n                <DebugJsonViewer obj={this.state.versions} />\n                <div className=\"text-center\">\n                    {this.state.errors.map((err, index) => {\n                        if (!err) return;\n                        return (\n                            <ErrorAlert\n                                key={index}\n                                error={err}\n                                onClose={() =>\n                                    this.setState(prev => {\n                                        const newarr = Array.from(prev.errors);\n                                        newarr[index] = undefined;\n                                        return {\n                                            errors: newarr\n                                        };\n                                    })\n                                }\n                            />\n                        );\n                    })}\n                </div>\n                {this.state.selectedVersion ? (\n                    <React.Fragment>\n                        <Modal\n                            centered\n                            show={\n                                selectedVersionIsDifferentMajor &&\n                                !this.state.warnedAboutMajorUpdates\n                            }\n                            onHide={closeWarningModal}\n                            size=\"lg\">\n                            <Modal.Header closeButton>\n                                <Modal.Title>\n                                    <FormattedMessage id=\"view.admin.update.major_warn.title\" />\n                                </Modal.Title>\n                            </Modal.Header>\n                            <Modal.Body className=\"text-danger pb-0\">\n                                <FormattedMessage\n                                    id=\"view.admin.update.major_warn.body\"\n                                    values={{\n                                        currentMajor: currentVersionSemver.major,\n                                        targetMajor: new SemVer(this.state.selectedVersion.version)\n                                            .major\n                                    }}\n                                />\n                            </Modal.Body>\n                            <Modal.Footer>\n                                <Button variant=\"secondary\" onClick={closeWarningModal}>\n                                    <FormattedMessage id=\"generic.close\" />\n                                </Button>\n                            </Modal.Footer>\n                        </Modal>\n                        <div className=\"text-center\">\n                            <h3>\n                                <FormattedMessage id=\"view.admin.update.releasenotes\" />\n                            </h3>\n                            <hr />\n                        </div>\n                        <ReactMarkdown>{selectedVersionMarkdown!}</ReactMarkdown>\n                        <div className=\"text-center\">\n                            <hr />\n                            <Button\n                                className=\"mr-3\"\n                                onClick={() => this.setState({ selectedVersion: undefined })}>\n                                <FormattedMessage id=\"generic.goback\" />\n                            </Button>\n                            <OverlayTrigger\n                                overlay={\n                                    <Tooltip id=\"timing-tooltip\">\n                                        <FormattedMessage id=\"view.admin.update.wait\" />\n                                    </Tooltip>\n                                }\n                                placement=\"right\"\n                                show={timing}>\n                                <Button onClick={() => void this.updateServer()} disabled={timing}>\n                                    <FormattedMessage id=\"generic.continue\" />\n                                    {timing ? ` [${this.state.secondsLeft as number}]` : \"\"}\n                                </Button>\n                            </OverlayTrigger>\n                        </div>\n                    </React.Fragment>\n                ) : (\n                    <div className=\"text-center\">\n                        <h3 className=\"mb-4\">\n                            <FormattedMessage id=\"view.admin.update.selectversion\" />\n                        </h3>\n                        {canChangeVersion ? (\n                            <Col xs={8} md={6} className=\"mx-auto\">\n                                {this.state.versions.map((version, index) => {\n                                    return (\n                                        <InputGroup className=\"mb-3\" key={version.version}>\n                                            <InputGroup.Prepend>\n                                                <InputGroup.Radio\n                                                    id={version.version}\n                                                    name=\"version\"\n                                                    disabled={version.current}\n                                                    value={version.version}\n                                                    checked={\n                                                        this.state.selectedOption ===\n                                                        version.version\n                                                    }\n                                                    onChange={handleChange}\n                                                />\n                                            </InputGroup.Prepend>\n                                            <FormControl\n                                                as={\"label\"}\n                                                htmlFor={version.version}\n                                                disabled>\n                                                {version.version}\n                                                {version.current ? (\n                                                    <FormattedMessage id=\"view.admin.update.current\" />\n                                                ) : (\n                                                    \"\"\n                                                )}\n                                                {index == 0 ? (\n                                                    <FormattedMessage id=\"view.admin.update.latest\" />\n                                                ) : (\n                                                    \"\"\n                                                )}\n                                            </FormControl>\n                                        </InputGroup>\n                                    );\n                                })}\n                                <Button\n                                    variant=\"link\"\n                                    onClick={() => {\n                                        this.props.history.push(\n                                            (AppRoutes.admin_update.link ??\n                                                AppRoutes.admin_update.route) + \"all/\",\n                                            {\n                                                reload: true\n                                            }\n                                        );\n                                    }}\n                                    disabled={!!this.props.match.params.all}>\n                                    <FormattedMessage id=\"view.admin.update.showall\" />\n                                </Button>\n                                <br />\n                                <Button\n                                    onClick={this.loadNotes}\n                                    disabled={!this.state.selectedOption}>\n                                    <FormattedMessage id=\"generic.continue\" />\n                                </Button>\n                            </Col>\n                        ) : (\n                            <h4>\n                                <FormattedMessage id=\"view.admin.update.selectversion.deny\" />\n                            </h4>\n                        )}\n                        <br />\n                        <OverlayTrigger\n                            overlay={\n                                <Tooltip id=\"create-instance-tooltip\">\n                                    <FormattedMessage id=\"view.admin.update.upload.deny\" />\n                                </Tooltip>\n                            }\n                            show={canUploadVersion ? false : undefined}>\n                            {({ ref, ...triggerHandler }) => (\n                                <Button\n                                    ref={ref}\n                                    className=\"mx-1\"\n                                    variant=\"success\"\n                                    onClick={() => void this.uploadVersion()}\n                                    disabled={!canUploadVersion}\n                                    {...triggerHandler}>\n                                    <div>\n                                        <FontAwesomeIcon className=\"mr-2\" icon={faUpload} />\n                                        <FormattedMessage id=\"view.admin.update.upload\" />\n                                    </div>\n                                </Button>\n                            )}\n                        </OverlayTrigger>\n                    </div>\n                )}\n            </React.Fragment>\n        );\n    }\n}\nUpdate.contextType = GeneralContext;\nexport default withRouter(Update);\n","/* eslint-disable import/no-unresolved */\nimport { retry } from \"@octokit/plugin-retry\";\nimport { throttling } from \"@octokit/plugin-throttling\";\nimport { RequestError } from \"@octokit/request-error\";\nimport { Octokit, RestEndpointMethodTypes } from \"@octokit/rest\";\nimport { EndpointDefaults } from \"@octokit/types\";\n/* eslint-enable import/no-unresolved */\nimport { TypedEmitter } from \"tiny-typed-emitter/lib\";\n\nimport InternalError, { ErrorCode } from \"../ApiClient/models/InternalComms/InternalError\";\nimport InternalStatus, { StatusCode } from \"../ApiClient/models/InternalComms/InternalStatus\";\nimport configOptions from \"../ApiClient/util/config\";\nimport { VERSION } from \"../definitions/constants\";\n\nexport interface TGSVersion {\n    version: string;\n    body: string;\n    current: boolean;\n    old: boolean;\n}\n\nexport interface Commit {\n    name: string;\n    sha: string;\n    url: string;\n}\n\nexport interface PullRequest {\n    number: number;\n    title: string;\n    author: string;\n    state: \"open\" | \"closed\" | \"merged\";\n    link: string;\n    head: string;\n    tail: string;\n    testmergelabel: boolean;\n}\n\ntype ExtractArrayType<A> = A extends Array<infer ArrayType> ? ArrayType : never;\nexport type GithubPullRequest = ExtractArrayType<\n    RestEndpointMethodTypes[\"pulls\"][\"list\"][\"response\"][\"data\"]\n>;\nexport type FullGithubPullRequest = RestEndpointMethodTypes[\"pulls\"][\"get\"][\"response\"][\"data\"];\n\nexport interface DirectoryItem {\n    path: string;\n    isDirectory: boolean;\n}\n\ntype IEvents = object;\n\n/* eslint-disable */\n\nasync function hook(request: any, route: any, parameters?: any): Promise<any> {\n    const endpoint = request.endpoint.merge(route as string, parameters);\n\n    if (configOptions.githubtoken.value) {\n        endpoint.headers.authorization = `token ${configOptions.githubtoken.value}`;\n    }\n\n    return request(endpoint);\n}\n\nasync function auth(): Promise<any> {\n    if (configOptions.githubtoken.value) {\n        return {\n            type: \"token\",\n            tokenType: \"pat\",\n            token: configOptions.githubtoken.value\n        };\n    } else {\n        return {\n            type: \"unauthenticated\"\n        };\n    }\n}\n\nconst authStrategy = () => {\n    return Object.assign(auth.bind(null), {\n        hook: hook.bind(null)\n    });\n};\n\n/* eslint-enable */\n\nconst e = new (class GithubClient extends TypedEmitter<IEvents> {\n    private readonly apiClient: Octokit;\n\n    public constructor() {\n        super();\n\n        const octo = Octokit.plugin(retry, throttling);\n\n        this.apiClient = new octo({\n            authStrategy,\n            userAgent: \"tgstation-server-control-panel/\" + VERSION,\n            baseUrl: \"https://api.github.com\",\n            throttle: {\n                onRateLimit: (retryAfter: number, options: Required<EndpointDefaults>) => {\n                    console.warn(\n                        `Request quota exhausted for request ${options.method} ${options.url}`\n                    );\n\n                    if (options.request.retryCount === 0) {\n                        // only retries once\n                        console.log(`Retrying after ${retryAfter} seconds!`);\n                        return true;\n                    }\n                    return false;\n                },\n                onSecondaryRateLimit: (_: number, options: Required<EndpointDefaults>) => {\n                    // does not retry, only logs a warning\n                    console.warn(`Abuse detected for request ${options.method} ${options.url}`);\n                }\n            }\n        });\n    }\n\n    public async getLatestDefaultCommit(\n        owner: string,\n        repo: string\n    ): Promise<InternalStatus<string, ErrorCode.GITHUB_FAIL>> {\n        try {\n            const repoData = await this.apiClient.repos.get({\n                owner,\n                repo\n            });\n\n            const branch = await this.apiClient.repos.getBranch({\n                owner,\n                repo,\n                branch: repoData.data.default_branch\n            });\n\n            return new InternalStatus({\n                code: StatusCode.OK,\n                payload: branch.data.commit.sha\n            });\n        } catch (e) {\n            return new InternalStatus<string, ErrorCode.GITHUB_FAIL>({\n                code: StatusCode.ERROR,\n                error: new InternalError(ErrorCode.GITHUB_FAIL, {\n                    jsError: e as RequestError\n                })\n            });\n        }\n    }\n\n    public async getVersions({\n        owner,\n        repo,\n        current,\n        all\n    }: {\n        owner: string;\n        repo: string;\n        current: string;\n        all?: boolean;\n    }): Promise<InternalStatus<TGSVersion[], ErrorCode.GITHUB_FAIL>> {\n        let payload: TGSVersion[];\n        let oldversions = 0;\n        try {\n            payload = await this.apiClient.paginate(\n                this.apiClient.repos.listReleases,\n                { owner, repo },\n                (response, done) => {\n                    return response.data.reduce((result, release) => {\n                        const match = /tgstation-server-v([\\d.]+)/.exec(release.name ?? \"\");\n                        if (!match) return result;\n\n                        const majorVersion = parseInt(match[1][0]);\n                        if (majorVersion < 4) return result;\n\n                        const version = match[1];\n                        let old = false;\n\n                        //show 3 outdated versions(2 if you count the current one)\n                        if (version <= current) {\n                            if (oldversions >= 3 && !all) {\n                                (done as () => void)();\n                                return result;\n                            }\n                            oldversions++;\n                            old = true;\n                        }\n\n                        result.push({\n                            version,\n                            body: release.body ?? \"\",\n                            current: version === current,\n                            old\n                        });\n                        return result;\n                    }, [] as TGSVersion[]);\n                }\n            );\n        } catch (e) {\n            return new InternalStatus<TGSVersion[], ErrorCode.GITHUB_FAIL>({\n                code: StatusCode.ERROR,\n                error: new InternalError(ErrorCode.GITHUB_FAIL, {\n                    jsError: e as RequestError\n                })\n            });\n        }\n        return new InternalStatus({\n            code: StatusCode.OK,\n            payload\n        });\n    }\n\n    private transformPR(pr: FullGithubPullRequest | GithubPullRequest): PullRequest {\n        return {\n            number: pr.number,\n            title: pr.title,\n            author: pr.user?.login ?? \"ghost\",\n            state: pr.merged_at ? \"merged\" : (pr.state as \"open\" | \"closed\"),\n            link: pr.html_url,\n            head: pr.head.sha,\n            tail: pr.base.sha,\n            testmergelabel: pr.labels.some(\n                label =>\n                    label.name?.toLowerCase().includes(\"testmerge\") ||\n                    label.name?.toLowerCase().includes(\"test merge\")\n            )\n        };\n    }\n\n    public async getPRs({\n        owner,\n        repo,\n        wantedPRs\n    }: {\n        owner: string;\n        repo: string;\n        wantedPRs?: number[];\n    }): Promise<InternalStatus<PullRequest[], ErrorCode.GITHUB_FAIL>> {\n        let payload: PullRequest[] = [];\n        try {\n            payload = (\n                await this.apiClient.paginate(this.apiClient.pulls.list, {\n                    owner,\n                    repo,\n                    state: \"open\"\n                })\n            ).map(this.transformPR);\n\n            for (const wantedPR of wantedPRs ?? []) {\n                if (!payload.find(pr => pr.number == wantedPR)) {\n                    const pr = (\n                        await this.apiClient.pulls.get({\n                            owner,\n                            repo,\n                            pull_number: wantedPR\n                        })\n                    ).data;\n                    payload.push(this.transformPR(pr));\n                }\n            }\n        } catch (e) {\n            console.error(e);\n            return new InternalStatus<PullRequest[], ErrorCode.GITHUB_FAIL>({\n                code: StatusCode.ERROR,\n                error: new InternalError(ErrorCode.GITHUB_FAIL, {\n                    jsError: e as RequestError\n                })\n            });\n        }\n        return new InternalStatus({\n            code: StatusCode.OK,\n            payload\n        });\n    }\n\n    public async getPRCommits({\n        owner,\n        repo,\n        pr,\n        wantedCommit\n    }: {\n        owner: string;\n        repo: string;\n        pr: PullRequest;\n        wantedCommit?: string;\n    }): Promise<InternalStatus<[commits: Commit[], extraCommit?: Commit], ErrorCode.GITHUB_FAIL>> {\n        let payload: Commit[] = [];\n        let extraCommit: Commit | undefined = undefined;\n        try {\n            payload = await this.apiClient.paginate(\n                this.apiClient.pulls.listCommits,\n                {\n                    owner,\n                    repo,\n                    pull_number: pr.number,\n                    per_page: 100\n                },\n                ({ data }) =>\n                    data.map(commit => ({\n                        name: commit.commit.message.split(\"\\n\")[0],\n                        sha: commit.sha,\n                        url: commit.html_url\n                    }))\n            );\n\n            //Newest at the top\n            payload.reverse();\n\n            if (wantedCommit && !payload.find(commit => commit.sha === wantedCommit)) {\n                const _extraCommit = (\n                    await this.apiClient.repos.getCommit({\n                        owner,\n                        repo,\n                        ref: wantedCommit\n                    })\n                ).data;\n                extraCommit = {\n                    name: _extraCommit.commit.message.split(\"\\n\")[0],\n                    sha: _extraCommit.sha,\n                    url: _extraCommit.html_url\n                };\n            }\n        } catch (e) {\n            console.error(e);\n            return new InternalStatus<\n                [commits: Commit[], extraCommit?: Commit],\n                ErrorCode.GITHUB_FAIL\n            >({\n                code: StatusCode.ERROR,\n                error: new InternalError(ErrorCode.GITHUB_FAIL, {\n                    jsError: e as RequestError\n                })\n            });\n        }\n        return new InternalStatus({\n            code: StatusCode.OK,\n            payload: [payload, extraCommit]\n        });\n    }\n\n    public async getFile(\n        owner: string,\n        repo: string,\n        path: string,\n        ref?: string\n    ): Promise<InternalStatus<string, ErrorCode.GITHUB_FAIL>> {\n        try {\n            const { data } = await this.apiClient.repos.getContent({\n                mediaType: {\n                    format: \"base64\"\n                },\n                owner,\n                repo,\n                path,\n                ref\n            });\n\n            // ignore directory responses\n            if (Array.isArray(data)) {\n                return new InternalStatus<string, ErrorCode.GITHUB_FAIL>({\n                    code: StatusCode.ERROR,\n                    error: new InternalError(ErrorCode.GITHUB_FAIL, {\n                        jsError: new Error(`${path} was a directory!`)\n                    })\n                });\n            }\n\n            if (data.type !== \"file\") {\n                return new InternalStatus<string, ErrorCode.GITHUB_FAIL>({\n                    code: StatusCode.ERROR,\n                    error: new InternalError(ErrorCode.GITHUB_FAIL, {\n                        jsError: new Error(`${path} has type ${data.type}!`)\n                    })\n                });\n            }\n\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-explicit-any\n            const raw = (data as any).content as string;\n\n            return new InternalStatus({\n                code: StatusCode.OK,\n                payload: raw\n            });\n        } catch (e) {\n            console.error(e);\n            return new InternalStatus<string, ErrorCode.GITHUB_FAIL>({\n                code: StatusCode.ERROR,\n                error: new InternalError(ErrorCode.GITHUB_FAIL, {\n                    jsError: e as RequestError\n                })\n            });\n        }\n    }\n\n    public async getDirectoryContents(\n        owner: string,\n        repo: string,\n        path: string,\n        ref?: string\n    ): Promise<InternalStatus<DirectoryItem[], ErrorCode.GITHUB_FAIL>> {\n        try {\n            const { data } = await this.apiClient.repos.getContent({\n                owner,\n                repo,\n                path,\n                ref\n            });\n\n            // ignore non-directory responses\n            if (!Array.isArray(data)) {\n                return new InternalStatus<DirectoryItem[], ErrorCode.GITHUB_FAIL>({\n                    code: StatusCode.ERROR,\n                    error: new InternalError(ErrorCode.GITHUB_FAIL, {\n                        jsError: new Error(`${path} was not a directory!`)\n                    })\n                });\n            }\n\n            const result: DirectoryItem[] = [];\n            data.forEach(element =>\n                result.push({\n                    path: element.path,\n                    isDirectory: element.type == \"dir\"\n                })\n            );\n\n            return new InternalStatus({\n                code: StatusCode.OK,\n                payload: result\n            });\n        } catch (e) {\n            console.error(e);\n            return new InternalStatus<DirectoryItem[], ErrorCode.GITHUB_FAIL>({\n                code: StatusCode.ERROR,\n                error: new InternalError(ErrorCode.GITHUB_FAIL, {\n                    jsError: e as RequestError\n                })\n            });\n        }\n    }\n})();\nexport default e;\n"],"names":["JsonViewer","props","React","ReactJson","src","obj","name","theme","iconStyle","collapsed","displayDataTypes","DebugJsonViewer","configOptions","showjson","value","className","TgsComponent","Update","constructor","super","this","loadNotes","bind","updateServer","state","changelog","versions","errors","loading","gitHubOwner","gitHubRepo","componentDidMount","loadVersions","setState","componentWillUnmount","timer","window","clearInterval","addError","error","prevState","Array","from","push","hasAdminRight","resolvePermissionSet","context","user","AdministrationRights","ChangeVersion","adminInfo","AdminClient","getAdminInfo","code","StatusCode","ERROR","OK","url","payload","trackedRepositoryUrl","results","exec","InternalError","ErrorCode","APP_FAIL","jsError","Error","body","version","current","old","loadChangelogPromise","loadChangelog","versionInfo","GithubClient","getVersions","owner","repo","serverInfo","all","match","params","console","log","changelogYmlB64","getFile","changelogYml","atob","YAML","BAD_YML","void","selectedOption","setInterval","undefined","secondsLeft","selectedVersion","uploadVersion","inputPromise","Promise","resolve","input","document","createElement","type","onchange","e","files","target","click","localFile","toLowerCase","endsWith","alert","fileData","arrayBuffer","targetVersionStr","prompt","targetVersionSemver","SemVer","targetVersion","major","minor","patch","confirm","serverUpdated","request","response","ServerClient","autoLogin","async","UserClient","getCurrentUser","location","reload","updating","buildVersionDiffFromChangelog","releaseNotes","currentVersion","currentVersionSemver","markdown","targetComponentVersions","Components","Core","find","changelist","Version","ComponentVersions","lowerVersion","higherVersion","Configuration","HttpApi","DreamMakerApi","InteropApi","WebControlPanel","HostWatchdog","lowerVersionSemver","higherVersionSemver","coreChangelists","filter","changelistVersionSemver","gte","lte","sort","changelistA","changelistB","compare","reverse","currentReleaseChangelists","i","length","currentDic","Map","nowRelease","previousRelease","set","Object","keys","forEach","componentStr","component","componentVersionStr","componentVersion","NugetClient","NugetApi","NugetCommon","takeNotesFrom","changesEnumerator","changelistVersion","flatMap","x","Changes","changeA","changeB","PullRequest","releaseDictionary","coreCl","get","coreVersion","componentE","componentDisplayName","change","Descriptions","line","Author","componentS","render","Loading","text","handleChange","changeEvent","permissionSet","canChangeVersion","canUploadVersion","UploadVersion","selectedVersionMarkdown","replaceAll","selectedVersionIsDifferentMajor","closeWarningModal","warnedAboutMajorUpdates","timing","map","err","index","ErrorAlert","key","onClose","prev","newarr","Modal","centered","show","onHide","size","Header","closeButton","Title","FormattedMessage","id","Body","values","currentMajor","targetMajor","Footer","Button","variant","onClick","ReactMarkdown","OverlayTrigger","overlay","Tooltip","placement","disabled","Col","xs","md","InputGroup","Prepend","Radio","checked","onChange","FormControl","as","htmlFor","history","AppRoutes","admin_update","link","route","ref","triggerHandler","_extends","FontAwesomeIcon","icon","faUpload","contextType","GeneralContext","withRouter","hook","parameters","endpoint","merge","githubtoken","headers","authorization","auth","tokenType","token","authStrategy","assign","TypedEmitter","apiClient","octo","Octokit","plugin","retry","throttling","userAgent","VERSION","baseUrl","throttle","onRateLimit","retryAfter","options","warn","method","retryCount","onSecondaryRateLimit","_","getLatestDefaultCommit","repoData","repos","branch","getBranch","data","default_branch","InternalStatus","commit","sha","GITHUB_FAIL","oldversions","paginate","listReleases","done","reduce","result","release","parseInt","transformPR","pr","number","title","author","login","merged_at","html_url","head","tail","base","testmergelabel","labels","some","label","includes","getPRs","wantedPRs","pulls","list","wantedPR","pull_number","getPRCommits","wantedCommit","extraCommit","listCommits","per_page","message","split","_extraCommit","getCommit","path","getContent","mediaType","format","isArray","raw","content","getDirectoryContents","element","isDirectory"],"sourceRoot":""}
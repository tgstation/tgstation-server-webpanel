"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[9272,6983],{6795:function(e,t,a){a.d(t,{Q:function(){return c}});var r=a(6540),s=a(8785),n=a.n(s),o=a(8437);function l(e){return r.createElement(n(),{src:e.obj,name:"JSON",theme:"tube",iconStyle:"triangle",collapsed:!0,displayDataTypes:!1})}function c(e){return o.Ay.showjson.value?r.createElement("div",{className:"text-left"},r.createElement(l,{obj:e.obj})):r.createElement(r.Fragment,null)}},5282:function(e,t,a){a.d(t,{A:function(){return m}});var r=a(6784),s=a(6540),n=a(5615),o=a(1208),l=a(5038),c=a(1069),i=a(3899),p=a(8065);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u.apply(null,arguments)}class m extends s.PureComponent{constructor(e){super(e),this.state={showGoto:!1,gotoValue:e.currentPage}}render(){const e=[],t=Math.max(this.props.totalPages-this.props.currentPage-1,0),a=Math.max(this.props.currentPage-2,0),m=Math.max(this.props.currentPage-Math.max(5-Number(this.props.currentPage!==this.props.totalPages)-t,2),2),d=Math.min(this.props.currentPage+Math.max(5-Number(1!==this.props.currentPage)-a,2),this.props.totalPages-1);for(let t=m;t<=d;t++)e.push(s.createElement(c.A.Item,{key:t,active:t===this.props.currentPage,onClick:()=>this.props.selectPage(t)},t));const h=this.props.totalPages>7?s.createElement(c.A.Ellipsis,{disabled:!0}):null,f=s.createElement(i.A,{id:"popover-gotopage"},s.createElement(i.A.Title,null,s.createElement(p.A,{id:"generic.goto.title"})),s.createElement(i.A.Content,null,s.createElement("form",{className:"d-flex",onSubmit:e=>{e.preventDefault(),this.props.selectPage(this.state.gotoValue),this.setState({showGoto:!1})}},s.createElement(o.A.Control,{className:"mr-2",type:"number",min:1,max:this.props.totalPages,value:this.state.gotoValue,onChange:e=>this.setState({gotoValue:parseInt(e.target.value)}),custom:!0}),s.createElement(n.A,{type:"submit"},s.createElement(p.A,{id:"generic.goto"}))))),{selectPage:g,totalPages:P,currentPage:v,...E}=this.props;return s.createElement("div",u({className:"text-center",style:{position:"sticky",bottom:"1.5em"}},E),s.createElement(c.A,{className:"justify-content-center"},s.createElement(c.A.Prev,{disabled:this.props.currentPage<=1,onClick:()=>this.props.selectPage(Math.max(this.props.currentPage-1,1))}),s.createElement(c.A.Item,{active:this.props.currentPage<=1,onClick:()=>this.props.selectPage(1)},"1"),h,e,h,this.props.totalPages>=2?s.createElement(c.A.Item,{active:this.props.currentPage>=this.props.totalPages,onClick:()=>this.props.selectPage(this.props.totalPages)},this.props.totalPages):null,this.props.totalPages>7?s.createElement(l.A,{show:this.state.showGoto,placement:"top",overlay:f},s.createElement(c.A.Item,{onClick:()=>this.setState((e=>({showGoto:!e.showGoto})))},s.createElement(r.g,{icon:"search"}))):null,s.createElement(c.A.Next,{disabled:this.props.currentPage>=this.props.totalPages,onClick:()=>this.props.selectPage(Math.min(this.props.currentPage+1,this.props.totalPages))})))}}},9272:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var r=a(6540),s=a(4295),n=a(5301),o=a(379),l=a(7621),c=a(664),i=a(7567),p=a(2306),u=a(6795),m=a(7255),d=a(5282);function h(){const e=r.useContext(l.z),[t,a]=(0,r.useState)([]),[h,f]=(0,r.useState)([]),[g,P]=(0,r.useState)(!0),[v,E]=(0,r.useState)(c.M2.jobhistorypage.get(e.instance.id)??1),[b,A]=(0,r.useState)(void 0);function y(e){f((t=>{const a=Array.from(t);return a.push(e),a}))}return(0,r.useEffect)((()=>{c.M2.jobhistorypage.set(e.instance.id,v),P(!0),async function(){const t=await s.A.listJobs(e.instance.id,{page:v});t.code===n.s.OK?(v>t.payload.totalPages&&0!==t.payload.totalPages&&E(1),a(t.payload.content),A(t.payload.totalPages)):y(t.error),P(!1)}()}),[v,e.instance.id]),(0,r.useEffect)((()=>{}),[h]),g?r.createElement(m.default,{text:"loading.instance.jobs.list"}):r.createElement("div",null,r.createElement(u.Q,{obj:t}),h.map(((e,t)=>{if(e)return r.createElement(i.Ay,{key:t,error:e,onClose:()=>f((e=>{const a=Array.from(e);return a[t]=void 0,a}))})})),t.sort(((e,t)=>t.id-e.id)).filter((e=>!!e.stoppedAt)).map((e=>r.createElement(p.A,{job:e,key:e.id,onCancel:e=>{!async function(e){const t=await s.A.deleteJob(e.instanceId,e.id);t.code===n.s.OK?o.default.fastmode=5:y(t.error)}(e)}}))),r.createElement(d.A,{selectPage:e=>E(e),totalPages:b??1,currentPage:v}))}},7621:function(e,t,a){a.d(t,{z:function(){return r}});const r=a(6540).createContext(void 0)},1069:function(e,t,a){a.d(t,{A:function(){return y}});var r=a(8168),s=a(8587),n=a(2485),o=a.n(n),l=a(6540),c=a(6519),i=a(9703),p=["active","disabled","className","style","activeLabel","children"],u=["children"],m=l.forwardRef((function(e,t){var a=e.active,n=e.disabled,c=e.className,u=e.style,m=e.activeLabel,d=e.children,h=(0,s.A)(e,p),f=a||n?"span":i.A;return l.createElement("li",{ref:t,style:u,className:o()(c,"page-item",{active:a,disabled:n})},l.createElement(f,(0,r.A)({className:"page-link",disabled:n},h),d,a&&m&&l.createElement("span",{className:"sr-only"},m)))}));m.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},m.displayName="PageItem";var d=m;function h(e,t,a){function r(e){var r=e.children,n=(0,s.A)(e,u);return l.createElement(m,n,l.createElement("span",{"aria-hidden":"true"},r||t),l.createElement("span",{className:"sr-only"},a))}return void 0===a&&(a=e),r.displayName=e,r}var f=h("First","\xab"),g=h("Prev","\u2039","Previous"),P=h("Ellipsis","\u2026","More"),v=h("Next","\u203a"),E=h("Last","\xbb"),b=["bsPrefix","className","children","size"],A=l.forwardRef((function(e,t){var a=e.bsPrefix,n=e.className,i=e.children,p=e.size,u=(0,s.A)(e,b),m=(0,c.oU)(a,"pagination");return l.createElement("ul",(0,r.A)({ref:t},u,{className:o()(n,m,p&&m+"-"+p)}),i)}));A.First=f,A.Prev=g,A.Ellipsis=P,A.Item=d,A.Next=v,A.Last=E;var y=A},3899:function(e,t,a){a.d(t,{A:function(){return f}});var r=a(8168),s=a(8587),n=a(2485),o=a.n(n),l=a(6540),c=(a(8239),a(6519)),i=["as","bsPrefix","className","children"],p=l.forwardRef((function(e,t){var a=e.as,n=void 0===a?"div":a,p=e.bsPrefix,u=e.className,m=e.children,d=(0,s.A)(e,i);return p=(0,c.oU)(p,"popover-header"),l.createElement(n,(0,r.A)({ref:t},d,{className:o()(p,u)}),m)})),u=["as","bsPrefix","className","children"],m=l.forwardRef((function(e,t){var a=e.as,n=void 0===a?"div":a,i=e.bsPrefix,p=e.className,m=e.children,d=(0,s.A)(e,u);return i=(0,c.oU)(i,"popover-body"),l.createElement(n,(0,r.A)({ref:t},d,{className:o()(p,i)}),m)})),d=["bsPrefix","placement","className","style","children","content","arrowProps","popper","show"],h=l.forwardRef((function(e,t){var a=e.bsPrefix,n=e.placement,i=e.className,p=e.style,u=e.children,h=e.content,f=e.arrowProps,g=(e.popper,e.show,(0,s.A)(e,d)),P=(0,c.oU)(a,"popover"),v=((null==n?void 0:n.split("-"))||[])[0];return l.createElement("div",(0,r.A)({ref:t,role:"tooltip",style:p,"x-placement":v,className:o()(i,P,v&&"bs-popover-"+v)},g),l.createElement("div",(0,r.A)({className:"arrow"},f)),h?l.createElement(m,null,u):u)}));h.defaultProps={placement:"right"},h.Title=p,h.Content=m;var f=h}}]);
//# sourceMappingURL=9272.e34b9f6b21b5788eaef2.bundle.js.map
"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[746,657],{8425:function(e,t,r){r.d(t,{t:function(){return c}});var a=r(67294),s=r(55171),n=r.n(s),l=r(27961);function i(e){return a.createElement(n(),{src:e.obj,name:"JSON",theme:"tube",iconStyle:"triangle",collapsed:!0,displayDataTypes:!1})}function c(e){return l.ZP.showjson.value?a.createElement("div",{className:"text-left"},a.createElement(i,{obj:e.obj})):a.createElement(a.Fragment,null)}},89929:function(e,t,r){r.d(t,{Z:function(){return d}});var a=r(67814),s=r(67294),n=r(35005),l=r(32258),i=r(15293),c=r(38966),o=r(19611),m=r(44012);function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},p.apply(this,arguments)}class d extends s.PureComponent{constructor(e){super(e),this.state={showGoto:!1,gotoValue:e.currentPage}}render(){const e=[],t=Math.max(this.props.totalPages-this.props.currentPage-1,0),r=Math.max(this.props.currentPage-2,0),d=Math.max(this.props.currentPage-Math.max(5-Number(this.props.currentPage!==this.props.totalPages)-t,2),2),u=Math.min(this.props.currentPage+Math.max(5-Number(1!==this.props.currentPage)-r,2),this.props.totalPages-1);for(let t=d;t<=u;t++)e.push(s.createElement(c.Z.Item,{key:t,active:t===this.props.currentPage,onClick:()=>this.props.selectPage(t)},t));const h=this.props.totalPages>7?s.createElement(c.Z.Ellipsis,{disabled:!0}):null,g=s.createElement(o.Z,{id:"popover-gotopage"},s.createElement(o.Z.Title,null,s.createElement(m.Z,{id:"generic.goto.title"})),s.createElement(o.Z.Content,null,s.createElement("form",{className:"d-flex",onSubmit:e=>{e.preventDefault(),this.props.selectPage(this.state.gotoValue),this.setState({showGoto:!1})}},s.createElement(l.Z.Control,{className:"mr-2",type:"number",min:1,max:this.props.totalPages,value:this.state.gotoValue,onChange:e=>this.setState({gotoValue:parseInt(e.target.value)}),custom:!0}),s.createElement(n.Z,{type:"submit"},s.createElement(m.Z,{id:"generic.goto"}))))),{selectPage:E,totalPages:v,currentPage:f,...Z}=this.props;return s.createElement("div",p({className:"text-center",style:{position:"sticky",bottom:"1.5em"}},Z),s.createElement(c.Z,{className:"justify-content-center"},s.createElement(c.Z.Prev,{disabled:this.props.currentPage<=1,onClick:()=>this.props.selectPage(Math.max(this.props.currentPage-1,1))}),s.createElement(c.Z.Item,{active:this.props.currentPage<=1,onClick:()=>this.props.selectPage(1)},"1"),h,e,h,this.props.totalPages>=2?s.createElement(c.Z.Item,{active:this.props.currentPage>=this.props.totalPages,onClick:()=>this.props.selectPage(this.props.totalPages)},this.props.totalPages):null,this.props.totalPages>7?s.createElement(i.Z,{show:this.state.showGoto,placement:"top",overlay:g},s.createElement(c.Z.Item,{onClick:()=>this.setState((e=>({showGoto:!e.showGoto})))},s.createElement(a.G,{icon:"search"}))):null,s.createElement(c.Z.Next,{disabled:this.props.currentPage>=this.props.totalPages,onClick:()=>this.props.selectPage(Math.min(this.props.currentPage+1,this.props.totalPages))})))}}},1841:function(e,t,r){r.d(t,{Z:function(){return l}});var a=r(67294),s=r(27977),n=r(44012);class l extends a.Component{render(){const e=this.props.user;return a.createElement(a.Fragment,null,e.systemIdentifier?a.createElement(s.Z,{variant:"primary",className:"mx-1"},a.createElement(n.Z,{id:"generic.system.short"})):a.createElement(s.Z,{variant:"primary",className:"mx-1"},a.createElement(n.Z,{id:"generic.tgs"})),e.enabled?a.createElement(s.Z,{variant:"success",className:"mx-1"},a.createElement(n.Z,{id:"generic.enabled"})):a.createElement(s.Z,{variant:"danger",className:"mx-1"},a.createElement(n.Z,{id:"generic.disabled"})),e.group?a.createElement(s.Z,{variant:"warning",className:"mx-1"},a.createElement(n.Z,{id:"generic.grouped"})):null)}}},8746:function(e,t,r){r.r(t);var a=r(67294),s=r(88375),n=r(35005),l=r(15293),i=r(75147),c=r(43489),o=r(44012),m=r(48272),p=r(5977),d=r(73727),u=r(48509),h=r(53803),g=r(16942),E=r(16964),v=r(1320),f=r(3e3),Z=r(8425),P=r(35855),b=r(89929),y=r(1841);t.default=(0,p.EN)(class extends a.Component{constructor(e){super(e),this.state={errors:[],users:[],loading:!0,canList:!1,page:v.Mq.userlistpage??1}}addError(e){this.setState((t=>{const r=Array.from(t.errors);return r.push(e),{errors:r}}))}async loadUsers(){if(this.setState({loading:!0}),this.state.canList){const e=await g.Z.listUsers({page:this.state.page});switch(e.code){case h.G.OK:this.state.page>e.payload.totalPages&&0!==e.payload.totalPages&&this.setState({page:1}),this.setState({users:e.payload.content,maxPage:e.payload.totalPages});break;case h.G.ERROR:this.addError(e.error)}}else{const e=await g.Z.getCurrentUser();e.code===h.G.OK?this.setState({users:[e.payload]}):this.addError(e.error)}this.setState({loading:!1})}async componentDidUpdate(e,t){t.page!==this.state.page&&(v.Mq.userlistpage=this.state.page,await this.loadUsers())}async componentDidMount(){const e=await g.Z.getCurrentUser();if(e.code==h.G.OK){const t=!!((0,E.Zg)(e.payload).administrationRights&u.oj.ReadUsers);this.setState({canList:t}),await this.loadUsers()}else this.addError(e.error);this.setState({loading:!1})}render(){return this.state.loading?a.createElement(P.Z,{text:"loading.userlist"}):a.createElement("div",{className:"text-center"},a.createElement(Z.t,{obj:this.state.users}),this.state.canList?"":a.createElement(s.Z,{className:"clearfix",variant:"error"},a.createElement(o.Z,{id:"view.user.list.cantlist"})),this.state.errors.map(((e,t)=>{if(e)return a.createElement(f.ZP,{key:t,error:e,onClose:()=>this.setState((e=>{const r=Array.from(e.errors);return r[t]=void 0,{errors:r}}))})})),a.createElement(i.Z,{striped:!0,bordered:!0,hover:!0,variant:"dark",responsive:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"#"),a.createElement("th",null,a.createElement(o.Z,{id:"generic.name"})),a.createElement("th",null,a.createElement(o.Z,{id:"generic.details"})),a.createElement("th",null,a.createElement(o.Z,{id:"generic.group"})),a.createElement("th",null,a.createElement(o.Z,{id:"generic.created"})),a.createElement("th",null,a.createElement(o.Z,{id:"generic.createdby"})),a.createElement("th",null,a.createElement(o.Z,{id:"generic.action"})))),a.createElement("tbody",null,this.state.users.map((e=>{const t=new Date(e.createdAt),r=(t.getTime()-Date.now())/1e3;return a.createElement("tr",{key:e.id},a.createElement("td",null,e.id),a.createElement("td",null,e.name),a.createElement("td",null,a.createElement(y.Z,{user:e})),e.group?a.createElement(l.Z,{overlay:a.createElement(c.Z,{id:`${e.name}-tooltip-group`},a.createElement(o.Z,{id:"generic.groupid",values:{id:e.group.id}}))},(({ref:t,...r})=>a.createElement("td",r,a.createElement("span",{ref:t},e.group.name)))):a.createElement("td",null),a.createElement(l.Z,{overlay:a.createElement(c.Z,{id:`${e.name}-tooltip`},t.toLocaleString())},(({ref:e,...t})=>a.createElement("td",t,a.createElement("span",{ref:e},a.createElement(m.Z,{value:r,numeric:"auto",updateIntervalInSeconds:1}))))),a.createElement(l.Z,{overlay:a.createElement(c.Z,{id:`${e.name}-tooltip-createdby`},a.createElement(o.Z,{id:"generic.userid"}),e.createdBy.id)},(({ref:t,...r})=>a.createElement("td",r,a.createElement("span",{ref:t},e.createdBy.name)))),a.createElement("td",{className:"align-middle p-0"},a.createElement(n.Z,{onClick:()=>{v.Mq.selecteduserid=e.id,this.props.history.push(v.$w.useredit.link??v.$w.useredit.route)}},a.createElement(o.Z,{id:"generic.edit"}))))})))),a.createElement(b.Z,{selectPage:e=>this.setState({page:e}),totalPages:this.state.maxPage??1,currentPage:this.state.page}),a.createElement(n.Z,{as:d.rU,to:v.$w.usercreate.link??v.$w.usercreate.route},a.createElement(o.Z,{id:"routes.usercreate"})))}})},27977:function(e,t,r){var a=r(87462),s=r(63366),n=r(94184),l=r.n(n),i=r(67294),c=r(76792),o=["bsPrefix","variant","pill","className","as"],m=i.forwardRef((function(e,t){var r=e.bsPrefix,n=e.variant,m=e.pill,p=e.className,d=e.as,u=void 0===d?"span":d,h=(0,s.Z)(e,o),g=(0,c.vE)(r,"badge");return i.createElement(u,(0,a.Z)({ref:t},h,{className:l()(p,g,m&&g+"-pill",n&&g+"-"+n)}))}));m.displayName="Badge",m.defaultProps={pill:!1},t.Z=m},38966:function(e,t,r){r.d(t,{Z:function(){return y}});var a=r(87462),s=r(63366),n=r(94184),l=r.n(n),i=r(67294),c=r(76792),o=r(48358),m=["active","disabled","className","style","activeLabel","children"],p=["children"],d=i.forwardRef((function(e,t){var r=e.active,n=e.disabled,c=e.className,p=e.style,d=e.activeLabel,u=e.children,h=(0,s.Z)(e,m),g=r||n?"span":o.Z;return i.createElement("li",{ref:t,style:p,className:l()(c,"page-item",{active:r,disabled:n})},i.createElement(g,(0,a.Z)({className:"page-link",disabled:n},h),u,r&&d&&i.createElement("span",{className:"sr-only"},d)))}));d.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},d.displayName="PageItem";var u=d;function h(e,t,r){function a(e){var a=e.children,n=(0,s.Z)(e,p);return i.createElement(d,n,i.createElement("span",{"aria-hidden":"true"},a||t),i.createElement("span",{className:"sr-only"},r))}return void 0===r&&(r=e),a.displayName=e,a}var g=h("First","\xab"),E=h("Prev","\u2039","Previous"),v=h("Ellipsis","\u2026","More"),f=h("Next","\u203a"),Z=h("Last","\xbb"),P=["bsPrefix","className","children","size"],b=i.forwardRef((function(e,t){var r=e.bsPrefix,n=e.className,o=e.children,m=e.size,p=(0,s.Z)(e,P),d=(0,c.vE)(r,"pagination");return i.createElement("ul",(0,a.Z)({ref:t},p,{className:l()(n,d,m&&d+"-"+m)}),o)}));b.First=g,b.Prev=E,b.Ellipsis=v,b.Item=u,b.Next=f,b.Last=Z;var y=b},19611:function(e,t,r){r.d(t,{Z:function(){return g}});var a=r(87462),s=r(63366),n=r(94184),l=r.n(n),i=r(67294),c=(r(55638),r(76792)),o=["as","bsPrefix","className","children"],m=i.forwardRef((function(e,t){var r=e.as,n=void 0===r?"div":r,m=e.bsPrefix,p=e.className,d=e.children,u=(0,s.Z)(e,o);return m=(0,c.vE)(m,"popover-header"),i.createElement(n,(0,a.Z)({ref:t},u,{className:l()(m,p)}),d)})),p=["as","bsPrefix","className","children"],d=i.forwardRef((function(e,t){var r=e.as,n=void 0===r?"div":r,o=e.bsPrefix,m=e.className,d=e.children,u=(0,s.Z)(e,p);return o=(0,c.vE)(o,"popover-body"),i.createElement(n,(0,a.Z)({ref:t},u,{className:l()(m,o)}),d)})),u=["bsPrefix","placement","className","style","children","content","arrowProps","popper","show"],h=i.forwardRef((function(e,t){var r=e.bsPrefix,n=e.placement,o=e.className,m=e.style,p=e.children,h=e.content,g=e.arrowProps,E=(e.popper,e.show,(0,s.Z)(e,u)),v=(0,c.vE)(r,"popover"),f=((null==n?void 0:n.split("-"))||[])[0];return i.createElement("div",(0,a.Z)({ref:t,role:"tooltip",style:m,"x-placement":f,className:l()(o,v,f&&"bs-popover-"+f)},E),i.createElement("div",(0,a.Z)({className:"arrow"},g)),h?i.createElement(d,null,p):p)}));h.defaultProps={placement:"right"},h.Title=m,h.Content=d;var g=h},75147:function(e,t,r){var a=r(87462),s=r(63366),n=r(94184),l=r.n(n),i=r(67294),c=r(76792),o=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],m=i.forwardRef((function(e,t){var r=e.bsPrefix,n=e.className,m=e.striped,p=e.bordered,d=e.borderless,u=e.hover,h=e.size,g=e.variant,E=e.responsive,v=(0,s.Z)(e,o),f=(0,c.vE)(r,"table"),Z=l()(n,f,g&&f+"-"+g,h&&f+"-"+h,m&&f+"-striped",p&&f+"-bordered",d&&f+"-borderless",u&&f+"-hover"),P=i.createElement("table",(0,a.Z)({},v,{className:Z,ref:t}));if(E){var b=f+"-responsive";return"string"==typeof E&&(b=b+"-"+E),i.createElement("div",{className:b},P)}return P}));t.Z=m}}]);
//# sourceMappingURL=746.24e79402e2a97d9d230f.bundle.js.map
"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[8463,6983],{1512:function(e,t,a){a.d(t,{A:function(){return l}});var i=a(6540),n=a(5038),s=a(3524),r=a(8065);function l(e){return i.createElement(n.A,{show:e.show,overlay:i.createElement(s.A,{id:e.tooltipid},i.createElement(r.A,{id:e.tooltipid}))},e.children)}},5998:function(e,t,a){a.r(t),a.d(t,{Deployment:function(){return N}});var i=a(6540),n=a(5615),s=a(8065),r=a(1930),l=a(2576),o=a(5301),c=a(379),d=a(7621),p=a(4118),m=a(9956),u=a(7567),f=a(5659),v=a(1723),y=a(6113),b=a(6795),A=a(7255),P=a(1512);function N(){const e=(0,i.useContext)(d.z),t=(0,i.useState)([]),[a,N]=(0,i.useState)(!0),[E,h]=(0,i.useState)(null),[g,S]=(0,i.useState)(null),[w,x]=(0,i.useState)(1),[C,R]=(0,i.useState)(0),[V,G]=(0,i.useState)(5),U=(0,p.eG)(e.instancePermissionSet,l.rY.Read),D=(0,p.eG)(e.instancePermissionSet,l.rY.Compile),_=(0,p.eG)(e.instancePermissionSet,l.rY.CompileJobs);async function I(){if(!U)return N(!1);N(!0);const a=await r.A.getDeployInfo(e.instance.id);N(!1),a.code===o.s.OK?h(a.payload):(0,u.CN)(t,a.error)}async function Y(a){if(!_)return;S(null);const i=await r.A.listCompileJobs(e.instance.id,{page:a,pageSize:V});i.code===o.s.OK?(V||G(i.payload.pageSize),R(i.payload.totalPages),x(a),S(i.payload.content)):(0,u.CN)(t,i.error)}let z;(0,i.useEffect)((()=>{I(),Y(1)}),[e.instance.id]);const L=/(?:(?<days>\d+)\.)?(?<hours>\d+):(?<minutes>\d+):(?<seconds>\d+)/.exec(E?.timeout??"");if(L){const e=L.groups;z=60*(24*parseInt(e.days??0)+parseInt(e.hours))+parseInt(e.minutes)+parseInt(e.seconds)/60}const M={projectName:{type:v.PU.String,name:"fields.instance.deploy.projectname",tooltip:"fields.instance.deploy.projectname.desc",defaultValue:E?.projectName,disabled:!(0,p.eG)(e.instancePermissionSet,l.rY.SetDme)},compilerAdditionalArguments:{type:v.PU.String,name:"fields.instance.deploy.compilerargs",tooltip:"fields.instance.deploy.compilerargs.desc",defaultValue:E?.compilerAdditionalArguments,disabled:!(0,p.eG)(e.instancePermissionSet,l.rY.SetCompilerArguments)},timeout:{type:v.PU.Number,name:"fields.instance.deploy.timeout",tooltip:"fields.instance.deploy.timeout.desc",defaultValue:z,disabled:!(0,p.eG)(e.instancePermissionSet,l.rY.SetTimeout)},apiValidationPort:{type:v.PU.Number,min:0,max:65535,name:"fields.instance.deploy.apiport",tooltip:"fields.instance.deploy.apiport.desc",defaultValue:E?.apiValidationPort,disabled:!(0,p.eG)(e.instancePermissionSet,l.rY.SetApiValidationPort)},apiValidationSecurityLevel:{type:v.PU.Enum,enum:l.GZ,name:"fields.instance.deploy.seclevel",tooltip:"fields.instance.deploy.seclevel.desc",defaultValue:E?.apiValidationSecurityLevel,disabled:!(0,p.eG)(e.instancePermissionSet,l.rY.SetSecurityLevel)},requireDMApiValidation:{type:v.PU.Boolean,name:"fields.instance.deploy.validateapi",tooltip:"fields.instance.deploy.validateapi.desc",defaultValue:E?.requireDMApiValidation,disabled:!(0,p.eG)(e.instancePermissionSet,l.rY.SetApiValidationRequirement)}};let $=null;const j={currentPage:w,totalPages:C,loadPage:Y,pageSize:V??0};return _?g&&($={viewDataType:m.G.CompileJobs,compileJobs:g,paging:j}):$={viewDataType:m.G.CompileJobs,paging:j},i.createElement("div",{className:"text-center"},i.createElement(b.Q,{obj:{deployInfo:E}}),(0,u.u9)(t),_?i.createElement(m.A,{viewData:$}):i.createElement(f.A,{title:"view.instance.no_compile_jobs"}),i.createElement("hr",null),i.createElement("h3",null,i.createElement(s.A,{id:"view.instance.deploy.title"})),U?null:i.createElement(f.A,{title:"view.instance.no_metadata"}),a?i.createElement(A.default,{text:"loading.deployments"}):i.createElement(i.Fragment,null,i.createElement(y.A,{hideDisabled:!U,fields:M,onSave:async a=>{let i;if(a.timeout){const e=Math.floor(a.timeout/1440);a.timeout-=1440*e;const t=Math.floor(a.timeout/60);a.timeout-=60*t;const n=Math.floor(a.timeout);a.timeout-=n;const s=Math.floor(60*a.timeout);i=e?`${e}.${t}:${n}:${s}`:`${t}:${n}:${s}`}const n={...a,timeout:i};N(!0);const s=await r.A.updateDeployInfo(e.instance.id,n);s.code===o.s.ERROR?(0,u.CN)(t,s.error):await I(),N(!1)}}),i.createElement("hr",null),i.createElement(P.A,{tooltipid:"generic.no_perm",show:!D&&void 0},i.createElement(n.A,{disabled:!D,onClick:()=>{(async()=>{const a=await r.A.startCompile(e.instance.id);a.code===o.s.ERROR?(0,u.CN)(t,a.error):(c.default.registerJob(a.payload,e.instance.id),c.default.fastmode=5)})()}},i.createElement(s.A,{id:"view.instance.deploy.deploy"})))))}},6052:function(e,t,a){var i=a(8168),n=a(8587),s=a(2485),r=a.n(s),l=a(6540),o=a(6519),c=["bsPrefix","variant","pill","className","as"],d=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.variant,d=e.pill,p=e.className,m=e.as,u=void 0===m?"span":m,f=(0,n.A)(e,c),v=(0,o.oU)(a,"badge");return l.createElement(u,(0,i.A)({ref:t},f,{className:r()(p,v,d&&v+"-pill",s&&v+"-"+s)}))}));d.displayName="Badge",d.defaultProps={pill:!1},t.A=d},1069:function(e,t,a){a.d(t,{A:function(){return h}});var i=a(8168),n=a(8587),s=a(2485),r=a.n(s),l=a(6540),o=a(6519),c=a(9703),d=["active","disabled","className","style","activeLabel","children"],p=["children"],m=l.forwardRef((function(e,t){var a=e.active,s=e.disabled,o=e.className,p=e.style,m=e.activeLabel,u=e.children,f=(0,n.A)(e,d),v=a||s?"span":c.A;return l.createElement("li",{ref:t,style:p,className:r()(o,"page-item",{active:a,disabled:s})},l.createElement(v,(0,i.A)({className:"page-link",disabled:s},f),u,a&&m&&l.createElement("span",{className:"sr-only"},m)))}));m.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},m.displayName="PageItem";var u=m;function f(e,t,a){function i(e){var i=e.children,s=(0,n.A)(e,p);return l.createElement(m,s,l.createElement("span",{"aria-hidden":"true"},i||t),l.createElement("span",{className:"sr-only"},a))}return void 0===a&&(a=e),i.displayName=e,i}var v=f("First","\xab"),y=f("Prev","\u2039","Previous"),b=f("Ellipsis","\u2026","More"),A=f("Next","\u203a"),P=f("Last","\xbb"),N=["bsPrefix","className","children","size"],E=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.className,c=e.children,d=e.size,p=(0,n.A)(e,N),m=(0,o.oU)(a,"pagination");return l.createElement("ul",(0,i.A)({ref:t},p,{className:r()(s,m,d&&m+"-"+d)}),c)}));E.First=v,E.Prev=y,E.Ellipsis=b,E.Item=u,E.Next=A,E.Last=P;var h=E},3899:function(e,t,a){a.d(t,{A:function(){return v}});var i=a(8168),n=a(8587),s=a(2485),r=a.n(s),l=a(6540),o=(a(8239),a(6519)),c=["as","bsPrefix","className","children"],d=l.forwardRef((function(e,t){var a=e.as,s=void 0===a?"div":a,d=e.bsPrefix,p=e.className,m=e.children,u=(0,n.A)(e,c);return d=(0,o.oU)(d,"popover-header"),l.createElement(s,(0,i.A)({ref:t},u,{className:r()(d,p)}),m)})),p=["as","bsPrefix","className","children"],m=l.forwardRef((function(e,t){var a=e.as,s=void 0===a?"div":a,c=e.bsPrefix,d=e.className,m=e.children,u=(0,n.A)(e,p);return c=(0,o.oU)(c,"popover-body"),l.createElement(s,(0,i.A)({ref:t},u,{className:r()(d,c)}),m)})),u=["bsPrefix","placement","className","style","children","content","arrowProps","popper","show"],f=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.placement,c=e.className,d=e.style,p=e.children,f=e.content,v=e.arrowProps,y=(e.popper,e.show,(0,n.A)(e,u)),b=(0,o.oU)(a,"popover"),A=((null==s?void 0:s.split("-"))||[])[0];return l.createElement("div",(0,i.A)({ref:t,role:"tooltip",style:d,"x-placement":A,className:r()(c,b,A&&"bs-popover-"+A)},y),l.createElement("div",(0,i.A)({className:"arrow"},v)),f?l.createElement(m,null,p):p)}));f.defaultProps={placement:"right"},f.Title=d,f.Content=m;var v=f},2431:function(e,t,a){var i=a(8168),n=a(8587),s=a(2485),r=a.n(s),l=a(6540),o=a(6519),c=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],d=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.className,d=e.striped,p=e.bordered,m=e.borderless,u=e.hover,f=e.size,v=e.variant,y=e.responsive,b=(0,n.A)(e,c),A=(0,o.oU)(a,"table"),P=r()(s,A,v&&A+"-"+v,f&&A+"-"+f,d&&A+"-striped",p&&A+"-bordered",m&&A+"-borderless",u&&A+"-hover"),N=l.createElement("table",(0,i.A)({},b,{className:P,ref:t}));if(y){var E=A+"-responsive";return"string"==typeof y&&(E=E+"-"+y),l.createElement("div",{className:E},N)}return N}));t.A=d}}]);
//# sourceMappingURL=8463.2b250f7472b4f926d099.bundle.js.map
{"version":3,"file":"3536.c1cb4c91c76f6074520d.bundle.js","mappings":"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","sources":["webpack://tgstation-server-control-panel/./src/components/views/Configuration.tsx","webpack://tgstation-server-control-panel/./node_modules/react-bootstrap/esm/InputGroup.js"],"sourcesContent":["import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { ReactNode } from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport FormControl from \"react-bootstrap/FormControl\";\nimport InputGroup from \"react-bootstrap/InputGroup\";\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\nimport Tooltip from \"react-bootstrap/Tooltip\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport configOptions, { ConfigOption } from \"../../ApiClient/util/config\";\nimport ConfigController from \"../../ApiClient/util/ConfigController\";\n\ninterface IProps {}\ninterface IState {\n    values: Partial<typeof configOptions>;\n    //if youre adding some state, make sure it doesnt get sent to be saved\n}\n\nexport default class Configuration extends React.Component<IProps, IState> {\n    public constructor(props: IProps) {\n        super(props);\n        this.save = this.save.bind(this);\n\n        this.state = {\n            values: {}\n        };\n    }\n\n    private save() {\n        ConfigController.saveconfig(this.state.values);\n        this.setState({\n            values: {}\n        });\n    }\n\n    public render(): ReactNode {\n        const config = Object.entries(configOptions);\n\n        return (\n            <React.Fragment>\n                {config.map(([_key, currentVal]) => {\n                    const key = _key as keyof typeof configOptions;\n                    //const persistRef = React.createRef<HTMLInputElement>();\n                    const valueRef = React.createRef<HTMLInputElement>();\n                    const enumRef = React.createRef<HTMLSelectElement>();\n                    const value = this.state.values[key] ?? currentVal;\n                    const reset = () => {\n                        this.setState((prevState: IState) => {\n                            const filtered: Partial<typeof configOptions> = {};\n                            for (const [innerkey, val] of Object.entries(prevState.values)) {\n                                if (innerkey === key) continue;\n                                filtered[innerkey as keyof typeof prevState.values] = val;\n                            }\n                            return {\n                                values: filtered\n                            };\n                        });\n                    };\n\n                    const updateValue = () => {\n                        this.setState(prevstate => {\n                            const obj: ConfigOption = this.state.values[key]\n                                ? { ...this.state.values[key]! }\n                                : {\n                                      ...currentVal\n                                  };\n                            obj.value =\n                                value.type === \"enum\"\n                                    ? enumRef.current!.selectedOptions[0].value\n                                    : value.type === \"bool\"\n                                      ? valueRef.current!.checked\n                                      : valueRef.current!.value;\n\n                            return {\n                                values: {\n                                    ...prevstate.values,\n                                    [key]: obj\n                                }\n                            };\n                        });\n                    };\n\n                    const tooltip = (innerid: string) => {\n                        return (\n                            <Tooltip id={innerid}>\n                                <FormattedMessage id={innerid} />\n                            </Tooltip>\n                        );\n                    };\n\n                    const random = Math.random().toString();\n\n                    return (\n                        <InputGroup key={value.id}>\n                            <InputGroup.Prepend className=\"w-40 flex-grow-1 flex-xl-grow-0 overflow-auto mb-2 mb-xl-0\">\n                                {/*<InputGroup.Text\n                                    as=\"label\"\n                                    htmlFor={value.id}\n                                    className={this.state.values[key] ? 'font-weight-bold' : ''}>\n                                    <Form.Check\n                                        id={value.id}\n                                        inline\n                                        label={<FormattedMessage id=\"generic.persist\" />}\n                                        type=\"switch\"\n                                        custom\n                                        onChange={updateValue}\n                                        ref={persistRef}\n                                        checked={value.persist}\n                                        value={''}\n                                    />\n                                </InputGroup.Text>*/}\n                                <OverlayTrigger overlay={tooltip(value.id + \".desc\")}>\n                                    {({ ref, ...triggerHandler }) => (\n                                        <InputGroup.Text\n                                            className={`flex-fill ${\n                                                this.state.values[key] ? \"font-weight-bold\" : \"\"\n                                            }`}\n                                            {...triggerHandler}>\n                                            <FormattedMessage id={value.id} />\n                                            <div\n                                                className=\"ml-auto\"\n                                                ref={ref as React.Ref<HTMLDivElement>}>\n                                                <FontAwesomeIcon fixedWidth icon=\"info\" />\n                                            </div>\n                                        </InputGroup.Text>\n                                    )}\n                                </OverlayTrigger>\n                            </InputGroup.Prepend>\n                            <div className=\"flex-grow-1 w-100 w-xl-auto d-flex mb-3 mb-xl-0\">\n                                {value.type === \"enum\" ? (\n                                    <select\n                                        className={`flex-fill mb-0 ${\n                                            this.state.values[key] ? \"font-weight-bold\" : \"\"\n                                        }`}\n                                        ref={enumRef}\n                                        onChange={updateValue}\n                                        defaultValue={value.value}>\n                                        {Object.values(value.possibleValues).map(possiblevalue => (\n                                            <FormattedMessage\n                                                key={possiblevalue}\n                                                id={`${value.id}.enum.${possiblevalue}`}>\n                                                {message => (\n                                                    <option value={possiblevalue}>{message}</option>\n                                                )}\n                                            </FormattedMessage>\n                                        ))}\n                                    </select>\n                                ) : value.type === \"bool\" ? (\n                                    <label\n                                        htmlFor={random}\n                                        className=\"d-flex justify-content-center align-content-center flex-grow-1 w-100 w-xl-auto mb-0\">\n                                        <Form.Check\n                                            inline\n                                            type=\"switch\"\n                                            custom\n                                            id={random}\n                                            className=\"m-auto\"\n                                            label=\"\"\n                                            ref={valueRef}\n                                            onChange={updateValue}\n                                            checked={value.value}\n                                        />\n                                    </label>\n                                ) : (\n                                    <FormControl\n                                        custom\n                                        type={\n                                            value.type === \"num\"\n                                                ? \"number\"\n                                                : value.type === \"pwd\"\n                                                  ? \"password\"\n                                                  : \"text\"\n                                        }\n                                        className={`flex-fill mb-0 ${\n                                            this.state.values[key] ? \"font-weight-bold\" : \"\"\n                                        }`}\n                                        min={value.type === \"num\" ? value.min : undefined}\n                                        max={value.type === \"num\" ? value.max : undefined}\n                                        ref={valueRef}\n                                        onChange={updateValue}\n                                        value={value.value}\n                                    />\n                                )}\n                                {this.state.values[key] ? (\n                                    <InputGroup.Append onClick={reset}>\n                                        <InputGroup.Text>\n                                            <FontAwesomeIcon fixedWidth icon=\"undo\" />\n                                        </InputGroup.Text>\n                                    </InputGroup.Append>\n                                ) : (\n                                    \"\"\n                                )}\n                            </div>\n                        </InputGroup>\n                    );\n                })}\n\n                <br />\n\n                <div className=\"text-center\">\n                    <Button\n                        className=\"px-5\"\n                        onClick={this.save}\n                        disabled={!Object.keys(this.state.values).length}>\n                        <FormattedMessage id=\"generic.save\" />\n                    </Button>\n                </div>\n            </React.Fragment>\n        );\n    }\n}\n","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"bsPrefix\", \"size\", \"hasValidation\", \"className\", \"as\"];\nimport classNames from 'classnames';\nimport React from 'react';\nimport createWithBsPrefix from './createWithBsPrefix';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar InputGroupAppend = createWithBsPrefix('input-group-append');\nvar InputGroupPrepend = createWithBsPrefix('input-group-prepend');\nvar InputGroupText = createWithBsPrefix('input-group-text', {\n  Component: 'span'\n});\n\nvar InputGroupCheckbox = function InputGroupCheckbox(props) {\n  return /*#__PURE__*/React.createElement(InputGroupText, null, /*#__PURE__*/React.createElement(\"input\", _extends({\n    type: \"checkbox\"\n  }, props)));\n};\n\nvar InputGroupRadio = function InputGroupRadio(props) {\n  return /*#__PURE__*/React.createElement(InputGroupText, null, /*#__PURE__*/React.createElement(\"input\", _extends({\n    type: \"radio\"\n  }, props)));\n};\n\n/**\n *\n * @property {InputGroupAppend} Append\n * @property {InputGroupPrepend} Prepend\n * @property {InputGroupText} Text\n * @property {InputGroupRadio} Radio\n * @property {InputGroupCheckbox} Checkbox\n */\nvar InputGroup = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      size = _ref.size,\n      hasValidation = _ref.hasValidation,\n      className = _ref.className,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'input-group');\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(className, bsPrefix, size && bsPrefix + \"-\" + size, hasValidation && 'has-validation')\n  }));\n});\nInputGroup.displayName = 'InputGroup';\nInputGroup.Text = InputGroupText;\nInputGroup.Radio = InputGroupRadio;\nInputGroup.Checkbox = InputGroupCheckbox;\nInputGroup.Append = InputGroupAppend;\nInputGroup.Prepend = InputGroupPrepend;\nexport default InputGroup;"],"names":["Configuration","React","constructor","props","super","this","save","bind","state","values","ConfigController","saveconfig","setState","render","config","Object","entries","configOptions","map","_key","currentVal","key","valueRef","enumRef","value","updateValue","prevstate","obj","type","current","selectedOptions","checked","random","Math","toString","InputGroup","id","Prepend","className","OverlayTrigger","overlay","innerid","Tooltip","FormattedMessage","ref","triggerHandler","Text","_extends","FontAwesomeIcon","fixedWidth","icon","onChange","defaultValue","possibleValues","possiblevalue","message","htmlFor","Form","Check","inline","custom","label","FormControl","min","undefined","max","Append","onClick","reset","prevState","filtered","innerkey","val","Button","disabled","keys","length","_excluded","InputGroupAppend","InputGroupPrepend","InputGroupText","Component","_ref","bsPrefix","size","hasValidation","_ref$as","as","displayName","Radio","Checkbox"],"sourceRoot":""}
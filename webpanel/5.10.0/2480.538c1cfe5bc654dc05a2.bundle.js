"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[2480],{22480:function(e,r,t){var a=t(30653),n=t(96846),o=t(53803),s=t(75631),i=t(77626),c=t(27961);r.Z=new class extends a.S{get cachedAdminInfo(){return this._cachedAdminInfo}constructor(){super(),this._cachedAdminInfo=void 0,this.loadingAdminInfo=!1,s.Z.on("purgeCache",(()=>{this._cachedAdminInfo=void 0}))}async getAdminInfo(){if(await s.Z.wait4Init(),this._cachedAdminInfo)return this._cachedAdminInfo;if(this.loadingAdminInfo)return await new Promise((e=>{const r=t=>{e(t),this.removeListener("loadAdminInfo",r)};this.on("loadAdminInfo",r)}));let e;this.loadingAdminInfo=!0;try{e=await s.Z.apiClient.api.administrationControllerRead()}catch(e){const r=new o.Z({code:o.G.ERROR,error:e});return this.emit("loadAdminInfo",r),this.loadingAdminInfo=!1,r}switch(e.status){case 200:{const r=new o.Z({code:o.G.OK,payload:e.data});return this._cachedAdminInfo=r,this.emit("loadAdminInfo",r),this.loadingAdminInfo=!1,r}case 424:{const r=e.data,t=new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.ADMIN_GITHUB_RATE,{errorMessage:r},e)});return this.emit("loadAdminInfo",t),this.loadingAdminInfo=!1,t}case 429:{const r=e.data,t=new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.ADMIN_GITHUB_ERROR,{errorMessage:r},e)});return this.emit("loadAdminInfo",t),this.loadingAdminInfo=!1,t}default:{const r=new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.UNHANDLED_RESPONSE,{axiosResponse:e},e)});return this.emit("loadAdminInfo",r),this.loadingAdminInfo=!1,r}}}async restartServer(){let e;await s.Z.wait4Init();try{e=await s.Z.apiClient.api.administrationControllerDelete()}catch(e){return new o.Z({code:o.G.ERROR,error:e})}switch(e.status){case 204:return new o.Z({code:o.G.OK,payload:null});case 422:{const r=e.data;return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.ADMIN_WATCHDOG_UNAVAIL,{errorMessage:r},e)})}default:return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.UNHANDLED_RESPONSE,{axiosResponse:e},e)})}}async updateServer(e){let r;await s.Z.wait4Init();try{r=await s.Z.apiClient.api.administrationControllerUpdate({newVersion:e})}catch(e){return new o.Z({code:o.G.ERROR,error:e})}switch(r.status){case 202:return new o.Z({code:o.G.OK,payload:r.data});case 410:{const e=r.data;return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.ADMIN_VERSION_NOT_FOUND,{errorMessage:e},r)})}case 422:{const e=r.data;return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.ADMIN_WATCHDOG_UNAVAIL,{errorMessage:e},r)})}case 424:{const e=r.data;return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.ADMIN_GITHUB_RATE,{errorMessage:e},r)})}case 429:{const e=r.data;return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.ADMIN_GITHUB_ERROR,{errorMessage:e},r)})}default:return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.UNHANDLED_RESPONSE,{axiosResponse:r},r)})}}async uploadVersion(e,r){let t;await s.Z.wait4Init();try{t=await s.Z.apiClient.api.administrationControllerUpdate({newVersion:e,uploadZip:!0})}catch(e){return new o.Z({code:o.G.ERROR,error:e})}switch(t.status){case 202:{const e=t.data,a=await i.Z.Upload(e.fileTicket,r);return a.code===o.G.OK?new o.Z({code:o.G.OK,payload:e}):new o.Z({code:o.G.ERROR,error:a.error})}case 410:{const e=t.data;return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.ADMIN_VERSION_NOT_FOUND,{errorMessage:e},t)})}case 422:{const e=t.data;return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.ADMIN_WATCHDOG_UNAVAIL,{errorMessage:e},t)})}case 424:{const e=t.data;return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.ADMIN_GITHUB_RATE,{errorMessage:e},t)})}case 429:{const e=t.data;return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.ADMIN_GITHUB_ERROR,{errorMessage:e},t)})}default:return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.UNHANDLED_RESPONSE,{axiosResponse:t},t)})}}async getLogs({page:e=1,pageSize:r=c.ZP.itemsperpage.value}){let t;await s.Z.wait4Init();try{t=await s.Z.apiClient.api.administrationControllerListLogs({pageSize:r,page:e})}catch(e){return new o.Z({code:o.G.ERROR,error:e})}switch(t.status){case 200:return new o.Z({code:o.G.OK,payload:t.data});case 409:{const e=t.data;return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.ADMIN_LOGS_IO_ERROR,{errorMessage:e},t)})}default:return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.UNHANDLED_RESPONSE,{axiosResponse:t},t)})}}async getLog(e,r){let t;await s.Z.wait4Init();try{t=await s.Z.apiClient.api.administrationControllerGetLog(e)}catch(e){return new o.Z({code:o.G.ERROR,error:e})}switch(t.status){case 200:{const e=t.data,a=await i.Z.Download(e.fileTicket,r);if(a.code===o.G.OK){const r=Object.assign({content:await a.payload.text()},e);return new o.Z({code:o.G.OK,payload:r})}return new o.Z({code:o.G.ERROR,error:a.error})}case 409:{const e=t.data;return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.ADMIN_LOGS_IO_ERROR,{errorMessage:e},t)})}default:return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.UNHANDLED_RESPONSE,{axiosResponse:t},t)})}}}},77626:function(e,r,t){var a=t(30653),n=t(96846),o=t(53803),s=t(75631);r.Z=new class extends a.S{async Download(e,r){let t;await s.Z.wait4Init();try{t=await s.Z.apiClient.api.transferControllerDownload({ticket:e},{headers:{Accept:"application/json, application/octet-stream"},format:"blob",onDownloadProgress:r})}catch(e){return new o.Z({code:o.G.ERROR,error:e})}switch(t.status){case 200:return new o.Z({code:o.G.OK,payload:t.data});case 410:return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.TRANSFER_NOT_AVAILABLE,{errorMessage:t.data})});default:return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.UNHANDLED_RESPONSE,{axiosResponse:t},t)})}}async Upload(e,r){let t;await s.Z.wait4Init();try{t=await s.Z.apiClient.api.transferControllerUpload({ticket:e},r,{headers:{"Content-Type":"application/octect-stream"}})}catch(e){return new o.Z({code:o.G.ERROR,error:e})}switch(t.status){case 204:return new o.Z({code:o.G.OK,payload:null});case 409:return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.UPLOAD_FAILED,{void:!0})});case 410:return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.TRANSFER_NOT_AVAILABLE,{errorMessage:t.data})});default:return new o.Z({code:o.G.ERROR,error:new n.ZP(n.jK.UNHANDLED_RESPONSE,{axiosResponse:t},t)})}}}}}]);
//# sourceMappingURL=2480.538c1cfe5bc654dc05a2.bundle.js.map
"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[9356,9657],{72741:function(e,t,a){a.d(t,{Z:function(){return l}});var i=a(67294),n=a(15293),s=a(43489),r=a(44012);function l(e){return i.createElement(n.Z,{show:e.show,overlay:i.createElement(s.Z,{id:e.tooltipid},i.createElement(r.Z,{id:e.tooltipid}))},e.children)}},44298:function(e,t,a){a.r(t),a.d(t,{Deployment:function(){return P}});var i=a(67294),n=a(35005),s=a(44012),r=a(25856),l=a(48509),o=a(53803),c=a(39521),d=a(96190),p=a(16964),m=a(93918),u=a(3e3),f=a(9635),v=a(79049),b=a(35619),y=a(8425),E=a(35855),h=a(72741);function P(){const e=(0,i.useContext)(d.g),t=(0,i.useState)([]),[a,P]=(0,i.useState)(!0),[S,Z]=(0,i.useState)(null),[g,N]=(0,i.useState)(null),[w,x]=(0,i.useState)(1),[A,$]=(0,i.useState)(0),[R,V]=(0,i.useState)(5),C=(0,p.$A)(e.instancePermissionSet,l.xb.Read),D=(0,p.$A)(e.instancePermissionSet,l.xb.Compile),_=(0,p.$A)(e.instancePermissionSet,l.xb.CompileJobs);async function I(){if(!C)return P(!1);P(!0);const a=await r.Z.getDeployInfo(e.instance.id);P(!1),a.code===o.G.OK?Z(a.payload):(0,u.iT)(t,a.error)}async function L(a){if(!_)return;N(null);const i=await r.Z.listCompileJobs(e.instance.id,{page:a,pageSize:R});i.code===o.G.OK?(R||V(i.payload.pageSize),$(i.payload.totalPages),x(a),N(i.payload.content)):(0,u.iT)(t,i.error)}let T;(0,i.useEffect)((()=>{I(),L(1)}),[e.instance.id]);const z=/(?:(?<days>\d+)\.)?(?<hours>\d+):(?<minutes>\d+):(?<seconds>\d+)/.exec(S?.timeout??"");if(z){const e=z.groups;T=60*(24*parseInt(e.days??0)+parseInt(e.hours))+parseInt(e.minutes)+parseInt(e.seconds)/60}const M={projectName:{type:v.fS.String,name:"fields.instance.deploy.projectname",tooltip:"fields.instance.deploy.projectname.desc",defaultValue:S?.projectName,disabled:!(0,p.$A)(e.instancePermissionSet,l.xb.SetDme)},compilerAdditionalArguments:{type:v.fS.String,name:"fields.instance.deploy.compilerargs",tooltip:"fields.instance.deploy.compilerargs.desc",defaultValue:S?.compilerAdditionalArguments,disabled:!(0,p.$A)(e.instancePermissionSet,l.xb.SetCompilerArguments)},timeout:{type:v.fS.Number,name:"fields.instance.deploy.timeout",tooltip:"fields.instance.deploy.timeout.desc",defaultValue:T,disabled:!(0,p.$A)(e.instancePermissionSet,l.xb.SetTimeout)},apiValidationPort:{type:v.fS.Number,min:0,max:65535,name:"fields.instance.deploy.apiport",tooltip:"fields.instance.deploy.apiport.desc",defaultValue:S?.apiValidationPort,disabled:!(0,p.$A)(e.instancePermissionSet,l.xb.SetApiValidationPort)},apiValidationSecurityLevel:{type:v.fS.Enum,enum:l.ns,name:"fields.instance.deploy.seclevel",tooltip:"fields.instance.deploy.seclevel.desc",defaultValue:S?.apiValidationSecurityLevel,disabled:!(0,p.$A)(e.instancePermissionSet,l.xb.SetSecurityLevel)},requireDMApiValidation:{type:v.fS.Boolean,name:"fields.instance.deploy.validateapi",tooltip:"fields.instance.deploy.validateapi.desc",defaultValue:S?.requireDMApiValidation,disabled:!(0,p.$A)(e.instancePermissionSet,l.xb.SetApiValidationRequirement)}};let j=null;const k={currentPage:w,totalPages:A,loadPage:L,pageSize:R??0};return _?g&&(j={viewDataType:m.a.CompileJobs,compileJobs:g,paging:k}):j={viewDataType:m.a.CompileJobs,paging:k},i.createElement("div",{className:"text-center"},i.createElement(y.t,{obj:{deployInfo:S}}),(0,u.hP)(t),_?i.createElement(m.Z,{viewData:j}):i.createElement(f.Z,{title:"view.instance.no_compile_jobs"}),i.createElement("hr",null),i.createElement("h3",null,i.createElement(s.Z,{id:"view.instance.deploy.title"})),C?null:i.createElement(f.Z,{title:"view.instance.no_metadata"}),a?i.createElement(E.default,{text:"loading.deployments"}):i.createElement(i.Fragment,null,i.createElement(b.Z,{hideDisabled:!C,fields:M,onSave:async a=>{let i;if(a.timeout){const e=Math.floor(a.timeout/1440);a.timeout-=1440*e;const t=Math.floor(a.timeout/60);a.timeout-=60*t;const n=Math.floor(a.timeout);a.timeout-=n;const s=Math.floor(60*a.timeout);i=e?`${e}.${t}:${n}:${s}`:`${t}:${n}:${s}`}const n={...a,timeout:i};P(!0);const s=await r.Z.updateDeployInfo(e.instance.id,n);s.code===o.G.ERROR?(0,u.iT)(t,s.error):await I(),P(!1)}}),i.createElement("hr",null),i.createElement(h.Z,{tooltipid:"generic.no_perm",show:!D&&void 0},i.createElement(n.Z,{disabled:!D,onClick:async()=>{const a=await r.Z.startCompile(e.instance.id);a.code===o.G.ERROR?(0,u.iT)(t,a.error):(c.default.registerJob(a.payload,e.instance.id),c.default.fastmode=5)}},i.createElement(s.Z,{id:"view.instance.deploy.deploy"})))))}},27977:function(e,t,a){var i=a(87462),n=a(63366),s=a(94184),r=a.n(s),l=a(67294),o=a(76792),c=["bsPrefix","variant","pill","className","as"],d=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.variant,d=e.pill,p=e.className,m=e.as,u=void 0===m?"span":m,f=(0,n.Z)(e,c),v=(0,o.vE)(a,"badge");return l.createElement(u,(0,i.Z)({ref:t},f,{className:r()(p,v,d&&v+"-pill",s&&v+"-"+s)}))}));d.displayName="Badge",d.defaultProps={pill:!1},t.Z=d},38966:function(e,t,a){a.d(t,{Z:function(){return Z}});var i=a(87462),n=a(63366),s=a(94184),r=a.n(s),l=a(67294),o=a(76792),c=a(48358),d=["active","disabled","className","style","activeLabel","children"],p=["children"],m=l.forwardRef((function(e,t){var a=e.active,s=e.disabled,o=e.className,p=e.style,m=e.activeLabel,u=e.children,f=(0,n.Z)(e,d),v=a||s?"span":c.Z;return l.createElement("li",{ref:t,style:p,className:r()(o,"page-item",{active:a,disabled:s})},l.createElement(v,(0,i.Z)({className:"page-link",disabled:s},f),u,a&&m&&l.createElement("span",{className:"sr-only"},m)))}));m.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},m.displayName="PageItem";var u=m;function f(e,t,a){function i(e){var i=e.children,s=(0,n.Z)(e,p);return l.createElement(m,s,l.createElement("span",{"aria-hidden":"true"},i||t),l.createElement("span",{className:"sr-only"},a))}return void 0===a&&(a=e),i.displayName=e,i}var v=f("First","\xab"),b=f("Prev","\u2039","Previous"),y=f("Ellipsis","\u2026","More"),E=f("Next","\u203a"),h=f("Last","\xbb"),P=["bsPrefix","className","children","size"],S=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.className,c=e.children,d=e.size,p=(0,n.Z)(e,P),m=(0,o.vE)(a,"pagination");return l.createElement("ul",(0,i.Z)({ref:t},p,{className:r()(s,m,d&&m+"-"+d)}),c)}));S.First=v,S.Prev=b,S.Ellipsis=y,S.Item=u,S.Next=E,S.Last=h;var Z=S},19611:function(e,t,a){a.d(t,{Z:function(){return v}});var i=a(87462),n=a(63366),s=a(94184),r=a.n(s),l=a(67294),o=(a(55638),a(76792)),c=["as","bsPrefix","className","children"],d=l.forwardRef((function(e,t){var a=e.as,s=void 0===a?"div":a,d=e.bsPrefix,p=e.className,m=e.children,u=(0,n.Z)(e,c);return d=(0,o.vE)(d,"popover-header"),l.createElement(s,(0,i.Z)({ref:t},u,{className:r()(d,p)}),m)})),p=["as","bsPrefix","className","children"],m=l.forwardRef((function(e,t){var a=e.as,s=void 0===a?"div":a,c=e.bsPrefix,d=e.className,m=e.children,u=(0,n.Z)(e,p);return c=(0,o.vE)(c,"popover-body"),l.createElement(s,(0,i.Z)({ref:t},u,{className:r()(d,c)}),m)})),u=["bsPrefix","placement","className","style","children","content","arrowProps","popper","show"],f=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.placement,c=e.className,d=e.style,p=e.children,f=e.content,v=e.arrowProps,b=(e.popper,e.show,(0,n.Z)(e,u)),y=(0,o.vE)(a,"popover"),E=((null==s?void 0:s.split("-"))||[])[0];return l.createElement("div",(0,i.Z)({ref:t,role:"tooltip",style:d,"x-placement":E,className:r()(c,y,E&&"bs-popover-"+E)},b),l.createElement("div",(0,i.Z)({className:"arrow"},v)),f?l.createElement(m,null,p):p)}));f.defaultProps={placement:"right"},f.Title=d,f.Content=m;var v=f},75147:function(e,t,a){var i=a(87462),n=a(63366),s=a(94184),r=a.n(s),l=a(67294),o=a(76792),c=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],d=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.className,d=e.striped,p=e.bordered,m=e.borderless,u=e.hover,f=e.size,v=e.variant,b=e.responsive,y=(0,n.Z)(e,c),E=(0,o.vE)(a,"table"),h=r()(s,E,v&&E+"-"+v,f&&E+"-"+f,d&&E+"-striped",p&&E+"-bordered",m&&E+"-borderless",u&&E+"-hover"),P=l.createElement("table",(0,i.Z)({},y,{className:h,ref:t}));if(b){var S=E+"-responsive";return"string"==typeof b&&(S=S+"-"+b),l.createElement("div",{className:S},P)}return P}));t.Z=d}}]);
//# sourceMappingURL=9356.ffc2ffb2821d755fbfe2.bundle.js.map
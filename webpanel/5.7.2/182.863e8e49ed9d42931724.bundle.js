"use strict";(self.webpackChunktgstation_server_control_panel=self.webpackChunktgstation_server_control_panel||[]).push([[182],{62685:function(e,t,a){a.r(t);var n=a(67294),i=a(44012),s=a(5977),r=a(48509),o=a(76352),l=a(53803),c=a(39521),d=a(96190),m=a(16964),u=a(3e3),p=a(79049),f=a(35619),h=a(8425),S=a(35855);class y extends n.Component{constructor(e){super(e),this.editInstance=this.editInstance.bind(this),this.state={errors:[],moving:!1}}addError(e){this.setState((t=>{const a=Array.from(t.errors);return a.push(e),{errors:a}}))}async editInstance(e){const t=this.context.instance.id;let a;e.path&&e.path!=this.context.instance.path&&(a=e.path,e.path=null,e.online=!1,this.setState({moving:!0}));const n=await o.Z.editInstance({...e,id:t});if(n.code!==l.G.OK)return this.addError(n.error),void this.setState({moving:!1});if(a){const e=await o.Z.editInstance({id:this.context.instance.id,path:a});if(e.code!==l.G.OK)return this.addError(e.error),this.setState({moving:!1}),void await this.context.reloadInstance();let n;do{if(await new Promise((e=>setTimeout(e,1e3))),n=await o.Z.getInstance(t),n.code!==l.G.OK)return this.addError(n.error),this.setState({moving:!1}),void await this.context.reloadInstance()}while(n.payload.moveJob);const i=await o.Z.editInstance({online:!0,id:t});i.code!==l.G.OK?(this.addError(i.error),this.setState({moving:!1})):c.Z.registerJob(e.payload.moveJob,t)}await this.context.reloadInstance()}render(){const e=e=>(0,m.D0)((0,m.Zg)(this.context.user),e),t={name:{name:"fields.instance.name",type:p.fS.String,defaultValue:this.context.instance.name,disabled:!e(r.c2.Rename)},path:{name:"fields.instance.path",type:p.fS.String,defaultValue:this.context.instance.path,disabled:!e(r.c2.Relocate)},chatBotLimit:{name:"fields.instance.chatbotlimit",type:p.fS.Number,min:0,defaultValue:this.context.instance.chatBotLimit,disabled:!e(r.c2.SetChatBotLimit)},autoUpdateInterval:{name:"fields.instance.autoupdate",type:p.fS.Number,min:0,defaultValue:this.context.instance.autoUpdateInterval,disabled:!e(r.c2.SetAutoUpdate)},configurationType:{name:"fields.instance.filemode",type:p.fS.Enum,enum:r.c7,defaultValue:this.context.instance.configurationType,disabled:!e(r.c2.SetConfiguration)}};return n.createElement("div",{className:"text-center"},n.createElement("h1",null,n.createElement(i.Z,{id:"view.instance.info"})),n.createElement(h.t,{obj:this.context}),this.state.errors.map(((e,t)=>{if(e)return n.createElement(u.ZP,{key:t,error:e,onClose:()=>this.setState((e=>{const a=Array.from(e.errors);return a[t]=void 0,{errors:a}}))})})),this.state.moving?n.createElement(S.Z,{text:"loading.instance.move"}):n.createElement(f.Z,{fields:t,onSave:this.editInstance}))}}y.contextType=d.g,t.default=(0,s.EN)(y)},44298:function(e,t,a){a.r(t),a.d(t,{Deployment:function(){return v}});var n=a(67294),i=a(35005),s=a(44012),r=a(25856),o=a(48509),l=a(53803),c=a(39521),d=a(96190),m=a(16964),u=a(93918),p=a(3e3),f=a(9635),h=a(79049),S=a(35619),y=a(8425),g=a(35855),b=a(72741);function v(){const e=(0,n.useContext)(d.g),t=(0,n.useState)([]),[a,v]=(0,n.useState)(!0),[E,w]=(0,n.useState)(null),[Z,P]=(0,n.useState)(null),[x,C]=(0,n.useState)(1),[R,N]=(0,n.useState)(0),[I,V]=(0,n.useState)(5),O=(0,m.$A)(e.instancePermissionSet,o.xb.Read),A=(0,m.$A)(e.instancePermissionSet,o.xb.Compile),T=(0,m.$A)(e.instancePermissionSet,o.xb.CompileJobs);async function k(){if(!O)return v(!1);v(!0);const a=await r.Z.getDeployInfo(e.instance.id);v(!1),a.code===l.G.OK?w(a.payload):(0,p.iT)(t,a.error)}async function D(a){if(!T)return;P(null);const n=await r.Z.listCompileJobs(e.instance.id,{page:a,pageSize:I});n.code===l.G.OK?(I||V(n.payload.pageSize),N(n.payload.totalPages),C(a),P(n.payload.content)):(0,p.iT)(t,n.error)}let _;(0,n.useEffect)((()=>{k(),D(1)}),[e.instance.id]);const M=/(?:(?<days>\d+)\.)?(?<hours>\d+):(?<minutes>\d+):(?<seconds>\d+)/.exec(E?.timeout??"");if(M){const e=M.groups;_=60*(24*parseInt(e.days??0)+parseInt(e.hours))+parseInt(e.minutes)+parseInt(e.seconds)/60}const J={projectName:{type:h.fS.String,name:"fields.instance.deploy.projectname",tooltip:"fields.instance.deploy.projectname.desc",defaultValue:E?.projectName,disabled:!(0,m.$A)(e.instancePermissionSet,o.xb.SetDme)},compilerAdditionalArguments:{type:h.fS.String,name:"fields.instance.deploy.compilerargs",tooltip:"fields.instance.deploy.compilerargs.desc",defaultValue:E?.compilerAdditionalArguments,disabled:!(0,m.$A)(e.instancePermissionSet,o.xb.SetCompilerArguments)},timeout:{type:h.fS.Number,name:"fields.instance.deploy.timeout",tooltip:"fields.instance.deploy.timeout.desc",defaultValue:_,disabled:!(0,m.$A)(e.instancePermissionSet,o.xb.SetTimeout)},apiValidationPort:{type:h.fS.Number,min:0,max:65535,name:"fields.instance.deploy.apiport",tooltip:"fields.instance.deploy.apiport.desc",defaultValue:E?.apiValidationPort,disabled:!(0,m.$A)(e.instancePermissionSet,o.xb.SetApiValidationPort)},apiValidationSecurityLevel:{type:h.fS.Enum,enum:o.ns,name:"fields.instance.deploy.seclevel",tooltip:"fields.instance.deploy.seclevel.desc",defaultValue:E?.apiValidationSecurityLevel,disabled:!(0,m.$A)(e.instancePermissionSet,o.xb.SetSecurityLevel)},requireDMApiValidation:{type:h.fS.Boolean,name:"fields.instance.deploy.validateapi",tooltip:"fields.instance.deploy.validateapi.desc",defaultValue:E?.requireDMApiValidation,disabled:!(0,m.$A)(e.instancePermissionSet,o.xb.SetApiValidationRequirement)}};let $=null;const G={currentPage:x,totalPages:R,loadPage:D,pageSize:I??0};return T?Z&&($={viewDataType:u.a.CompileJobs,compileJobs:Z,paging:G}):$={viewDataType:u.a.CompileJobs,paging:G},n.createElement("div",{className:"text-center"},n.createElement(y.t,{obj:{deployInfo:E}}),(0,p.hP)(t),T?n.createElement(u.Z,{viewData:$}):n.createElement(f.Z,{title:"view.instance.no_compile_jobs"}),n.createElement("hr",null),n.createElement("h3",null,n.createElement(s.Z,{id:"view.instance.deploy.title"})),O?null:n.createElement(f.Z,{title:"view.instance.no_metadata"}),a?n.createElement(g.Z,{text:"loading.deployments"}):n.createElement(n.Fragment,null,n.createElement(S.Z,{hideDisabled:!O,fields:J,onSave:async a=>{let n;if(a.timeout){const e=Math.floor(a.timeout/1440);a.timeout-=1440*e;const t=Math.floor(a.timeout/60);a.timeout-=60*t;const i=Math.floor(a.timeout);a.timeout-=i;const s=Math.floor(60*a.timeout);n=e?`${e}.${t}:${i}:${s}`:`${t}:${i}:${s}`}const i={...a,timeout:n};v(!0);const s=await r.Z.updateDeployInfo(e.instance.id,i);s.code===l.G.ERROR?(0,p.iT)(t,s.error):await k(),v(!1)}}),n.createElement("hr",null),n.createElement(b.Z,{tooltipid:"generic.no_perm",show:!A&&void 0},n.createElement(i.Z,{disabled:!A,onClick:async()=>{const a=await r.Z.startCompile(e.instance.id);a.code===l.G.ERROR?(0,p.iT)(t,a.error):(c.Z.registerJob(a.payload,e.instance.id),c.Z.fastmode=5)}},n.createElement(s.Z,{id:"view.instance.deploy.deploy"})))))}},25921:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var n=a(67294),i=a(23204),s=a(53803),r=a(39521),o=a(96190),l=a(1320),c=a(3e3),d=a(93128),m=a(8425),u=a(35855),p=a(89929);function f(){const e=n.useContext(o.g),[t,a]=(0,n.useState)([]),[f,h]=(0,n.useState)([]),[S,y]=(0,n.useState)(!0),[g,b]=(0,n.useState)(l.Mq.jobhistorypage.get(e.instance.id)??1),[v,E]=(0,n.useState)(void 0);function w(e){h((t=>{const a=Array.from(t);return a.push(e),a}))}async function Z(e){const t=await i.Z.deleteJob(e.instanceId,e.id);t.code===s.G.OK?r.Z.fastmode=5:w(t.error)}return(0,n.useEffect)((()=>{l.Mq.jobhistorypage.set(e.instance.id,g),y(!0),async function(){const t=await i.Z.listJobs(e.instance.id,{page:g});t.code===s.G.OK?(g>t.payload.totalPages&&0!==t.payload.totalPages&&b(1),a(t.payload.content),E(t.payload.totalPages)):w(t.error),y(!1)}()}),[g,e.instance.id]),(0,n.useEffect)((()=>{}),[f]),S?n.createElement(u.Z,{text:"loading.instance.jobs.list"}):n.createElement("div",null,n.createElement(m.t,{obj:t}),f.map(((e,t)=>{if(e)return n.createElement(c.ZP,{key:t,error:e,onClose:()=>h((e=>{const a=Array.from(e);return a[t]=void 0,a}))})})),t.sort(((e,t)=>t.id-e.id)).filter((e=>!!e.stoppedAt)).map((e=>n.createElement(d.Z,{job:e,key:e.id,onCancel:Z}))),n.createElement(p.Z,{selectPage:e=>b(e),totalPages:v??1,currentPage:g}))}},86046:function(e,t,a){a.r(t);var n,i=a(67294),s=a(27977),r=a(35005),o=a(15293),l=a(43489),c=a(44012),d=a(74806),m=a(81249),u=a(7179),p=a(48509),f=a(53803),h=a(39521),S=a(96190),y=a(16964),g=a(93918),b=a(3e3),v=a(9635),E=a(79049),w=a(35619),Z=a(8425),P=a(35855);!function(e){e[e.None=0]="None",e[e.Stop=1]="Stop",e[e.Restart=2]="Restart"}(n||(n={})),t.default=(0,d.ZP)((function(e){const t=(0,i.useContext)(S.g),[a,d]=(0,i.useState)(),[x,C]=(0,i.useState)(!1),R=(0,i.useState)([]);async function N(){if(!(0,y.mg)(t.instancePermissionSet,p.py.ReadMetadata))return d({});const e=await u.Z.getWatchdogStatus(t.instance.id);e.code===f.G.ERROR?(0,b.iT)(R,e.error):d(e.payload)}async function I(e){C(!0);const a=await u.Z.updateWatchdogStatus(t.instance.id,e);a.code===f.G.ERROR&&(0,b.iT)(R,a.error),await N(),C(!1)}if((0,i.useEffect)((()=>{N()}),[t.instance.id]),!a)return i.createElement(i.Fragment,null,(0,b.hP)(R));if(x)return i.createElement(P.Z,null);const V={autoStart:{type:E.fS.Boolean,name:"fields.instance.watchdog.autostart",defaultValue:a.autoStart,disabled:!(0,y.mg)(t.instancePermissionSet,p.py.SetAutoStart)},startProfiler:{type:E.fS.Boolean,name:"fields.instance.watchdog.autostartprofiler",defaultValue:a.startProfiler,disabled:!(0,y.mg)(t.instancePermissionSet,p.py.SetProfiler)},logOutput:{type:E.fS.Boolean,name:"fields.instance.watchdog.logoutput",defaultValue:a.logOutput,disabled:!(0,y.mg)(t.instancePermissionSet,p.py.SetLogOutput)},port:{type:E.fS.Number,name:"fields.instance.watchdog.port",defaultValue:a.port,min:0,max:65535,disabled:!(0,y.mg)(t.instancePermissionSet,p.py.SetPort)},visibility:{type:E.fS.Enum,name:"fields.instance.watchdog.visibility",defaultValue:a.visibility,enum:p.Ye,disabled:!(0,y.mg)(t.instancePermissionSet,p.py.SetVisibility)},securityLevel:{type:E.fS.Enum,name:"fields.instance.watchdog.securitylevel",defaultValue:a.securityLevel,enum:p.ns,disabled:!(0,y.mg)(t.instancePermissionSet,p.py.SetSecurity)},startupTimeout:{type:E.fS.Number,name:"fields.instance.watchdog.timeout.startup",defaultValue:a.startupTimeout,min:0,disabled:!(0,y.mg)(t.instancePermissionSet,p.py.SetStartupTimeout)},topicRequestTimeout:{type:E.fS.Number,name:"fields.instance.watchdog.timeout.topic",defaultValue:a.topicRequestTimeout,min:0,disabled:!(0,y.mg)(t.instancePermissionSet,p.py.SetTopicTimeout)},healthCheckSeconds:{type:E.fS.Number,name:"fields.instance.watchdog.healthcheck",defaultValue:a.healthCheckSeconds,min:0,disabled:!(0,y.mg)(t.instancePermissionSet,p.py.SetHealthCheckInterval)},dumpOnHealthCheckRestart:{type:E.fS.Boolean,name:"fields.instance.watchdog.dumpOnHealthCheckRestart",defaultValue:a.dumpOnHealthCheckRestart,disabled:!(0,y.mg)(t.instancePermissionSet,p.py.CreateDump)},minidumps:{type:E.fS.Boolean,name:"fields.instance.watchdog.minidumps",defaultValue:a.minidumps,disabled:!(0,y.mg)(t.instancePermissionSet,p.py.SetMinidumps)},allowWebClient:{type:E.fS.Boolean,name:"fields.instance.watchdog.allowwebclient",defaultValue:a.allowWebClient,disabled:!(0,y.mg)(t.instancePermissionSet,p.py.SetWebClient)},additionalParameters:{type:E.fS.String,name:"fields.instance.watchdog.additionalparams",defaultValue:a.additionalParameters,disabled:!(0,y.mg)(t.instancePermissionSet,p.py.SetAdditionalParameters)},mapThreads:{type:E.fS.Number,name:"fields.instance.watchdog.mapthreads",defaultValue:a.mapThreads,disabled:!(0,y.mg)(t.instancePermissionSet,p.py.SetMapThreads)}},O=Object.values(V).some((e=>!e.disabled)),A=i.createElement(l.Z,{id:"generic.no_perm"},i.createElement(c.Z,{id:"generic.no_perm"})),T=(0,y.mg)(t.instancePermissionSet,p.py.Start),k=(0,y.mg)(t.instancePermissionSet,p.py.Shutdown),D=(0,y.mg)(t.instancePermissionSet,p.py.Restart),_=(0,y.mg)(t.instancePermissionSet,p.py.CreateDump),M=(0,y.mg)(t.instancePermissionSet,p.py.ReadMetadata),J=(0,y.mg)(t.instancePermissionSet,p.py.SoftShutdown)||(0,y.mg)(t.instancePermissionSet,p.py.SoftRestart),$=T||k||D||_,G=!(0,y.mg)(t.instancePermissionSet,p.py.BroadcastMessage)||M&&(a.status!==p.Ni.Online||null!=a.activeCompileJob?.dmApiVersion&&!(0,m.gte)(a.activeCompileJob?.dmApiVersion,"5.7.0")),j={message:{type:E.fS.String,name:"fields.instance.watchdog.broadcast",defaultValue:"",disabled:G,tooltip:"fields.instance.watchdog.broadcast.desc"}},B=(0,y.mg)(t.instancePermissionSet,p.py.ReadRevision);let K=null;return a&&(K={viewDataType:g.a.Watchdog,activeCompileJob:a.activeCompileJob,stagedCompileJob:a.stagedCompileJob}),i.createElement("div",{className:"text-center"},i.createElement(Z.t,{obj:a}),(0,b.hP)(R),i.createElement("h2",{className:"text-center"},i.createElement(c.Z,{id:"view.instance.server.status"}),i.createElement(s.Z,{pill:!0,variant:a.status===p.Ni.Online?"success":a.status===p.Ni.Offline?"danger":"warning"},i.createElement(c.Z,{id:`view.instance.server.status.${p.Ni[a.status]}`}))),i.createElement("hr",null),B?i.createElement(g.Z,{viewData:K}):i.createElement(v.Z,{title:"view.instance.no_compile_jobs"}),i.createElement("hr",null),i.createElement("h3",{className:"text-center"},i.createElement(c.Z,{id:"view.instance.server.settings"})),M?null:O?i.createElement(v.Z,{title:"view.instance.no_metadata"}):i.createElement(v.Z,{title:"view.instance.server.no_metadata_and_no_settings"}),i.createElement(w.Z,{fields:V,onSave:I,hideDisabled:!M}),i.createElement("hr",null),i.createElement("h3",{className:"text-center"},i.createElement(c.Z,{id:"view.instance.server.actions"})),$?i.createElement(i.Fragment,null,M?null:i.createElement(v.Z,{title:"view.instance.server.no_metadata_actions"}),i.createElement("div",{className:"text-center mb-3"},i.createElement(o.Z,{overlay:A,show:!T&&void 0},i.createElement(r.Z,{variant:"success",className:"mx-2",onClick:async function(){C(!0);const e=await u.Z.startWatchdog(t.instance.id);e.code===f.G.ERROR?(0,b.iT)(R,e.error):(h.Z.registerCallback(e.payload.id,(()=>{N()})),h.Z.fastmode=5,await N()),C(!1)},disabled:M&&a.status!=p.Ni.Offline||!T},i.createElement(c.Z,{id:"view.instance.server.start"}))),i.createElement(o.Z,{overlay:A,show:!k&&void 0},i.createElement(r.Z,{variant:"danger",className:"mx-2",onClick:async function(){if(!confirm(e.intl.formatMessage({id:"view.instance.server.prompt.stop"})))return;C(!0);const a=await u.Z.stopWatchdog(t.instance.id);a.code===f.G.ERROR?(0,b.iT)(R,a.error):await N(),C(!1)},disabled:M&&a.status==p.Ni.Offline||!k},i.createElement(c.Z,{id:"view.instance.server.stop"}))),i.createElement(o.Z,{overlay:A,show:!D&&void 0},i.createElement(r.Z,{variant:"warning",className:"mx-2",onClick:async function(){if(!confirm(e.intl.formatMessage({id:"view.instance.server.prompt.restart"})))return;C(!0);const a=await u.Z.restartWatchdog(t.instance.id);a.code===f.G.ERROR?(0,b.iT)(R,a.error):(h.Z.registerCallback(a.payload.id,(()=>{N()})),h.Z.fastmode=5,await N()),C(!1)},disabled:M&&a.status==p.Ni.Offline||!D},i.createElement(c.Z,{id:"view.instance.server.restart"}))),i.createElement(o.Z,{overlay:A,show:!_&&void 0},i.createElement(r.Z,{variant:"info",className:"mx-2",onClick:async function(){C(!0);const e=await u.Z.dumpWatchdog(t.instance.id);e.code===f.G.ERROR?(0,b.iT)(R,e.error):h.Z.fastmode=5,C(!1)},disabled:M&&a.status!=p.Ni.Online||!_},i.createElement(c.Z,{id:"view.instance.server.dump"}))))):i.createElement(v.Z,{title:"view.instance.server.no_actions"}),!M&&J?i.createElement(v.Z,{title:"view.instance.server.no_metadata_graceful"}):null,M||J?i.createElement("div",{className:"w-75 mx-auto"},i.createElement(E.ZP,{name:"view.instance.graceful",type:E.fS.Enum,enum:n,tooltip:"view.instance.graceful.desc",defaultValue:a.softRestart?n.Restart:a.softShutdown?n.Stop:n.None,disabled:!J,onChange:e=>{switch(e){case n.None:if(!a?.softRestart&&!a?.softShutdown)return;I({softShutdown:!a.softShutdown&&void 0,softRestart:!a.softRestart&&void 0});break;case n.Stop:if(a?.softShutdown)return;I({softShutdown:!0});break;case n.Restart:if(a?.softRestart)return;I({softRestart:!0})}}})):$?i.createElement(v.Z,{title:"view.instance.server.no_graceful"}):null,i.createElement("div",{className:"w-75 mx-auto"},i.createElement("br",null),i.createElement(w.Z,{fields:j,onSave:e=>{I({broadcastMessage:e.message})},saveMessageId:"view.instance.server.broadcast"})))}))},9182:function(e,t,a){a.r(t);var n=a(51436),i=a(67814),s=a(67294),r=a(15881),o=a(13361),l=a(56841),c=a(44012),d=a(5977),m=a(48509),u=a(76352),p=a(75870),f=a(53803),h=a(27961),S=a(44615),y=a(96190),g=a(1320),b=a(97888),v=a(35855),E=a(66642),w=a(90740),Z=a(62685),P=a(44298),x=a(32240),C=a(20926),R=a(87345),N=a(25921),I=a(18264),V=a(86046);const O=m.pJ.ReadActive|m.pJ.ListInstalled|m.pJ.InstallOfficialOrChangeActiveByondVersion|m.pJ.InstallCustomByondVersion|m.pJ.InstallOfficialOrChangeActiveOpenDreamVersion|m.pJ.InstallCustomOpenDreamVersion,A=m.py.SetPort|m.py.SetAutoStart|m.py.SetSecurity|m.py.ReadMetadata|m.py.SetWebClient|m.py.SoftRestart|m.py.SoftShutdown|m.py.Restart|m.py.Shutdown|m.py.Start|m.py.SetStartupTimeout|m.py.SetHealthCheckInterval|m.py.CreateDump|m.py.SetTopicTimeout|m.py.SetAdditionalParameters|m.py.SetVisibility,T=m.nX.SetOrigin|m.nX.SetSha|m.nX.MergePullRequest|m.nX.UpdateBranch|m.nX.ChangeCommitter|m.nX.ChangeTestMergeCommits|m.nX.ChangeCredentials|m.nX.SetReference|m.nX.Read|m.nX.ChangeAutoUpdateSettings|m.nX.Delete|m.nX.ChangeSubmoduleUpdate,k=m.xb.Read|m.xb.Compile|m.xb.SetApiValidationPort|m.xb.SetDme|m.xb.SetApiValidationRequirement|m.xb.SetTimeout|m.xb.SetSecurityLevel,D=m.xr.Read|m.xr.Create,_=m.TI.Read|m.TI.List|m.TI.Write;class M extends s.Component{constructor(e){super(e),this.reloadInstance=this.reloadInstance.bind(this),this.deleteContextError=this.deleteContextError.bind(this),g.Mq.selectedinstanceid=parseInt(this.props.match.params.id),this.state={tab:e.match.params.tab??M.tabs[0][0],errors:new Set,instance:null,instancePermissionSet:null,reloadInstance:this.reloadInstance,deleteError:this.deleteContextError,instanceid:parseInt(this.props.match.params.id)}}deleteContextError(e){this.setState((t=>{const a=new Set(t.errors);return a.delete(e),{errors:a}}))}async componentDidMount(){await this.reloadInstance()}componentDidUpdate(e){this.props.match.params.tab&&e.match.params.tab!=this.props.match.params.tab&&this.setState({tab:this.props.match.params.tab})}async reloadInstance(){this.setState({instance:null,instancePermissionSet:null});const e=await u.Z.getInstance(this.state.instanceid);if(e.code===f.G.OK){this.setState({instance:e.payload});const t=await p.Z.getCurrentInstancePermissionSet(this.state.instanceid,!0);t.code===f.G.OK?this.setState({instancePermissionSet:t.payload}):this.setState((e=>{const a=new Set(e.errors);return a.add(t.error),{instancePermissionSet:null,errors:a}}))}else this.setState((t=>{const a=new Set(t.errors);return a.add(e.error),{instance:null,errors:a}}))}render(){if(!this.state.instance||!this.state.instancePermissionSet)return s.createElement(v.Z,{text:"loading.instance"});return s.createElement(y.g.Provider,{value:Object.assign({user:this.context.user,serverInfo:this.context.serverInfo},this.state)},s.createElement(r.Z,{className:"behind-nav"},s.createElement(r.Z.Header,{className:"text-center mb-2 sticky-top"},s.createElement("h3",null,s.createElement(c.Z,{id:"view.instanceedit.title",values:{instanceid:this.props.match.params.id,instancename:this.state.instance.name}})),s.createElement("h5",{className:"text-white-50"},s.createElement(c.Z,{id:`view.instanceedit.tabs.${this.state.tab}`}))),s.createElement(l.Z.Container,{mountOnEnter:!0,unmountOnExit:!0,id:"instanceedit",activeKey:this.state.tab},s.createElement("div",{className:"d-flex flex-row z-front"},s.createElement(r.Z.Body,{className:"flex-grow-0"},(()=>s.createElement(o.Z,{defaultActiveKey:this.state.tab,onSelect:e=>{e=e??M.tabs[0][0],g.Mq.selectedinstanceedittab=e,this.props.history.push(g.$w.instanceedit.link??g.$w.instanceedit.route),this.setState({tab:e??M.tabs[0][0]})},fill:!0,variant:"pills",activeKey:this.state.tab,className:"flex-nowrap text-nowrap flex-column hover-bar sticky-top "+(h.ZP.instanceeditsidebar.value===h.mf.COLLAPSE?"pin-close":h.ZP.instanceeditsidebar.value===h.mf.EXPAND?"pin-open":""),style:{top:"8em"}},M.tabs.map((([e,t,a,n])=>{if(!this.state.instancePermissionSet)throw Error("this.state.instancePermissionSet is null in instanceedit nav map");const r=!n,l=!a(this.state.instancePermissionSet,this.context);return s.createElement(o.Z.Item,{key:e},s.createElement(o.Z.Link,{eventKey:e,bsPrefix:"nav-link instanceedittab",className:(r?"no-access text-white":"")+(l?"no-access text-white font-italic":"")+" text-left"},s.createElement(s.Fragment,null,s.createElement(i.G,{icon:l?"lock":t,fixedWidth:!0}),s.createElement("div",{className:"tab-text d-inline-block "+(l?"font-weight-lighter":"")},s.createElement("span",{className:"pl-1"},s.createElement(c.Z,{id:`view.instanceedit.tabs.${e}`}))))))}))))()),s.createElement(r.Z.Body,{className:"bg-body"},s.createElement(l.Z.Content,null,M.tabs.map((([e,,t,a])=>{if(!this.state.instancePermissionSet)throw Error("this.state.instancePermissionSet is null in render card map");return s.createElement(l.Z.Pane,{eventKey:e,key:e},a?t(this.state.instancePermissionSet,this.context)?s.createElement(a,null):s.createElement(b.Z,null):s.createElement(E.Z,null))}))))))))}}M.tabs=[["info","info",()=>!0,Z.default],["repository","code-branch",e=>!!(e.repositoryRights&T),I.default],["engine",n.l9D,e=>!!(e.engineRights&O),x.default],["deployment","hammer",e=>!!(e.dreamMakerRights&k),P.Deployment],["dreamdaemon","server",e=>!!(e.dreamDaemonRights&A),V.default],["chatbots","comments",e=>!!(e.chatBotRights&D),w.default],["files","folder-open",e=>!!(e.configurationRights&_),C.default],["users","users",()=>!0,R.default],["jobs","stream",()=>!0,N.default]],M.contextType=S.f,t.default=(0,d.EN)(M)}}]);
//# sourceMappingURL=182.863e8e49ed9d42931724.bundle.js.map